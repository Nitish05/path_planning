var b_=Object.defineProperty;var I_=(r,e,t)=>e in r?b_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var fe=(r,e,t)=>I_(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function od(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function P_(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var vg={exports:{}},Sl={},_g={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),R_=Symbol.for("react.portal"),M_=Symbol.for("react.fragment"),k_=Symbol.for("react.strict_mode"),D_=Symbol.for("react.profiler"),N_=Symbol.for("react.provider"),F_=Symbol.for("react.context"),B_=Symbol.for("react.forward_ref"),O_=Symbol.for("react.suspense"),L_=Symbol.for("react.memo"),U_=Symbol.for("react.lazy"),yf=Symbol.iterator;function G_(r){return r===null||typeof r!="object"?null:(r=yf&&r[yf]||r["@@iterator"],typeof r=="function"?r:null)}var xg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wg=Object.assign,Eg={};function Vn(r,e,t){this.props=r,this.context=e,this.refs=Eg,this.updater=t||xg}Vn.prototype.isReactComponent={};Vn.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Vn.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Tg(){}Tg.prototype=Vn.prototype;function ad(r,e,t){this.props=r,this.context=e,this.refs=Eg,this.updater=t||xg}var ld=ad.prototype=new Tg;ld.constructor=ad;wg(ld,Vn.prototype);ld.isPureReactComponent=!0;var vf=Array.isArray,Sg=Object.prototype.hasOwnProperty,ud={current:null},Ag={key:!0,ref:!0,__self:!0,__source:!0};function Cg(r,e,t){var i,n={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Sg.call(e,i)&&!Ag.hasOwnProperty(i)&&(n[i]=e[i]);var a=arguments.length-2;if(a===1)n.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];n.children=l}if(r&&r.defaultProps)for(i in a=r.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:uo,type:r,key:s,ref:o,props:n,_owner:ud.current}}function H_(r,e){return{$$typeof:uo,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function hd(r){return typeof r=="object"&&r!==null&&r.$$typeof===uo}function z_(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var _f=/\/+/g;function eu(r,e){return typeof r=="object"&&r!==null&&r.key!=null?z_(""+r.key):e.toString(36)}function ca(r,e,t,i,n){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case uo:case R_:o=!0}}if(o)return o=r,n=n(o),r=i===""?"."+eu(o,0):i,vf(n)?(t="",r!=null&&(t=r.replace(_f,"$&/")+"/"),ca(n,e,t,"",function(u){return u})):n!=null&&(hd(n)&&(n=H_(n,t+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(_f,"$&/")+"/")+r)),e.push(n)),1;if(o=0,i=i===""?".":i+":",vf(r))for(var a=0;a<r.length;a++){s=r[a];var l=i+eu(s,a);o+=ca(s,e,t,l,n)}else if(l=G_(r),typeof l=="function")for(r=l.call(r),a=0;!(s=r.next()).done;)s=s.value,l=i+eu(s,a++),o+=ca(s,e,t,l,n);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function To(r,e,t){if(r==null)return r;var i=[],n=0;return ca(r,i,"","",function(s){return e.call(t,s,n++)}),i}function $_(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var nt={current:null},da={transition:null},j_={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:da,ReactCurrentOwner:ud};function bg(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:To,forEach:function(r,e,t){To(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return To(r,function(){e++}),e},toArray:function(r){return To(r,function(e){return e})||[]},only:function(r){if(!hd(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};ne.Component=Vn;ne.Fragment=M_;ne.Profiler=D_;ne.PureComponent=ad;ne.StrictMode=k_;ne.Suspense=O_;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j_;ne.act=bg;ne.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var i=wg({},r.props),n=r.key,s=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ud.current),e.key!==void 0&&(n=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(l in e)Sg.call(e,l)&&!Ag.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:uo,type:r.type,key:n,ref:s,props:i,_owner:o}};ne.createContext=function(r){return r={$$typeof:F_,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:N_,_context:r},r.Consumer=r};ne.createElement=Cg;ne.createFactory=function(r){var e=Cg.bind(null,r);return e.type=r,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(r){return{$$typeof:B_,render:r}};ne.isValidElement=hd;ne.lazy=function(r){return{$$typeof:U_,_payload:{_status:-1,_result:r},_init:$_}};ne.memo=function(r,e){return{$$typeof:L_,type:r,compare:e===void 0?null:e}};ne.startTransition=function(r){var e=da.transition;da.transition={};try{r()}finally{da.transition=e}};ne.unstable_act=bg;ne.useCallback=function(r,e){return nt.current.useCallback(r,e)};ne.useContext=function(r){return nt.current.useContext(r)};ne.useDebugValue=function(){};ne.useDeferredValue=function(r){return nt.current.useDeferredValue(r)};ne.useEffect=function(r,e){return nt.current.useEffect(r,e)};ne.useId=function(){return nt.current.useId()};ne.useImperativeHandle=function(r,e,t){return nt.current.useImperativeHandle(r,e,t)};ne.useInsertionEffect=function(r,e){return nt.current.useInsertionEffect(r,e)};ne.useLayoutEffect=function(r,e){return nt.current.useLayoutEffect(r,e)};ne.useMemo=function(r,e){return nt.current.useMemo(r,e)};ne.useReducer=function(r,e,t){return nt.current.useReducer(r,e,t)};ne.useRef=function(r){return nt.current.useRef(r)};ne.useState=function(r){return nt.current.useState(r)};ne.useSyncExternalStore=function(r,e,t){return nt.current.useSyncExternalStore(r,e,t)};ne.useTransition=function(){return nt.current.useTransition()};ne.version="18.3.1";_g.exports=ne;var H=_g.exports;const V_=od(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=H,W_=Symbol.for("react.element"),Y_=Symbol.for("react.fragment"),K_=Object.prototype.hasOwnProperty,q_=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z_={key:!0,ref:!0,__self:!0,__source:!0};function Ig(r,e,t){var i,n={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)K_.call(e,i)&&!Z_.hasOwnProperty(i)&&(n[i]=e[i]);if(r&&r.defaultProps)for(i in e=r.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:W_,type:r,key:s,ref:o,props:n,_owner:q_.current}}Sl.Fragment=Y_;Sl.jsx=Ig;Sl.jsxs=Ig;vg.exports=Sl;var M=vg.exports,vh={},Pg={exports:{}},vt={},Rg={exports:{}},Mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(b,U){var C=b.length;b.push(U);e:for(;0<C;){var P=C-1>>>1,K=b[P];if(0<n(K,U))b[P]=U,b[C]=K,C=P;else break e}}function t(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var U=b[0],C=b.pop();if(C!==U){b[0]=C;e:for(var P=0,K=b.length,oe=K>>>1;P<oe;){var W=2*(P+1)-1,se=b[W],te=W+1,ue=b[te];if(0>n(se,C))te<K&&0>n(ue,se)?(b[P]=ue,b[te]=C,P=te):(b[P]=se,b[W]=C,P=W);else if(te<K&&0>n(ue,C))b[P]=ue,b[te]=C,P=te;else break e}}return U}function n(b,U){var C=b.sortIndex-U.sortIndex;return C!==0?C:b.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,p=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(b){for(var U=t(u);U!==null;){if(U.callback===null)i(u);else if(U.startTime<=b)i(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(u)}}function x(b){if(y=!1,m(b),!p)if(t(l)!==null)p=!0,Z(w);else{var U=t(u);U!==null&&$(x,U.startTime-b)}}function w(b,U){p=!1,y&&(y=!1,g(E),E=-1),f=!0;var C=d;try{for(m(U),c=t(l);c!==null&&(!(c.expirationTime>U)||b&&!q());){var P=c.callback;if(typeof P=="function"){c.callback=null,d=c.priorityLevel;var K=P(c.expirationTime<=U);U=r.unstable_now(),typeof K=="function"?c.callback=K:c===t(l)&&i(l),m(U)}else i(l);c=t(l)}if(c!==null)var oe=!0;else{var W=t(u);W!==null&&$(x,W.startTime-U),oe=!1}return oe}finally{c=null,d=C,f=!1}}var S=!1,T=null,E=-1,I=5,R=-1;function q(){return!(r.unstable_now()-R<I)}function F(){if(T!==null){var b=r.unstable_now();R=b;var U=!0;try{U=T(!0,b)}finally{U?A():(S=!1,T=null)}}else S=!1}var A;if(typeof v=="function")A=function(){v(F)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,G=k.port2;k.port1.onmessage=F,A=function(){G.postMessage(null)}}else A=function(){_(F,0)};function Z(b){T=b,S||(S=!0,A())}function $(b,U){E=_(function(){b(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(b){b.callback=null},r.unstable_continueExecution=function(){p||f||(p=!0,Z(w))},r.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<b?Math.floor(1e3/b):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(b){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var C=d;d=U;try{return b()}finally{d=C}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(b,U){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var C=d;d=b;try{return U()}finally{d=C}},r.unstable_scheduleCallback=function(b,U,C){var P=r.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?P+C:P):C=P,b){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=C+K,b={id:h++,callback:U,priorityLevel:b,startTime:C,expirationTime:K,sortIndex:-1},C>P?(b.sortIndex=C,e(u,b),t(l)===null&&b===t(u)&&(y?(g(E),E=-1):y=!0,$(x,C-P))):(b.sortIndex=K,e(l,b),p||f||(p=!0,Z(w))),b},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(b){var U=d;return function(){var C=d;d=U;try{return b.apply(this,arguments)}finally{d=C}}}})(Mg);Rg.exports=Mg;var Q_=Rg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_=H,yt=Q_;function D(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kg=new Set,Us={};function Hi(r,e){Fn(r,e),Fn(r+"Capture",e)}function Fn(r,e){for(Us[r]=e,r=0;r<e.length;r++)kg.add(e[r])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_h=Object.prototype.hasOwnProperty,ex=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xf={},wf={};function tx(r){return _h.call(wf,r)?!0:_h.call(xf,r)?!1:ex.test(r)?wf[r]=!0:(xf[r]=!0,!1)}function rx(r,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function ix(r,e,t,i){if(e===null||typeof e>"u"||rx(r,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function st(r,e,t,i,n,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Ye[r]=new st(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Ye[e]=new st(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Ye[r]=new st(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Ye[r]=new st(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Ye[r]=new st(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Ye[r]=new st(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Ye[r]=new st(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Ye[r]=new st(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Ye[r]=new st(r,5,!1,r.toLowerCase(),null,!1,!1)});var cd=/[\-:]([a-z])/g;function dd(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(cd,dd);Ye[e]=new st(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(cd,dd);Ye[e]=new st(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(cd,dd);Ye[e]=new st(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Ye[r]=new st(r,1,!1,r.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Ye[r]=new st(r,1,!1,r.toLowerCase(),null,!0,!0)});function fd(r,e,t,i){var n=Ye.hasOwnProperty(e)?Ye[e]:null;(n!==null?n.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ix(e,t,n,i)&&(t=null),i||n===null?tx(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):n.mustUseProperty?r[n.propertyName]=t===null?n.type===3?!1:"":t:(e=n.attributeName,i=n.attributeNamespace,t===null?r.removeAttribute(e):(n=n.type,t=n===3||n===4&&t===!0?"":""+t,i?r.setAttributeNS(i,e,t):r.setAttribute(e,t))))}var Mr=J_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,So=Symbol.for("react.element"),on=Symbol.for("react.portal"),an=Symbol.for("react.fragment"),pd=Symbol.for("react.strict_mode"),xh=Symbol.for("react.profiler"),Dg=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),wh=Symbol.for("react.suspense"),Eh=Symbol.for("react.suspense_list"),gd=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),Fg=Symbol.for("react.offscreen"),Ef=Symbol.iterator;function Qn(r){return r===null||typeof r!="object"?null:(r=Ef&&r[Ef]||r["@@iterator"],typeof r=="function"?r:null)}var Se=Object.assign,tu;function fs(r){if(tu===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);tu=e&&e[1]||""}return`
`+tu+r}var ru=!1;function iu(r,e){if(!r||ru)return"";ru=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){i=u}r.call(e.prototype)}else{try{throw Error()}catch(u){i=u}r()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=a);break}}}finally{ru=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?fs(r):""}function nx(r){switch(r.tag){case 5:return fs(r.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 2:case 15:return r=iu(r.type,!1),r;case 11:return r=iu(r.type.render,!1),r;case 1:return r=iu(r.type,!0),r;default:return""}}function Th(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case an:return"Fragment";case on:return"Portal";case xh:return"Profiler";case pd:return"StrictMode";case wh:return"Suspense";case Eh:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Ng:return(r.displayName||"Context")+".Consumer";case Dg:return(r._context.displayName||"Context")+".Provider";case md:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case gd:return e=r.displayName||null,e!==null?e:Th(r.type)||"Memo";case Br:e=r._payload,r=r._init;try{return Th(r(e))}catch{}}return null}function sx(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Th(e);case 8:return e===pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Bg(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ox(r){var e=Bg(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),i=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var n=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Ao(r){r._valueTracker||(r._valueTracker=ox(r))}function Og(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return r&&(i=Bg(r)?r.checked?"true":"false":r.value),r=i,r!==t?(e.setValue(r),!0):!1}function Na(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Sh(r,e){var t=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function Tf(r,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ri(e.value!=null?e.value:t),r._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lg(r,e){e=e.checked,e!=null&&fd(r,"checked",e,!1)}function Ah(r,e){Lg(r,e);var t=ri(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(i==="submit"||i==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?Ch(r,e.type,t):e.hasOwnProperty("defaultValue")&&Ch(r,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Sf(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function Ch(r,e,t){(e!=="number"||Na(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var ps=Array.isArray;function wn(r,e,t,i){if(r=r.options,e){e={};for(var n=0;n<t.length;n++)e["$"+t[n]]=!0;for(t=0;t<r.length;t++)n=e.hasOwnProperty("$"+r[t].value),r[t].selected!==n&&(r[t].selected=n),n&&i&&(r[t].defaultSelected=!0)}else{for(t=""+ri(t),e=null,n=0;n<r.length;n++){if(r[n].value===t){r[n].selected=!0,i&&(r[n].defaultSelected=!0);return}e!==null||r[n].disabled||(e=r[n])}e!==null&&(e.selected=!0)}}function bh(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Af(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(D(92));if(ps(t)){if(1<t.length)throw Error(D(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:ri(t)}}function Ug(r,e){var t=ri(e.value),i=ri(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),i!=null&&(r.defaultValue=""+i)}function Cf(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function Gg(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ih(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?Gg(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Co,Hg=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction(function(){return r(e,t,i,n)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Co.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Gs(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ax=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(r){ax.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),As[e]=As[r]})});function zg(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||As.hasOwnProperty(r)&&As[r]?(""+e).trim():e+"px"}function $g(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,n=zg(t,e[t],i);t==="float"&&(t="cssFloat"),i?r.setProperty(t,n):r[t]=n}}var lx=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ph(r,e){if(e){if(lx[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Rh(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=null;function yd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var kh=null,En=null,Tn=null;function bf(r){if(r=fo(r)){if(typeof kh!="function")throw Error(D(280));var e=r.stateNode;e&&(e=Pl(e),kh(r.stateNode,r.type,e))}}function jg(r){En?Tn?Tn.push(r):Tn=[r]:En=r}function Vg(){if(En){var r=En,e=Tn;if(Tn=En=null,bf(r),e)for(r=0;r<e.length;r++)bf(e[r])}}function Xg(r,e){return r(e)}function Wg(){}var nu=!1;function Yg(r,e,t){if(nu)return r(e,t);nu=!0;try{return Xg(r,e,t)}finally{nu=!1,(En!==null||Tn!==null)&&(Wg(),Vg())}}function Hs(r,e){var t=r.stateNode;if(t===null)return null;var i=Pl(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(r=r.type,i=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!i;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(D(231,e,typeof t));return t}var Dh=!1;if(Ar)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{Dh=!1}function ux(r,e,t,i,n,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Cs=!1,Fa=null,Ba=!1,Nh=null,hx={onError:function(r){Cs=!0,Fa=r}};function cx(r,e,t,i,n,s,o,a,l){Cs=!1,Fa=null,ux.apply(hx,arguments)}function dx(r,e,t,i,n,s,o,a,l){if(cx.apply(this,arguments),Cs){if(Cs){var u=Fa;Cs=!1,Fa=null}else throw Error(D(198));Ba||(Ba=!0,Nh=u)}}function zi(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function Kg(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function If(r){if(zi(r)!==r)throw Error(D(188))}function fx(r){var e=r.alternate;if(!e){if(e=zi(r),e===null)throw Error(D(188));return e!==r?null:r}for(var t=r,i=e;;){var n=t.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){t=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===t)return If(n),r;if(s===i)return If(n),e;s=s.sibling}throw Error(D(188))}if(t.return!==i.return)t=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===t){o=!0,t=n,i=s;break}if(a===i){o=!0,i=n,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=n;break}if(a===i){o=!0,i=s,t=n;break}a=a.sibling}if(!o)throw Error(D(189))}}if(t.alternate!==i)throw Error(D(190))}if(t.tag!==3)throw Error(D(188));return t.stateNode.current===t?r:e}function qg(r){return r=fx(r),r!==null?Zg(r):null}function Zg(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=Zg(r);if(e!==null)return e;r=r.sibling}return null}var Qg=yt.unstable_scheduleCallback,Pf=yt.unstable_cancelCallback,px=yt.unstable_shouldYield,mx=yt.unstable_requestPaint,Me=yt.unstable_now,gx=yt.unstable_getCurrentPriorityLevel,vd=yt.unstable_ImmediatePriority,Jg=yt.unstable_UserBlockingPriority,Oa=yt.unstable_NormalPriority,yx=yt.unstable_LowPriority,ey=yt.unstable_IdlePriority,Al=null,or=null;function vx(r){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Al,r,void 0,(r.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:wx,_x=Math.log,xx=Math.LN2;function wx(r){return r>>>=0,r===0?32:31-(_x(r)/xx|0)|0}var bo=64,Io=4194304;function ms(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function La(r,e){var t=r.pendingLanes;if(t===0)return 0;var i=0,n=r.suspendedLanes,s=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~n;a!==0?i=ms(a):(s&=o,s!==0&&(i=ms(s)))}else o=t&~n,o!==0?i=ms(o):s!==0&&(i=ms(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&n)&&(n=i&-i,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=i;0<e;)t=31-Ut(e),n=1<<t,i|=r[t],e&=~n;return i}function Ex(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tx(r,e){for(var t=r.suspendedLanes,i=r.pingedLanes,n=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-Ut(s),a=1<<o,l=n[o];l===-1?(!(a&t)||a&i)&&(n[o]=Ex(a,e)):l<=e&&(r.expiredLanes|=a),s&=~a}}function Fh(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ty(){var r=bo;return bo<<=1,!(bo&4194240)&&(bo=64),r}function su(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function ho(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Ut(e),r[e]=t}function Sx(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var i=r.eventTimes;for(r=r.expirationTimes;0<t;){var n=31-Ut(t),s=1<<n;e[n]=0,i[n]=-1,r[n]=-1,t&=~s}}function _d(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var i=31-Ut(t),n=1<<i;n&e|r[i]&e&&(r[i]|=e),t&=~n}}var he=0;function ry(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var iy,xd,ny,sy,oy,Bh=!1,Po=[],Wr=null,Yr=null,Kr=null,zs=new Map,$s=new Map,Ur=[],Ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rf(r,e){switch(r){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":zs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(e.pointerId)}}function es(r,e,t,i,n,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},e!==null&&(e=fo(e),e!==null&&xd(e)),r):(r.eventSystemFlags|=i,e=r.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),r)}function Cx(r,e,t,i,n){switch(e){case"focusin":return Wr=es(Wr,r,e,t,i,n),!0;case"dragenter":return Yr=es(Yr,r,e,t,i,n),!0;case"mouseover":return Kr=es(Kr,r,e,t,i,n),!0;case"pointerover":var s=n.pointerId;return zs.set(s,es(zs.get(s)||null,r,e,t,i,n)),!0;case"gotpointercapture":return s=n.pointerId,$s.set(s,es($s.get(s)||null,r,e,t,i,n)),!0}return!1}function ay(r){var e=Si(r.target);if(e!==null){var t=zi(e);if(t!==null){if(e=t.tag,e===13){if(e=Kg(t),e!==null){r.blockedOn=e,oy(r.priority,function(){ny(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function fa(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=Oh(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var i=new t.constructor(t.type,t);Mh=i,t.target.dispatchEvent(i),Mh=null}else return e=fo(t),e!==null&&xd(e),r.blockedOn=t,!1;e.shift()}return!0}function Mf(r,e,t){fa(r)&&t.delete(e)}function bx(){Bh=!1,Wr!==null&&fa(Wr)&&(Wr=null),Yr!==null&&fa(Yr)&&(Yr=null),Kr!==null&&fa(Kr)&&(Kr=null),zs.forEach(Mf),$s.forEach(Mf)}function ts(r,e){r.blockedOn===e&&(r.blockedOn=null,Bh||(Bh=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,bx)))}function js(r){function e(n){return ts(n,r)}if(0<Po.length){ts(Po[0],r);for(var t=1;t<Po.length;t++){var i=Po[t];i.blockedOn===r&&(i.blockedOn=null)}}for(Wr!==null&&ts(Wr,r),Yr!==null&&ts(Yr,r),Kr!==null&&ts(Kr,r),zs.forEach(e),$s.forEach(e),t=0;t<Ur.length;t++)i=Ur[t],i.blockedOn===r&&(i.blockedOn=null);for(;0<Ur.length&&(t=Ur[0],t.blockedOn===null);)ay(t),t.blockedOn===null&&Ur.shift()}var Sn=Mr.ReactCurrentBatchConfig,Ua=!0;function Ix(r,e,t,i){var n=he,s=Sn.transition;Sn.transition=null;try{he=1,wd(r,e,t,i)}finally{he=n,Sn.transition=s}}function Px(r,e,t,i){var n=he,s=Sn.transition;Sn.transition=null;try{he=4,wd(r,e,t,i)}finally{he=n,Sn.transition=s}}function wd(r,e,t,i){if(Ua){var n=Oh(r,e,t,i);if(n===null)mu(r,e,i,Ga,t),Rf(r,i);else if(Cx(n,r,e,t,i))i.stopPropagation();else if(Rf(r,i),e&4&&-1<Ax.indexOf(r)){for(;n!==null;){var s=fo(n);if(s!==null&&iy(s),s=Oh(r,e,t,i),s===null&&mu(r,e,i,Ga,t),s===n)break;n=s}n!==null&&i.stopPropagation()}else mu(r,e,i,null,t)}}var Ga=null;function Oh(r,e,t,i){if(Ga=null,r=yd(i),r=Si(r),r!==null)if(e=zi(r),e===null)r=null;else if(t=e.tag,t===13){if(r=Kg(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Ga=r,null}function ly(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gx()){case vd:return 1;case Jg:return 4;case Oa:case yx:return 16;case ey:return 536870912;default:return 16}default:return 16}}var zr=null,Ed=null,pa=null;function uy(){if(pa)return pa;var r,e=Ed,t=e.length,i,n="value"in zr?zr.value:zr.textContent,s=n.length;for(r=0;r<t&&e[r]===n[r];r++);var o=t-r;for(i=1;i<=o&&e[t-i]===n[s-i];i++);return pa=n.slice(r,1<i?1-i:void 0)}function ma(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function Ro(){return!0}function kf(){return!1}function _t(r){function e(t,i,n,s,o){this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ro:kf,this.isPropagationStopped=kf,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),e}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Td=_t(Xn),co=Se({},Xn,{view:0,detail:0}),Rx=_t(co),ou,au,rs,Cl=Se({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rs&&(rs&&r.type==="mousemove"?(ou=r.screenX-rs.screenX,au=r.screenY-rs.screenY):au=ou=0,rs=r),ou)},movementY:function(r){return"movementY"in r?r.movementY:au}}),Df=_t(Cl),Mx=Se({},Cl,{dataTransfer:0}),kx=_t(Mx),Dx=Se({},co,{relatedTarget:0}),lu=_t(Dx),Nx=Se({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=_t(Nx),Bx=Se({},Xn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ox=_t(Bx),Lx=Se({},Xn,{data:0}),Nf=_t(Lx),Ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zx(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=Hx[r])?!!e[r]:!1}function Sd(){return zx}var $x=Se({},co,{key:function(r){if(r.key){var e=Ux[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=ma(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gx[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sd,charCode:function(r){return r.type==="keypress"?ma(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ma(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),jx=_t($x),Vx=Se({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=_t(Vx),Xx=Se({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sd}),Wx=_t(Xx),Yx=Se({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kx=_t(Yx),qx=Se({},Cl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Zx=_t(qx),Qx=[9,13,27,32],Ad=Ar&&"CompositionEvent"in window,bs=null;Ar&&"documentMode"in document&&(bs=document.documentMode);var Jx=Ar&&"TextEvent"in window&&!bs,hy=Ar&&(!Ad||bs&&8<bs&&11>=bs),Bf=" ",Of=!1;function cy(r,e){switch(r){case"keyup":return Qx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dy(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ln=!1;function e1(r,e){switch(r){case"compositionend":return dy(e);case"keypress":return e.which!==32?null:(Of=!0,Bf);case"textInput":return r=e.data,r===Bf&&Of?null:r;default:return null}}function t1(r,e){if(ln)return r==="compositionend"||!Ad&&cy(r,e)?(r=uy(),pa=Ed=zr=null,ln=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hy&&e.locale!=="ko"?null:e.data;default:return null}}var r1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!r1[r.type]:e==="textarea"}function fy(r,e,t,i){jg(i),e=Ha(e,"onChange"),0<e.length&&(t=new Td("onChange","change",null,t,i),r.push({event:t,listeners:e}))}var Is=null,Vs=null;function i1(r){Sy(r,0)}function bl(r){var e=cn(r);if(Og(e))return r}function n1(r,e){if(r==="change")return e}var py=!1;if(Ar){var uu;if(Ar){var hu="oninput"in document;if(!hu){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),hu=typeof Uf.oninput=="function"}uu=hu}else uu=!1;py=uu&&(!document.documentMode||9<document.documentMode)}function Gf(){Is&&(Is.detachEvent("onpropertychange",my),Vs=Is=null)}function my(r){if(r.propertyName==="value"&&bl(Vs)){var e=[];fy(e,Vs,r,yd(r)),Yg(i1,e)}}function s1(r,e,t){r==="focusin"?(Gf(),Is=e,Vs=t,Is.attachEvent("onpropertychange",my)):r==="focusout"&&Gf()}function o1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return bl(Vs)}function a1(r,e){if(r==="click")return bl(e)}function l1(r,e){if(r==="input"||r==="change")return bl(e)}function u1(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var $t=typeof Object.is=="function"?Object.is:u1;function Xs(r,e){if($t(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var n=t[i];if(!_h.call(e,n)||!$t(r[n],e[n]))return!1}return!0}function Hf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zf(r,e){var t=Hf(r);r=0;for(var i;t;){if(t.nodeType===3){if(i=r+t.textContent.length,r<=e&&i>=e)return{node:t,offset:e-r};r=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Hf(t)}}function gy(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?gy(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function yy(){for(var r=window,e=Na();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Na(r.document)}return e}function Cd(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function h1(r){var e=yy(),t=r.focusedElem,i=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&gy(t.ownerDocument.documentElement,t)){if(i!==null&&Cd(t)){if(e=i.start,r=i.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var n=t.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!r.extend&&s>i&&(n=i,i=s,s=n),n=zf(t,s);var o=zf(t,i);n&&o&&(r.rangeCount!==1||r.anchorNode!==n.node||r.anchorOffset!==n.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),r.removeAllRanges(),s>i?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var c1=Ar&&"documentMode"in document&&11>=document.documentMode,un=null,Lh=null,Ps=null,Uh=!1;function $f(r,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Uh||un==null||un!==Na(i)||(i=un,"selectionStart"in i&&Cd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ps&&Xs(Ps,i)||(Ps=i,i=Ha(Lh,"onSelect"),0<i.length&&(e=new Td("onSelect","select",null,e,t),r.push({event:e,listeners:i}),e.target=un)))}function Mo(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var hn={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},cu={},vy={};Ar&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function Il(r){if(cu[r])return cu[r];if(!hn[r])return r;var e=hn[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in vy)return cu[r]=e[t];return r}var _y=Il("animationend"),xy=Il("animationiteration"),wy=Il("animationstart"),Ey=Il("transitionend"),Ty=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(r,e){Ty.set(r,e),Hi(e,[r])}for(var du=0;du<jf.length;du++){var fu=jf[du],d1=fu.toLowerCase(),f1=fu[0].toUpperCase()+fu.slice(1);oi(d1,"on"+f1)}oi(_y,"onAnimationEnd");oi(xy,"onAnimationIteration");oi(wy,"onAnimationStart");oi("dblclick","onDoubleClick");oi("focusin","onFocus");oi("focusout","onBlur");oi(Ey,"onTransitionEnd");Fn("onMouseEnter",["mouseout","mouseover"]);Fn("onMouseLeave",["mouseout","mouseover"]);Fn("onPointerEnter",["pointerout","pointerover"]);Fn("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function Vf(r,e,t){var i=r.type||"unknown-event";r.currentTarget=t,dx(i,e,void 0,r),r.currentTarget=null}function Sy(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var i=r[t],n=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;Vf(n,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;Vf(n,a,u),s=l}}}if(Ba)throw r=Nh,Ba=!1,Nh=null,r}function pe(r,e){var t=e[jh];t===void 0&&(t=e[jh]=new Set);var i=r+"__bubble";t.has(i)||(Ay(e,r,2,!1),t.add(i))}function pu(r,e,t){var i=0;e&&(i|=4),Ay(t,r,i,e)}var ko="_reactListening"+Math.random().toString(36).slice(2);function Ws(r){if(!r[ko]){r[ko]=!0,kg.forEach(function(t){t!=="selectionchange"&&(p1.has(t)||pu(t,!1,r),pu(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[ko]||(e[ko]=!0,pu("selectionchange",!1,e))}}function Ay(r,e,t,i){switch(ly(e)){case 1:var n=Ix;break;case 4:n=Px;break;default:n=wd}t=n.bind(null,e,t,r),n=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),i?n!==void 0?r.addEventListener(e,t,{capture:!0,passive:n}):r.addEventListener(e,t,!0):n!==void 0?r.addEventListener(e,t,{passive:n}):r.addEventListener(e,t,!1)}function mu(r,e,t,i,n){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Si(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Yg(function(){var u=s,h=yd(t),c=[];e:{var d=Ty.get(r);if(d!==void 0){var f=Td,p=r;switch(r){case"keypress":if(ma(t)===0)break e;case"keydown":case"keyup":f=jx;break;case"focusin":p="focus",f=lu;break;case"focusout":p="blur",f=lu;break;case"beforeblur":case"afterblur":f=lu;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=kx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Wx;break;case _y:case xy:case wy:f=Fx;break;case Ey:f=Kx;break;case"scroll":f=Rx;break;case"wheel":f=Zx;break;case"copy":case"cut":case"paste":f=Ox;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Ff}var y=(e&4)!==0,_=!y&&r==="scroll",g=y?d!==null?d+"Capture":null:d;y=[];for(var v=u,m;v!==null;){m=v;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=Hs(v,g),x!=null&&y.push(Ys(v,x,m)))),_)break;v=v.return}0<y.length&&(d=new f(d,p,null,t,h),c.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",f=r==="mouseout"||r==="pointerout",d&&t!==Mh&&(p=t.relatedTarget||t.fromElement)&&(Si(p)||p[Cr]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?Si(p):null,p!==null&&(_=zi(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=Df,x="onMouseLeave",g="onMouseEnter",v="mouse",(r==="pointerout"||r==="pointerover")&&(y=Ff,x="onPointerLeave",g="onPointerEnter",v="pointer"),_=f==null?d:cn(f),m=p==null?d:cn(p),d=new y(x,v+"leave",f,t,h),d.target=_,d.relatedTarget=m,x=null,Si(h)===u&&(y=new y(g,v+"enter",p,t,h),y.target=m,y.relatedTarget=_,x=y),_=x,f&&p)t:{for(y=f,g=p,v=0,m=y;m;m=Xi(m))v++;for(m=0,x=g;x;x=Xi(x))m++;for(;0<v-m;)y=Xi(y),v--;for(;0<m-v;)g=Xi(g),m--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Xi(y),g=Xi(g)}y=null}else y=null;f!==null&&Xf(c,d,f,y,!1),p!==null&&_!==null&&Xf(c,_,p,y,!0)}}e:{if(d=u?cn(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=n1;else if(Lf(d))if(py)w=l1;else{w=o1;var S=s1}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=a1);if(w&&(w=w(r,u))){fy(c,w,t,h);break e}S&&S(r,d,u),r==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Ch(d,"number",d.value)}switch(S=u?cn(u):window,r){case"focusin":(Lf(S)||S.contentEditable==="true")&&(un=S,Lh=u,Ps=null);break;case"focusout":Ps=Lh=un=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,$f(c,t,h);break;case"selectionchange":if(c1)break;case"keydown":case"keyup":$f(c,t,h)}var T;if(Ad)e:{switch(r){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ln?cy(r,t)&&(E="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(hy&&t.locale!=="ko"&&(ln||E!=="onCompositionStart"?E==="onCompositionEnd"&&ln&&(T=uy()):(zr=h,Ed="value"in zr?zr.value:zr.textContent,ln=!0)),S=Ha(u,E),0<S.length&&(E=new Nf(E,r,null,t,h),c.push({event:E,listeners:S}),T?E.data=T:(T=dy(t),T!==null&&(E.data=T)))),(T=Jx?e1(r,t):t1(r,t))&&(u=Ha(u,"onBeforeInput"),0<u.length&&(h=new Nf("onBeforeInput","beforeinput",null,t,h),c.push({event:h,listeners:u}),h.data=T))}Sy(c,e)})}function Ys(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Ha(r,e){for(var t=e+"Capture",i=[];r!==null;){var n=r,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Hs(r,t),s!=null&&i.unshift(Ys(r,s,n)),s=Hs(r,e),s!=null&&i.push(Ys(r,s,n))),r=r.return}return i}function Xi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Xf(r,e,t,i,n){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,n?(l=Hs(t,s),l!=null&&o.unshift(Ys(t,l,a))):n||(l=Hs(t,s),l!=null&&o.push(Ys(t,l,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var m1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function Wf(r){return(typeof r=="string"?r:""+r).replace(m1,`
`).replace(g1,"")}function Do(r,e,t){if(e=Wf(e),Wf(r)!==e&&t)throw Error(D(425))}function za(){}var Gh=null,Hh=null;function zh(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $h=typeof setTimeout=="function"?setTimeout:void 0,y1=typeof clearTimeout=="function"?clearTimeout:void 0,Yf=typeof Promise=="function"?Promise:void 0,v1=typeof queueMicrotask=="function"?queueMicrotask:typeof Yf<"u"?function(r){return Yf.resolve(null).then(r).catch(_1)}:$h;function _1(r){setTimeout(function(){throw r})}function gu(r,e){var t=e,i=0;do{var n=t.nextSibling;if(r.removeChild(t),n&&n.nodeType===8)if(t=n.data,t==="/$"){if(i===0){r.removeChild(n),js(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=n}while(t);js(e)}function qr(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function Kf(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Wn=Math.random().toString(36).slice(2),nr="__reactFiber$"+Wn,Ks="__reactProps$"+Wn,Cr="__reactContainer$"+Wn,jh="__reactEvents$"+Wn,x1="__reactListeners$"+Wn,w1="__reactHandles$"+Wn;function Si(r){var e=r[nr];if(e)return e;for(var t=r.parentNode;t;){if(e=t[Cr]||t[nr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=Kf(r);r!==null;){if(t=r[nr])return t;r=Kf(r)}return e}r=t,t=r.parentNode}return null}function fo(r){return r=r[nr]||r[Cr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function cn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(D(33))}function Pl(r){return r[Ks]||null}var Vh=[],dn=-1;function ai(r){return{current:r}}function ge(r){0>dn||(r.current=Vh[dn],Vh[dn]=null,dn--)}function de(r,e){dn++,Vh[dn]=r.current,r.current=e}var ii={},Je=ai(ii),ut=ai(!1),ki=ii;function Bn(r,e){var t=r.type.contextTypes;if(!t)return ii;var i=r.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in t)n[s]=e[s];return i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=n),n}function ht(r){return r=r.childContextTypes,r!=null}function $a(){ge(ut),ge(Je)}function qf(r,e,t){if(Je.current!==ii)throw Error(D(168));de(Je,e),de(ut,t)}function Cy(r,e,t){var i=r.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error(D(108,sx(r)||"Unknown",n));return Se({},t,i)}function ja(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ii,ki=Je.current,de(Je,r),de(ut,ut.current),!0}function Zf(r,e,t){var i=r.stateNode;if(!i)throw Error(D(169));t?(r=Cy(r,e,ki),i.__reactInternalMemoizedMergedChildContext=r,ge(ut),ge(Je),de(Je,r)):ge(ut),de(ut,t)}var gr=null,Rl=!1,yu=!1;function by(r){gr===null?gr=[r]:gr.push(r)}function E1(r){Rl=!0,by(r)}function li(){if(!yu&&gr!==null){yu=!0;var r=0,e=he;try{var t=gr;for(he=1;r<t.length;r++){var i=t[r];do i=i(!0);while(i!==null)}gr=null,Rl=!1}catch(n){throw gr!==null&&(gr=gr.slice(r+1)),Qg(vd,li),n}finally{he=e,yu=!1}}return null}var fn=[],pn=0,Va=null,Xa=0,wt=[],Et=0,Di=null,yr=1,vr="";function fi(r,e){fn[pn++]=Xa,fn[pn++]=Va,Va=r,Xa=e}function Iy(r,e,t){wt[Et++]=yr,wt[Et++]=vr,wt[Et++]=Di,Di=r;var i=yr;r=vr;var n=32-Ut(i)-1;i&=~(1<<n),t+=1;var s=32-Ut(e)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,yr=1<<32-Ut(e)+n|t<<n|i,vr=s+r}else yr=1<<s|t<<n|i,vr=r}function bd(r){r.return!==null&&(fi(r,1),Iy(r,1,0))}function Id(r){for(;r===Va;)Va=fn[--pn],fn[pn]=null,Xa=fn[--pn],fn[pn]=null;for(;r===Di;)Di=wt[--Et],wt[Et]=null,vr=wt[--Et],wt[Et]=null,yr=wt[--Et],wt[Et]=null}var gt=null,pt=null,ve=!1,Ot=null;function Py(r,e){var t=Tt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function Qf(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,gt=r,pt=qr(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,gt=r,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Di!==null?{id:yr,overflow:vr}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Tt(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,gt=r,pt=null,!0):!1;default:return!1}}function Xh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Wh(r){if(ve){var e=pt;if(e){var t=e;if(!Qf(r,e)){if(Xh(r))throw Error(D(418));e=qr(t.nextSibling);var i=gt;e&&Qf(r,e)?Py(i,t):(r.flags=r.flags&-4097|2,ve=!1,gt=r)}}else{if(Xh(r))throw Error(D(418));r.flags=r.flags&-4097|2,ve=!1,gt=r}}}function Jf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gt=r}function No(r){if(r!==gt)return!1;if(!ve)return Jf(r),ve=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!zh(r.type,r.memoizedProps)),e&&(e=pt)){if(Xh(r))throw Ry(),Error(D(418));for(;e;)Py(r,e),e=qr(e.nextSibling)}if(Jf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(D(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){pt=qr(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}pt=null}}else pt=gt?qr(r.stateNode.nextSibling):null;return!0}function Ry(){for(var r=pt;r;)r=qr(r.nextSibling)}function On(){pt=gt=null,ve=!1}function Pd(r){Ot===null?Ot=[r]:Ot.push(r)}var T1=Mr.ReactCurrentBatchConfig;function is(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(D(309));var i=t.stateNode}if(!i)throw Error(D(147,r));var n=i,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof r!="string")throw Error(D(284));if(!t._owner)throw Error(D(290,r))}return r}function Fo(r,e){throw r=Object.prototype.toString.call(e),Error(D(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function ep(r){var e=r._init;return e(r._payload)}function My(r){function e(g,v){if(r){var m=g.deletions;m===null?(g.deletions=[v],g.flags|=16):m.push(v)}}function t(g,v){if(!r)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function i(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function n(g,v){return g=ei(g,v),g.index=0,g.sibling=null,g}function s(g,v,m){return g.index=m,r?(m=g.alternate,m!==null?(m=m.index,m<v?(g.flags|=2,v):m):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return r&&g.alternate===null&&(g.flags|=2),g}function a(g,v,m,x){return v===null||v.tag!==6?(v=Su(m,g.mode,x),v.return=g,v):(v=n(v,m),v.return=g,v)}function l(g,v,m,x){var w=m.type;return w===an?h(g,v,m.props.children,x,m.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Br&&ep(w)===v.type)?(x=n(v,m.props),x.ref=is(g,v,m),x.return=g,x):(x=Ea(m.type,m.key,m.props,null,g.mode,x),x.ref=is(g,v,m),x.return=g,x)}function u(g,v,m,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==m.containerInfo||v.stateNode.implementation!==m.implementation?(v=Au(m,g.mode,x),v.return=g,v):(v=n(v,m.children||[]),v.return=g,v)}function h(g,v,m,x,w){return v===null||v.tag!==7?(v=Ii(m,g.mode,x,w),v.return=g,v):(v=n(v,m),v.return=g,v)}function c(g,v,m){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Su(""+v,g.mode,m),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case So:return m=Ea(v.type,v.key,v.props,null,g.mode,m),m.ref=is(g,null,v),m.return=g,m;case on:return v=Au(v,g.mode,m),v.return=g,v;case Br:var x=v._init;return c(g,x(v._payload),m)}if(ps(v)||Qn(v))return v=Ii(v,g.mode,m,null),v.return=g,v;Fo(g,v)}return null}function d(g,v,m,x){var w=v!==null?v.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return w!==null?null:a(g,v,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case So:return m.key===w?l(g,v,m,x):null;case on:return m.key===w?u(g,v,m,x):null;case Br:return w=m._init,d(g,v,w(m._payload),x)}if(ps(m)||Qn(m))return w!==null?null:h(g,v,m,x,null);Fo(g,m)}return null}function f(g,v,m,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,a(v,g,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case So:return g=g.get(x.key===null?m:x.key)||null,l(v,g,x,w);case on:return g=g.get(x.key===null?m:x.key)||null,u(v,g,x,w);case Br:var S=x._init;return f(g,v,m,S(x._payload),w)}if(ps(x)||Qn(x))return g=g.get(m)||null,h(v,g,x,w,null);Fo(v,x)}return null}function p(g,v,m,x){for(var w=null,S=null,T=v,E=v=0,I=null;T!==null&&E<m.length;E++){T.index>E?(I=T,T=null):I=T.sibling;var R=d(g,T,m[E],x);if(R===null){T===null&&(T=I);break}r&&T&&R.alternate===null&&e(g,T),v=s(R,v,E),S===null?w=R:S.sibling=R,S=R,T=I}if(E===m.length)return t(g,T),ve&&fi(g,E),w;if(T===null){for(;E<m.length;E++)T=c(g,m[E],x),T!==null&&(v=s(T,v,E),S===null?w=T:S.sibling=T,S=T);return ve&&fi(g,E),w}for(T=i(g,T);E<m.length;E++)I=f(T,g,E,m[E],x),I!==null&&(r&&I.alternate!==null&&T.delete(I.key===null?E:I.key),v=s(I,v,E),S===null?w=I:S.sibling=I,S=I);return r&&T.forEach(function(q){return e(g,q)}),ve&&fi(g,E),w}function y(g,v,m,x){var w=Qn(m);if(typeof w!="function")throw Error(D(150));if(m=w.call(m),m==null)throw Error(D(151));for(var S=w=null,T=v,E=v=0,I=null,R=m.next();T!==null&&!R.done;E++,R=m.next()){T.index>E?(I=T,T=null):I=T.sibling;var q=d(g,T,R.value,x);if(q===null){T===null&&(T=I);break}r&&T&&q.alternate===null&&e(g,T),v=s(q,v,E),S===null?w=q:S.sibling=q,S=q,T=I}if(R.done)return t(g,T),ve&&fi(g,E),w;if(T===null){for(;!R.done;E++,R=m.next())R=c(g,R.value,x),R!==null&&(v=s(R,v,E),S===null?w=R:S.sibling=R,S=R);return ve&&fi(g,E),w}for(T=i(g,T);!R.done;E++,R=m.next())R=f(T,g,E,R.value,x),R!==null&&(r&&R.alternate!==null&&T.delete(R.key===null?E:R.key),v=s(R,v,E),S===null?w=R:S.sibling=R,S=R);return r&&T.forEach(function(F){return e(g,F)}),ve&&fi(g,E),w}function _(g,v,m,x){if(typeof m=="object"&&m!==null&&m.type===an&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case So:e:{for(var w=m.key,S=v;S!==null;){if(S.key===w){if(w=m.type,w===an){if(S.tag===7){t(g,S.sibling),v=n(S,m.props.children),v.return=g,g=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Br&&ep(w)===S.type){t(g,S.sibling),v=n(S,m.props),v.ref=is(g,S,m),v.return=g,g=v;break e}t(g,S);break}else e(g,S);S=S.sibling}m.type===an?(v=Ii(m.props.children,g.mode,x,m.key),v.return=g,g=v):(x=Ea(m.type,m.key,m.props,null,g.mode,x),x.ref=is(g,v,m),x.return=g,g=x)}return o(g);case on:e:{for(S=m.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===m.containerInfo&&v.stateNode.implementation===m.implementation){t(g,v.sibling),v=n(v,m.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=Au(m,g.mode,x),v.return=g,g=v}return o(g);case Br:return S=m._init,_(g,v,S(m._payload),x)}if(ps(m))return p(g,v,m,x);if(Qn(m))return y(g,v,m,x);Fo(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,v!==null&&v.tag===6?(t(g,v.sibling),v=n(v,m),v.return=g,g=v):(t(g,v),v=Su(m,g.mode,x),v.return=g,g=v),o(g)):t(g,v)}return _}var Ln=My(!0),ky=My(!1),Wa=ai(null),Ya=null,mn=null,Rd=null;function Md(){Rd=mn=Ya=null}function kd(r){var e=Wa.current;ge(Wa),r._currentValue=e}function Yh(r,e,t){for(;r!==null;){var i=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),r===t)break;r=r.return}}function An(r,e){Ya=r,Rd=mn=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(at=!0),r.firstContext=null)}function bt(r){var e=r._currentValue;if(Rd!==r)if(r={context:r,memoizedValue:e,next:null},mn===null){if(Ya===null)throw Error(D(308));mn=r,Ya.dependencies={lanes:0,firstContext:r}}else mn=mn.next=r;return e}var Ai=null;function Dd(r){Ai===null?Ai=[r]:Ai.push(r)}function Dy(r,e,t,i){var n=e.interleaved;return n===null?(t.next=t,Dd(e)):(t.next=n.next,n.next=t),e.interleaved=t,br(r,i)}function br(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Or=!1;function Nd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ny(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Tr(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(r,e,t){var i=r.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var n=i.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),i.pending=e,br(r,t)}return n=i.interleaved,n===null?(e.next=e,Dd(i)):(e.next=n.next,n.next=e),i.interleaved=e,br(r,t)}function ga(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=r.pendingLanes,t|=i,e.lanes=t,_d(r,t)}}function tp(r,e){var t=r.updateQueue,i=r.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var n=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?n=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?n=s=e:s=s.next=e}else n=s=e;t={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function Ka(r,e,t,i){var n=r.updateQueue;Or=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=r.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=n.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=r,y=a;switch(d=e,f=t,y.tag){case 1:if(p=y.payload,typeof p=="function"){c=p.call(f,c,d);break e}c=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,c,d):p,d==null)break e;c=Se({},c,d);break e;case 2:Or=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,d=n.effects,d===null?n.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;d=a,a=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);if(h===null&&(l=c),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);Fi|=o,r.lanes=o,r.memoizedState=c}}function rp(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var i=r[e],n=i.callback;if(n!==null){if(i.callback=null,i=t,typeof n!="function")throw Error(D(191,n));n.call(i)}}}var po={},ar=ai(po),qs=ai(po),Zs=ai(po);function Ci(r){if(r===po)throw Error(D(174));return r}function Fd(r,e){switch(de(Zs,e),de(qs,r),de(ar,po),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ih(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=Ih(e,r)}ge(ar),de(ar,e)}function Un(){ge(ar),ge(qs),ge(Zs)}function Fy(r){Ci(Zs.current);var e=Ci(ar.current),t=Ih(e,r.type);e!==t&&(de(qs,r),de(ar,t))}function Bd(r){qs.current===r&&(ge(ar),ge(qs))}var we=ai(0);function qa(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vu=[];function Od(){for(var r=0;r<vu.length;r++)vu[r]._workInProgressVersionPrimary=null;vu.length=0}var ya=Mr.ReactCurrentDispatcher,_u=Mr.ReactCurrentBatchConfig,Ni=0,Te=null,Oe=null,Ge=null,Za=!1,Rs=!1,Qs=0,S1=0;function Ke(){throw Error(D(321))}function Ld(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!$t(r[t],e[t]))return!1;return!0}function Ud(r,e,t,i,n,s){if(Ni=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ya.current=r===null||r.memoizedState===null?I1:P1,r=t(i,n),Rs){s=0;do{if(Rs=!1,Qs=0,25<=s)throw Error(D(301));s+=1,Ge=Oe=null,e.updateQueue=null,ya.current=R1,r=t(i,n)}while(Rs)}if(ya.current=Qa,e=Oe!==null&&Oe.next!==null,Ni=0,Ge=Oe=Te=null,Za=!1,e)throw Error(D(300));return r}function Gd(){var r=Qs!==0;return Qs=0,r}function er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Te.memoizedState=Ge=r:Ge=Ge.next=r,Ge}function It(){if(Oe===null){var r=Te.alternate;r=r!==null?r.memoizedState:null}else r=Oe.next;var e=Ge===null?Te.memoizedState:Ge.next;if(e!==null)Ge=e,Oe=r;else{if(r===null)throw Error(D(310));Oe=r,r={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ge===null?Te.memoizedState=Ge=r:Ge=Ge.next=r}return Ge}function Js(r,e){return typeof e=="function"?e(r):e}function xu(r){var e=It(),t=e.queue;if(t===null)throw Error(D(311));t.lastRenderedReducer=r;var i=Oe,n=i.baseQueue,s=t.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,t.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Ni&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:r(i,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=i):l=l.next=c,Te.lanes|=h,Fi|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,$t(i,e.memoizedState)||(at=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(r=t.interleaved,r!==null){n=r;do s=n.lane,Te.lanes|=s,Fi|=s,n=n.next;while(n!==r)}else n===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function wu(r){var e=It(),t=e.queue;if(t===null)throw Error(D(311));t.lastRenderedReducer=r;var i=t.dispatch,n=t.pending,s=e.memoizedState;if(n!==null){t.pending=null;var o=n=n.next;do s=r(s,o.action),o=o.next;while(o!==n);$t(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function By(){}function Oy(r,e){var t=Te,i=It(),n=e(),s=!$t(i.memoizedState,n);if(s&&(i.memoizedState=n,at=!0),i=i.queue,Hd(Gy.bind(null,t,i,r),[r]),i.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(t.flags|=2048,eo(9,Uy.bind(null,t,i,n,e),void 0,null),ze===null)throw Error(D(349));Ni&30||Ly(t,e,n)}return n}function Ly(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function Uy(r,e,t,i){e.value=t,e.getSnapshot=i,Hy(e)&&zy(r)}function Gy(r,e,t){return t(function(){Hy(e)&&zy(r)})}function Hy(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!$t(r,t)}catch{return!0}}function zy(r){var e=br(r,1);e!==null&&Gt(e,r,1,-1)}function ip(r){var e=er();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:r},e.queue=r,r=r.dispatch=b1.bind(null,Te,r),[e.memoizedState,r]}function eo(r,e,t,i){return r={tag:r,create:e,destroy:t,deps:i,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(i=t.next,t.next=r,r.next=i,e.lastEffect=r)),r}function $y(){return It().memoizedState}function va(r,e,t,i){var n=er();Te.flags|=r,n.memoizedState=eo(1|e,t,void 0,i===void 0?null:i)}function Ml(r,e,t,i){var n=It();i=i===void 0?null:i;var s=void 0;if(Oe!==null){var o=Oe.memoizedState;if(s=o.destroy,i!==null&&Ld(i,o.deps)){n.memoizedState=eo(e,t,s,i);return}}Te.flags|=r,n.memoizedState=eo(1|e,t,s,i)}function np(r,e){return va(8390656,8,r,e)}function Hd(r,e){return Ml(2048,8,r,e)}function jy(r,e){return Ml(4,2,r,e)}function Vy(r,e){return Ml(4,4,r,e)}function Xy(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function Wy(r,e,t){return t=t!=null?t.concat([r]):null,Ml(4,4,Xy.bind(null,e,r),t)}function zd(){}function Yy(r,e){var t=It();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Ld(e,i[1])?i[0]:(t.memoizedState=[r,e],r)}function Ky(r,e){var t=It();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Ld(e,i[1])?i[0]:(r=r(),t.memoizedState=[r,e],r)}function qy(r,e,t){return Ni&21?($t(t,e)||(t=ty(),Te.lanes|=t,Fi|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,at=!0),r.memoizedState=t)}function A1(r,e){var t=he;he=t!==0&&4>t?t:4,r(!0);var i=_u.transition;_u.transition={};try{r(!1),e()}finally{he=t,_u.transition=i}}function Zy(){return It().memoizedState}function C1(r,e,t){var i=Jr(r);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Qy(r))Jy(e,t);else if(t=Dy(r,e,t,i),t!==null){var n=it();Gt(t,r,i,n),ev(t,e,i)}}function b1(r,e,t){var i=Jr(r),n={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Qy(r))Jy(e,n);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(n.hasEagerState=!0,n.eagerState=a,$t(a,o)){var l=e.interleaved;l===null?(n.next=n,Dd(e)):(n.next=l.next,l.next=n),e.interleaved=n;return}}catch{}finally{}t=Dy(r,e,n,i),t!==null&&(n=it(),Gt(t,r,i,n),ev(t,e,i))}}function Qy(r){var e=r.alternate;return r===Te||e!==null&&e===Te}function Jy(r,e){Rs=Za=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function ev(r,e,t){if(t&4194240){var i=e.lanes;i&=r.pendingLanes,t|=i,e.lanes=t,_d(r,t)}}var Qa={readContext:bt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},I1={readContext:bt,useCallback:function(r,e){return er().memoizedState=[r,e===void 0?null:e],r},useContext:bt,useEffect:np,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,va(4194308,4,Xy.bind(null,e,r),t)},useLayoutEffect:function(r,e){return va(4194308,4,r,e)},useInsertionEffect:function(r,e){return va(4,2,r,e)},useMemo:function(r,e){var t=er();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var i=er();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},i.queue=r,r=r.dispatch=C1.bind(null,Te,r),[i.memoizedState,r]},useRef:function(r){var e=er();return r={current:r},e.memoizedState=r},useState:ip,useDebugValue:zd,useDeferredValue:function(r){return er().memoizedState=r},useTransition:function(){var r=ip(!1),e=r[0];return r=A1.bind(null,r[1]),er().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var i=Te,n=er();if(ve){if(t===void 0)throw Error(D(407));t=t()}else{if(t=e(),ze===null)throw Error(D(349));Ni&30||Ly(i,e,t)}n.memoizedState=t;var s={value:t,getSnapshot:e};return n.queue=s,np(Gy.bind(null,i,s,r),[r]),i.flags|=2048,eo(9,Uy.bind(null,i,s,t,e),void 0,null),t},useId:function(){var r=er(),e=ze.identifierPrefix;if(ve){var t=vr,i=yr;t=(i&~(1<<32-Ut(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Qs++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=S1++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},P1={readContext:bt,useCallback:Yy,useContext:bt,useEffect:Hd,useImperativeHandle:Wy,useInsertionEffect:jy,useLayoutEffect:Vy,useMemo:Ky,useReducer:xu,useRef:$y,useState:function(){return xu(Js)},useDebugValue:zd,useDeferredValue:function(r){var e=It();return qy(e,Oe.memoizedState,r)},useTransition:function(){var r=xu(Js)[0],e=It().memoizedState;return[r,e]},useMutableSource:By,useSyncExternalStore:Oy,useId:Zy,unstable_isNewReconciler:!1},R1={readContext:bt,useCallback:Yy,useContext:bt,useEffect:Hd,useImperativeHandle:Wy,useInsertionEffect:jy,useLayoutEffect:Vy,useMemo:Ky,useReducer:wu,useRef:$y,useState:function(){return wu(Js)},useDebugValue:zd,useDeferredValue:function(r){var e=It();return Oe===null?e.memoizedState=r:qy(e,Oe.memoizedState,r)},useTransition:function(){var r=wu(Js)[0],e=It().memoizedState;return[r,e]},useMutableSource:By,useSyncExternalStore:Oy,useId:Zy,unstable_isNewReconciler:!1};function Ft(r,e){if(r&&r.defaultProps){e=Se({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function Kh(r,e,t,i){e=r.memoizedState,t=t(i,e),t=t==null?e:Se({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var kl={isMounted:function(r){return(r=r._reactInternals)?zi(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var i=it(),n=Jr(r),s=Tr(i,n);s.payload=e,t!=null&&(s.callback=t),e=Zr(r,s,n),e!==null&&(Gt(e,r,n,i),ga(e,r,n))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var i=it(),n=Jr(r),s=Tr(i,n);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Zr(r,s,n),e!==null&&(Gt(e,r,n,i),ga(e,r,n))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=it(),i=Jr(r),n=Tr(t,i);n.tag=2,e!=null&&(n.callback=e),e=Zr(r,n,i),e!==null&&(Gt(e,r,i,t),ga(e,r,i))}};function sp(r,e,t,i,n,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xs(t,i)||!Xs(n,s):!0}function tv(r,e,t){var i=!1,n=ii,s=e.contextType;return typeof s=="object"&&s!==null?s=bt(s):(n=ht(e)?ki:Je.current,i=e.contextTypes,s=(i=i!=null)?Bn(r,n):ii),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kl,r.stateNode=e,e._reactInternals=r,i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=s),e}function op(r,e,t,i){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==r&&kl.enqueueReplaceState(e,e.state,null)}function qh(r,e,t,i){var n=r.stateNode;n.props=t,n.state=r.memoizedState,n.refs={},Nd(r);var s=e.contextType;typeof s=="object"&&s!==null?n.context=bt(s):(s=ht(e)?ki:Je.current,n.context=Bn(r,s)),n.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kh(r,e,s,t),n.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&kl.enqueueReplaceState(n,n.state,null),Ka(r,t,n,i),n.state=r.memoizedState),typeof n.componentDidMount=="function"&&(r.flags|=4194308)}function Gn(r,e){try{var t="",i=e;do t+=nx(i),i=i.return;while(i);var n=t}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:n,digest:null}}function Eu(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function Zh(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var M1=typeof WeakMap=="function"?WeakMap:Map;function rv(r,e,t){t=Tr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){el||(el=!0,ac=i),Zh(r,e)},t}function iv(r,e,t){t=Tr(-1,t),t.tag=3;var i=r.type.getDerivedStateFromError;if(typeof i=="function"){var n=e.value;t.payload=function(){return i(n)},t.callback=function(){Zh(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Zh(r,e),typeof i!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ap(r,e,t){var i=r.pingCache;if(i===null){i=r.pingCache=new M1;var n=new Set;i.set(e,n)}else n=i.get(e),n===void 0&&(n=new Set,i.set(e,n));n.has(t)||(n.add(t),r=V1.bind(null,r,e,t),e.then(r,r))}function lp(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function up(r,e,t,i,n){return r.mode&1?(r.flags|=65536,r.lanes=n,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Tr(-1,1),e.tag=2,Zr(t,e,1))),t.lanes|=1),r)}var k1=Mr.ReactCurrentOwner,at=!1;function tt(r,e,t,i){e.child=r===null?ky(e,null,t,i):Ln(e,r.child,t,i)}function hp(r,e,t,i,n){t=t.render;var s=e.ref;return An(e,n),i=Ud(r,e,t,i,s,n),t=Gd(),r!==null&&!at?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~n,Ir(r,e,n)):(ve&&t&&bd(e),e.flags|=1,tt(r,e,i,n),e.child)}function cp(r,e,t,i,n){if(r===null){var s=t.type;return typeof s=="function"&&!qd(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,nv(r,e,s,i,n)):(r=Ea(t.type,null,i,e,e.mode,n),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&n)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Xs,t(o,i)&&r.ref===e.ref)return Ir(r,e,n)}return e.flags|=1,r=ei(s,i),r.ref=e.ref,r.return=e,e.child=r}function nv(r,e,t,i,n){if(r!==null){var s=r.memoizedProps;if(Xs(s,i)&&r.ref===e.ref)if(at=!1,e.pendingProps=i=s,(r.lanes&n)!==0)r.flags&131072&&(at=!0);else return e.lanes=r.lanes,Ir(r,e,n)}return Qh(r,e,t,i,n)}function sv(r,e,t){var i=e.pendingProps,n=i.children,s=r!==null?r.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(yn,ft),ft|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,de(yn,ft),ft|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,de(yn,ft),ft|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,de(yn,ft),ft|=i;return tt(r,e,n,t),e.child}function ov(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Qh(r,e,t,i,n){var s=ht(t)?ki:Je.current;return s=Bn(e,s),An(e,n),t=Ud(r,e,t,i,s,n),i=Gd(),r!==null&&!at?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~n,Ir(r,e,n)):(ve&&i&&bd(e),e.flags|=1,tt(r,e,t,n),e.child)}function dp(r,e,t,i,n){if(ht(t)){var s=!0;ja(e)}else s=!1;if(An(e,n),e.stateNode===null)_a(r,e),tv(e,t,i),qh(e,t,i,n),i=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=bt(u):(u=ht(t)?ki:Je.current,u=Bn(e,u));var h=t.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&op(e,o,i,u),Or=!1;var d=e.memoizedState;o.state=d,Ka(e,i,o,n),l=e.memoizedState,a!==i||d!==l||ut.current||Or?(typeof h=="function"&&(Kh(e,t,h,i),l=e.memoizedState),(a=Or||sp(e,t,a,i,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ny(r,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ft(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=bt(l):(l=ht(t)?ki:Je.current,l=Bn(e,l));var f=t.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&op(e,o,i,l),Or=!1,d=e.memoizedState,o.state=d,Ka(e,i,o,n);var p=e.memoizedState;a!==c||d!==p||ut.current||Or?(typeof f=="function"&&(Kh(e,t,f,i),p=e.memoizedState),(u=Or||sp(e,t,u,i,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),i=!1)}return Jh(r,e,t,i,s,n)}function Jh(r,e,t,i,n,s){ov(r,e);var o=(e.flags&128)!==0;if(!i&&!o)return n&&Zf(e,t,!1),Ir(r,e,s);i=e.stateNode,k1.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,r!==null&&o?(e.child=Ln(e,r.child,null,s),e.child=Ln(e,null,a,s)):tt(r,e,a,s),e.memoizedState=i.state,n&&Zf(e,t,!0),e.child}function av(r){var e=r.stateNode;e.pendingContext?qf(r,e.pendingContext,e.pendingContext!==e.context):e.context&&qf(r,e.context,!1),Fd(r,e.containerInfo)}function fp(r,e,t,i,n){return On(),Pd(n),e.flags|=256,tt(r,e,t,i),e.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function tc(r){return{baseLanes:r,cachePool:null,transitions:null}}function lv(r,e,t){var i=e.pendingProps,n=we.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(n&2)!==0),a?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(n|=1),de(we,n&1),r===null)return Wh(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,r=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fl(o,i,0,null),r=Ii(r,i,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=tc(t),e.memoizedState=ec,r):$d(e,o));if(n=r.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return D1(r,e,o,i,a,n,t);if(s){s=i.fallback,o=e.mode,n=r.child,a=n.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==n?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ei(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=ei(a,s):(s=Ii(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=r.child.memoizedState,o=o===null?tc(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~t,e.memoizedState=ec,i}return s=r.child,r=s.sibling,i=ei(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=i,e.memoizedState=null,i}function $d(r,e){return e=Fl({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function Bo(r,e,t,i){return i!==null&&Pd(i),Ln(e,r.child,null,t),r=$d(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function D1(r,e,t,i,n,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Eu(Error(D(422))),Bo(r,e,o,i)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=i.fallback,n=e.mode,i=Fl({mode:"visible",children:i.children},n,0,null),s=Ii(s,n,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ln(e,r.child,null,o),e.child.memoizedState=tc(o),e.memoizedState=ec,s);if(!(e.mode&1))return Bo(r,e,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(D(419)),i=Eu(s,i,void 0),Bo(r,e,o,i)}if(a=(o&r.childLanes)!==0,at||a){if(i=ze,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,br(r,n),Gt(i,r,n,-1))}return Kd(),i=Eu(Error(D(421))),Bo(r,e,o,i)}return n.data==="$?"?(e.flags|=128,e.child=r.child,e=X1.bind(null,r),n._reactRetry=e,null):(r=s.treeContext,pt=qr(n.nextSibling),gt=e,ve=!0,Ot=null,r!==null&&(wt[Et++]=yr,wt[Et++]=vr,wt[Et++]=Di,yr=r.id,vr=r.overflow,Di=e),e=$d(e,i.children),e.flags|=4096,e)}function pp(r,e,t){r.lanes|=e;var i=r.alternate;i!==null&&(i.lanes|=e),Yh(r.return,e,t)}function Tu(r,e,t,i,n){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=n)}function uv(r,e,t){var i=e.pendingProps,n=i.revealOrder,s=i.tail;if(tt(r,e,i.children,t),i=we.current,i&2)i=i&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&pp(r,t,e);else if(r.tag===19)pp(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}i&=1}if(de(we,i),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(t=e.child,n=null;t!==null;)r=t.alternate,r!==null&&qa(r)===null&&(n=t),t=t.sibling;t=n,t===null?(n=e.child,e.child=null):(n=t.sibling,t.sibling=null),Tu(e,!1,n,t,s);break;case"backwards":for(t=null,n=e.child,e.child=null;n!==null;){if(r=n.alternate,r!==null&&qa(r)===null){e.child=n;break}r=n.sibling,n.sibling=t,t=n,n=r}Tu(e,!0,t,null,s);break;case"together":Tu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _a(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function Ir(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Fi|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(D(153));if(e.child!==null){for(r=e.child,t=ei(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=ei(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function N1(r,e,t){switch(e.tag){case 3:av(e),On();break;case 5:Fy(e);break;case 1:ht(e.type)&&ja(e);break;case 4:Fd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,n=e.memoizedProps.value;de(Wa,i._currentValue),i._currentValue=n;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(de(we,we.current&1),e.flags|=128,null):t&e.child.childLanes?lv(r,e,t):(de(we,we.current&1),r=Ir(r,e,t),r!==null?r.sibling:null);de(we,we.current&1);break;case 19:if(i=(t&e.childLanes)!==0,r.flags&128){if(i)return uv(r,e,t);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),de(we,we.current),i)break;return null;case 22:case 23:return e.lanes=0,sv(r,e,t)}return Ir(r,e,t)}var hv,rc,cv,dv;hv=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};rc=function(){};cv=function(r,e,t,i){var n=r.memoizedProps;if(n!==i){r=e.stateNode,Ci(ar.current);var s=null;switch(t){case"input":n=Sh(r,n),i=Sh(r,i),s=[];break;case"select":n=Se({},n,{value:void 0}),i=Se({},i,{value:void 0}),s=[];break;case"textarea":n=bh(r,n),i=bh(r,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(r.onclick=za)}Ph(t,i);var o;t=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var a=n[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Us.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Us.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pe("scroll",r),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};dv=function(r,e,t,i){t!==i&&(e.flags|=4)};function ns(r,e){if(!ve)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:i.sibling=null}}function qe(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,i=0;if(e)for(var n=r.child;n!==null;)t|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=r,n=n.sibling;else for(n=r.child;n!==null;)t|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=r,n=n.sibling;return r.subtreeFlags|=i,r.childLanes=t,e}function F1(r,e,t){var i=e.pendingProps;switch(Id(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return ht(e.type)&&$a(),qe(e),null;case 3:return i=e.stateNode,Un(),ge(ut),ge(Je),Od(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(r===null||r.child===null)&&(No(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ot!==null&&(hc(Ot),Ot=null))),rc(r,e),qe(e),null;case 5:Bd(e);var n=Ci(Zs.current);if(t=e.type,r!==null&&e.stateNode!=null)cv(r,e,t,i,n),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(D(166));return qe(e),null}if(r=Ci(ar.current),No(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[nr]=e,i[Ks]=s,r=(e.mode&1)!==0,t){case"dialog":pe("cancel",i),pe("close",i);break;case"iframe":case"object":case"embed":pe("load",i);break;case"video":case"audio":for(n=0;n<gs.length;n++)pe(gs[n],i);break;case"source":pe("error",i);break;case"img":case"image":case"link":pe("error",i),pe("load",i);break;case"details":pe("toggle",i);break;case"input":Tf(i,s),pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},pe("invalid",i);break;case"textarea":Af(i,s),pe("invalid",i)}Ph(t,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Do(i.textContent,a,r),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Do(i.textContent,a,r),n=["children",""+a]):Us.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",i)}switch(t){case"input":Ao(i),Sf(i,s,!0);break;case"textarea":Ao(i),Cf(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=za)}i=n,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Gg(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof i.is=="string"?r=o.createElement(t,{is:i.is}):(r=o.createElement(t),t==="select"&&(o=r,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):r=o.createElementNS(r,t),r[nr]=e,r[Ks]=i,hv(r,e,!1,!1),e.stateNode=r;e:{switch(o=Rh(t,i),t){case"dialog":pe("cancel",r),pe("close",r),n=i;break;case"iframe":case"object":case"embed":pe("load",r),n=i;break;case"video":case"audio":for(n=0;n<gs.length;n++)pe(gs[n],r);n=i;break;case"source":pe("error",r),n=i;break;case"img":case"image":case"link":pe("error",r),pe("load",r),n=i;break;case"details":pe("toggle",r),n=i;break;case"input":Tf(r,i),n=Sh(r,i),pe("invalid",r);break;case"option":n=i;break;case"select":r._wrapperState={wasMultiple:!!i.multiple},n=Se({},i,{value:void 0}),pe("invalid",r);break;case"textarea":Af(r,i),n=bh(r,i),pe("invalid",r);break;default:n=i}Ph(t,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$g(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Hg(r,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Gs(r,l):typeof l=="number"&&Gs(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Us.hasOwnProperty(s)?l!=null&&s==="onScroll"&&pe("scroll",r):l!=null&&fd(r,s,l,o))}switch(t){case"input":Ao(r),Sf(r,i,!1);break;case"textarea":Ao(r),Cf(r);break;case"option":i.value!=null&&r.setAttribute("value",""+ri(i.value));break;case"select":r.multiple=!!i.multiple,s=i.value,s!=null?wn(r,!!i.multiple,s,!1):i.defaultValue!=null&&wn(r,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(r.onclick=za)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(r&&e.stateNode!=null)dv(r,e,r.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(D(166));if(t=Ci(Zs.current),Ci(ar.current),No(e)){if(i=e.stateNode,t=e.memoizedProps,i[nr]=e,(s=i.nodeValue!==t)&&(r=gt,r!==null))switch(r.tag){case 3:Do(i.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Do(i.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[nr]=e,e.stateNode=i}return qe(e),null;case 13:if(ge(we),i=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ve&&pt!==null&&e.mode&1&&!(e.flags&128))Ry(),On(),e.flags|=98560,s=!1;else if(s=No(e),i!==null&&i.dehydrated!==null){if(r===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[nr]=e}else On(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),s=!1}else Ot!==null&&(hc(Ot),Ot=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(r!==null&&r.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(r===null||we.current&1?Le===0&&(Le=3):Kd())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return Un(),rc(r,e),r===null&&Ws(e.stateNode.containerInfo),qe(e),null;case 10:return kd(e.type._context),qe(e),null;case 17:return ht(e.type)&&$a(),qe(e),null;case 19:if(ge(we),s=e.memoizedState,s===null)return qe(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ns(s,!1);else{if(Le!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=qa(r),o!==null){for(e.flags|=128,ns(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,r=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return de(we,we.current&1|2),e.child}r=r.sibling}s.tail!==null&&Me()>Hn&&(e.flags|=128,i=!0,ns(s,!1),e.lanes=4194304)}else{if(!i)if(r=qa(o),r!==null){if(e.flags|=128,i=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ns(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ve)return qe(e),null}else 2*Me()-s.renderingStartTime>Hn&&t!==1073741824&&(e.flags|=128,i=!0,ns(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Me(),e.sibling=null,t=we.current,de(we,i?t&1|2:t&1),e):(qe(e),null);case 22:case 23:return Yd(),i=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ft&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function B1(r,e){switch(Id(e),e.tag){case 1:return ht(e.type)&&$a(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return Un(),ge(ut),ge(Je),Od(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return Bd(e),null;case 13:if(ge(we),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(D(340));On()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return ge(we),null;case 4:return Un(),null;case 10:return kd(e.type._context),null;case 22:case 23:return Yd(),null;case 24:return null;default:return null}}var Oo=!1,Ze=!1,O1=typeof WeakSet=="function"?WeakSet:Set,z=null;function gn(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Pe(r,e,i)}else t.current=null}function ic(r,e,t){try{t()}catch(i){Pe(r,e,i)}}var mp=!1;function L1(r,e){if(Gh=Ua,r=yy(),Cd(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=r,d=null;t:for(;;){for(var f;c!==t||n!==0&&c.nodeType!==3||(a=o+n),c!==s||i!==0&&c.nodeType!==3||(l=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===r)break t;if(d===t&&++u===n&&(a=o),d===s&&++h===i&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Hh={focusedElem:r,selectionRange:t},Ua=!1,z=e;z!==null;)if(e=z,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,z=r;else for(;z!==null;){e=z;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,_=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ft(e.type,y),_);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(x){Pe(e,e.return,x)}if(r=e.sibling,r!==null){r.return=e.return,z=r;break}z=e.return}return p=mp,mp=!1,p}function Ms(r,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&r)===r){var s=n.destroy;n.destroy=void 0,s!==void 0&&ic(e,t,s)}n=n.next}while(n!==i)}}function Dl(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function nc(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function fv(r){var e=r.alternate;e!==null&&(r.alternate=null,fv(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[nr],delete e[Ks],delete e[jh],delete e[x1],delete e[w1])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function pv(r){return r.tag===5||r.tag===3||r.tag===4}function gp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||pv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sc(r,e,t){var i=r.tag;if(i===5||i===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=za));else if(i!==4&&(r=r.child,r!==null))for(sc(r,e,t),r=r.sibling;r!==null;)sc(r,e,t),r=r.sibling}function oc(r,e,t){var i=r.tag;if(i===5||i===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(i!==4&&(r=r.child,r!==null))for(oc(r,e,t),r=r.sibling;r!==null;)oc(r,e,t),r=r.sibling}var Ve=null,Bt=!1;function kr(r,e,t){for(t=t.child;t!==null;)mv(r,e,t),t=t.sibling}function mv(r,e,t){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Al,t)}catch{}switch(t.tag){case 5:Ze||gn(t,e);case 6:var i=Ve,n=Bt;Ve=null,kr(r,e,t),Ve=i,Bt=n,Ve!==null&&(Bt?(r=Ve,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Ve.removeChild(t.stateNode));break;case 18:Ve!==null&&(Bt?(r=Ve,t=t.stateNode,r.nodeType===8?gu(r.parentNode,t):r.nodeType===1&&gu(r,t),js(r)):gu(Ve,t.stateNode));break;case 4:i=Ve,n=Bt,Ve=t.stateNode.containerInfo,Bt=!0,kr(r,e,t),Ve=i,Bt=n;break;case 0:case 11:case 14:case 15:if(!Ze&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ic(t,e,o),n=n.next}while(n!==i)}kr(r,e,t);break;case 1:if(!Ze&&(gn(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Pe(t,e,a)}kr(r,e,t);break;case 21:kr(r,e,t);break;case 22:t.mode&1?(Ze=(i=Ze)||t.memoizedState!==null,kr(r,e,t),Ze=i):kr(r,e,t);break;default:kr(r,e,t)}}function yp(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new O1),e.forEach(function(i){var n=W1.bind(null,r,i);t.has(i)||(t.add(i),i.then(n,n))})}}function Pt(r,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];try{var s=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ve=a.stateNode,Bt=!1;break e;case 3:Ve=a.stateNode.containerInfo,Bt=!0;break e;case 4:Ve=a.stateNode.containerInfo,Bt=!0;break e}a=a.return}if(Ve===null)throw Error(D(160));mv(s,o,n),Ve=null,Bt=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){Pe(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gv(e,r),e=e.sibling}function gv(r,e){var t=r.alternate,i=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Pt(e,r),Wt(r),i&4){try{Ms(3,r,r.return),Dl(3,r)}catch(y){Pe(r,r.return,y)}try{Ms(5,r,r.return)}catch(y){Pe(r,r.return,y)}}break;case 1:Pt(e,r),Wt(r),i&512&&t!==null&&gn(t,t.return);break;case 5:if(Pt(e,r),Wt(r),i&512&&t!==null&&gn(t,t.return),r.flags&32){var n=r.stateNode;try{Gs(n,"")}catch(y){Pe(r,r.return,y)}}if(i&4&&(n=r.stateNode,n!=null)){var s=r.memoizedProps,o=t!==null?t.memoizedProps:s,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Lg(n,s),Rh(a,o);var u=Rh(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?$g(n,c):h==="dangerouslySetInnerHTML"?Hg(n,c):h==="children"?Gs(n,c):fd(n,h,c,u)}switch(a){case"input":Ah(n,s);break;case"textarea":Ug(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?wn(n,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?wn(n,!!s.multiple,s.defaultValue,!0):wn(n,!!s.multiple,s.multiple?[]:"",!1))}n[Ks]=s}catch(y){Pe(r,r.return,y)}}break;case 6:if(Pt(e,r),Wt(r),i&4){if(r.stateNode===null)throw Error(D(162));n=r.stateNode,s=r.memoizedProps;try{n.nodeValue=s}catch(y){Pe(r,r.return,y)}}break;case 3:if(Pt(e,r),Wt(r),i&4&&t!==null&&t.memoizedState.isDehydrated)try{js(e.containerInfo)}catch(y){Pe(r,r.return,y)}break;case 4:Pt(e,r),Wt(r);break;case 13:Pt(e,r),Wt(r),n=r.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(Xd=Me())),i&4&&yp(r);break;case 22:if(h=t!==null&&t.memoizedState!==null,r.mode&1?(Ze=(u=Ze)||h,Pt(e,r),Ze=u):Pt(e,r),Wt(r),i&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!h&&r.mode&1)for(z=r,h=r.child;h!==null;){for(c=z=h;z!==null;){switch(d=z,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ms(4,d,d.return);break;case 1:gn(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Pe(i,t,y)}}break;case 5:gn(d,d.return);break;case 22:if(d.memoizedState!==null){_p(c);continue}}f!==null?(f.return=d,z=f):_p(c)}h=h.sibling}e:for(h=null,c=r;;){if(c.tag===5){if(h===null){h=c;try{n=c.stateNode,u?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zg("display",o))}catch(y){Pe(r,r.return,y)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(y){Pe(r,r.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===r)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Pt(e,r),Wt(r),i&4&&yp(r);break;case 21:break;default:Pt(e,r),Wt(r)}}function Wt(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(pv(t)){var i=t;break e}t=t.return}throw Error(D(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Gs(n,""),i.flags&=-33);var s=gp(r);oc(r,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=gp(r);sc(r,a,o);break;default:throw Error(D(161))}}catch(l){Pe(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function U1(r,e,t){z=r,yv(r)}function yv(r,e,t){for(var i=(r.mode&1)!==0;z!==null;){var n=z,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||Oo;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Ze;a=Oo;var u=Ze;if(Oo=o,(Ze=l)&&!u)for(z=n;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?xp(n):l!==null?(l.return=o,z=l):xp(n);for(;s!==null;)z=s,yv(s),s=s.sibling;z=n,Oo=a,Ze=u}vp(r)}else n.subtreeFlags&8772&&s!==null?(s.return=n,z=s):vp(r)}}function vp(r){for(;z!==null;){var e=z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||Dl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ze)if(t===null)i.componentDidMount();else{var n=e.elementType===e.type?t.memoizedProps:Ft(e.type,t.memoizedProps);i.componentDidUpdate(n,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rp(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rp(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&js(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ze||e.flags&512&&nc(e)}catch(d){Pe(e,e.return,d)}}if(e===r){z=null;break}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}}function _p(r){for(;z!==null;){var e=z;if(e===r){z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,z=t;break}z=e.return}}function xp(r){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Dl(4,e)}catch(l){Pe(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var n=e.return;try{i.componentDidMount()}catch(l){Pe(e,n,l)}}var s=e.return;try{nc(e)}catch(l){Pe(e,s,l)}break;case 5:var o=e.return;try{nc(e)}catch(l){Pe(e,o,l)}}}catch(l){Pe(e,e.return,l)}if(e===r){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var G1=Math.ceil,Ja=Mr.ReactCurrentDispatcher,jd=Mr.ReactCurrentOwner,Ct=Mr.ReactCurrentBatchConfig,le=0,ze=null,De=null,We=0,ft=0,yn=ai(0),Le=0,to=null,Fi=0,Nl=0,Vd=0,ks=null,ot=null,Xd=0,Hn=1/0,pr=null,el=!1,ac=null,Qr=null,Lo=!1,$r=null,tl=0,Ds=0,lc=null,xa=-1,wa=0;function it(){return le&6?Me():xa!==-1?xa:xa=Me()}function Jr(r){return r.mode&1?le&2&&We!==0?We&-We:T1.transition!==null?(wa===0&&(wa=ty()),wa):(r=he,r!==0||(r=window.event,r=r===void 0?16:ly(r.type)),r):1}function Gt(r,e,t,i){if(50<Ds)throw Ds=0,lc=null,Error(D(185));ho(r,t,i),(!(le&2)||r!==ze)&&(r===ze&&(!(le&2)&&(Nl|=t),Le===4&&Gr(r,We)),ct(r,i),t===1&&le===0&&!(e.mode&1)&&(Hn=Me()+500,Rl&&li()))}function ct(r,e){var t=r.callbackNode;Tx(r,e);var i=La(r,r===ze?We:0);if(i===0)t!==null&&Pf(t),r.callbackNode=null,r.callbackPriority=0;else if(e=i&-i,r.callbackPriority!==e){if(t!=null&&Pf(t),e===1)r.tag===0?E1(wp.bind(null,r)):by(wp.bind(null,r)),v1(function(){!(le&6)&&li()}),t=null;else{switch(ry(i)){case 1:t=vd;break;case 4:t=Jg;break;case 16:t=Oa;break;case 536870912:t=ey;break;default:t=Oa}t=Av(t,vv.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function vv(r,e){if(xa=-1,wa=0,le&6)throw Error(D(327));var t=r.callbackNode;if(Cn()&&r.callbackNode!==t)return null;var i=La(r,r===ze?We:0);if(i===0)return null;if(i&30||i&r.expiredLanes||e)e=rl(r,i);else{e=i;var n=le;le|=2;var s=xv();(ze!==r||We!==e)&&(pr=null,Hn=Me()+500,bi(r,e));do try{$1();break}catch(a){_v(r,a)}while(!0);Md(),Ja.current=s,le=n,De!==null?e=0:(ze=null,We=0,e=Le)}if(e!==0){if(e===2&&(n=Fh(r),n!==0&&(i=n,e=uc(r,n))),e===1)throw t=to,bi(r,0),Gr(r,i),ct(r,Me()),t;if(e===6)Gr(r,i);else{if(n=r.current.alternate,!(i&30)&&!H1(n)&&(e=rl(r,i),e===2&&(s=Fh(r),s!==0&&(i=s,e=uc(r,s))),e===1))throw t=to,bi(r,0),Gr(r,i),ct(r,Me()),t;switch(r.finishedWork=n,r.finishedLanes=i,e){case 0:case 1:throw Error(D(345));case 2:pi(r,ot,pr);break;case 3:if(Gr(r,i),(i&130023424)===i&&(e=Xd+500-Me(),10<e)){if(La(r,0)!==0)break;if(n=r.suspendedLanes,(n&i)!==i){it(),r.pingedLanes|=r.suspendedLanes&n;break}r.timeoutHandle=$h(pi.bind(null,r,ot,pr),e);break}pi(r,ot,pr);break;case 4:if(Gr(r,i),(i&4194240)===i)break;for(e=r.eventTimes,n=-1;0<i;){var o=31-Ut(i);s=1<<o,o=e[o],o>n&&(n=o),i&=~s}if(i=n,i=Me()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*G1(i/1960))-i,10<i){r.timeoutHandle=$h(pi.bind(null,r,ot,pr),i);break}pi(r,ot,pr);break;case 5:pi(r,ot,pr);break;default:throw Error(D(329))}}}return ct(r,Me()),r.callbackNode===t?vv.bind(null,r):null}function uc(r,e){var t=ks;return r.current.memoizedState.isDehydrated&&(bi(r,e).flags|=256),r=rl(r,e),r!==2&&(e=ot,ot=t,e!==null&&hc(e)),r}function hc(r){ot===null?ot=r:ot.push.apply(ot,r)}function H1(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var n=t[i],s=n.getSnapshot;n=n.value;try{if(!$t(s(),n))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(r,e){for(e&=~Vd,e&=~Nl,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Ut(e),i=1<<t;r[t]=-1,e&=~i}}function wp(r){if(le&6)throw Error(D(327));Cn();var e=La(r,0);if(!(e&1))return ct(r,Me()),null;var t=rl(r,e);if(r.tag!==0&&t===2){var i=Fh(r);i!==0&&(e=i,t=uc(r,i))}if(t===1)throw t=to,bi(r,0),Gr(r,e),ct(r,Me()),t;if(t===6)throw Error(D(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,pi(r,ot,pr),ct(r,Me()),null}function Wd(r,e){var t=le;le|=1;try{return r(e)}finally{le=t,le===0&&(Hn=Me()+500,Rl&&li())}}function Bi(r){$r!==null&&$r.tag===0&&!(le&6)&&Cn();var e=le;le|=1;var t=Ct.transition,i=he;try{if(Ct.transition=null,he=1,r)return r()}finally{he=i,Ct.transition=t,le=e,!(le&6)&&li()}}function Yd(){ft=yn.current,ge(yn)}function bi(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,y1(t)),De!==null)for(t=De.return;t!==null;){var i=t;switch(Id(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$a();break;case 3:Un(),ge(ut),ge(Je),Od();break;case 5:Bd(i);break;case 4:Un();break;case 13:ge(we);break;case 19:ge(we);break;case 10:kd(i.type._context);break;case 22:case 23:Yd()}t=t.return}if(ze=r,De=r=ei(r.current,null),We=ft=e,Le=0,to=null,Vd=Nl=Fi=0,ot=ks=null,Ai!==null){for(e=0;e<Ai.length;e++)if(t=Ai[e],i=t.interleaved,i!==null){t.interleaved=null;var n=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}t.pending=i}Ai=null}return r}function _v(r,e){do{var t=De;try{if(Md(),ya.current=Qa,Za){for(var i=Te.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Za=!1}if(Ni=0,Ge=Oe=Te=null,Rs=!1,Qs=0,jd.current=null,t===null||t.return===null){Le=1,to=e,De=null;break}e:{var s=r,o=t.return,a=t,l=e;if(e=We,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=lp(o);if(f!==null){f.flags&=-257,up(f,o,a,s,e),f.mode&1&&ap(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){ap(s,u,e),Kd();break e}l=Error(D(426))}}else if(ve&&a.mode&1){var _=lp(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),up(_,o,a,s,e),Pd(Gn(l,a));break e}}s=l=Gn(l,a),Le!==4&&(Le=2),ks===null?ks=[s]:ks.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=rv(s,l,e);tp(s,g);break e;case 1:a=l;var v=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Qr===null||!Qr.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=iv(s,a,e);tp(s,x);break e}}s=s.return}while(s!==null)}Ev(t)}catch(w){e=w,De===t&&t!==null&&(De=t=t.return);continue}break}while(!0)}function xv(){var r=Ja.current;return Ja.current=Qa,r===null?Qa:r}function Kd(){(Le===0||Le===3||Le===2)&&(Le=4),ze===null||!(Fi&268435455)&&!(Nl&268435455)||Gr(ze,We)}function rl(r,e){var t=le;le|=2;var i=xv();(ze!==r||We!==e)&&(pr=null,bi(r,e));do try{z1();break}catch(n){_v(r,n)}while(!0);if(Md(),le=t,Ja.current=i,De!==null)throw Error(D(261));return ze=null,We=0,Le}function z1(){for(;De!==null;)wv(De)}function $1(){for(;De!==null&&!px();)wv(De)}function wv(r){var e=Sv(r.alternate,r,ft);r.memoizedProps=r.pendingProps,e===null?Ev(r):De=e,jd.current=null}function Ev(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=B1(t,e),t!==null){t.flags&=32767,De=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Le=6,De=null;return}}else if(t=F1(t,e,ft),t!==null){De=t;return}if(e=e.sibling,e!==null){De=e;return}De=e=r}while(e!==null);Le===0&&(Le=5)}function pi(r,e,t){var i=he,n=Ct.transition;try{Ct.transition=null,he=1,j1(r,e,t,i)}finally{Ct.transition=n,he=i}return null}function j1(r,e,t,i){do Cn();while($r!==null);if(le&6)throw Error(D(327));t=r.finishedWork;var n=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(D(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(Sx(r,s),r===ze&&(De=ze=null,We=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Lo||(Lo=!0,Av(Oa,function(){return Cn(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var o=he;he=1;var a=le;le|=4,jd.current=null,L1(r,t),gv(t,r),h1(Hh),Ua=!!Gh,Hh=Gh=null,r.current=t,U1(t),mx(),le=a,he=o,Ct.transition=s}else r.current=t;if(Lo&&(Lo=!1,$r=r,tl=n),s=r.pendingLanes,s===0&&(Qr=null),vx(t.stateNode),ct(r,Me()),e!==null)for(i=r.onRecoverableError,t=0;t<e.length;t++)n=e[t],i(n.value,{componentStack:n.stack,digest:n.digest});if(el)throw el=!1,r=ac,ac=null,r;return tl&1&&r.tag!==0&&Cn(),s=r.pendingLanes,s&1?r===lc?Ds++:(Ds=0,lc=r):Ds=0,li(),null}function Cn(){if($r!==null){var r=ry(tl),e=Ct.transition,t=he;try{if(Ct.transition=null,he=16>r?16:r,$r===null)var i=!1;else{if(r=$r,$r=null,tl=0,le&6)throw Error(D(331));var n=le;for(le|=4,z=r.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(z=u;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:Ms(8,h,s)}var c=h.child;if(c!==null)c.return=h,z=c;else for(;z!==null;){h=z;var d=h.sibling,f=h.return;if(fv(h),h===u){z=null;break}if(d!==null){d.return=f,z=d;break}z=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ms(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,z=g;break e}z=s.return}}var v=r.current;for(z=v;z!==null;){o=z;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,z=m;else e:for(o=v;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dl(9,a)}}catch(w){Pe(a,a.return,w)}if(a===o){z=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,z=x;break e}z=a.return}}if(le=n,li(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Al,r)}catch{}i=!0}return i}finally{he=t,Ct.transition=e}}return!1}function Ep(r,e,t){e=Gn(t,e),e=rv(r,e,1),r=Zr(r,e,1),e=it(),r!==null&&(ho(r,1,e),ct(r,e))}function Pe(r,e,t){if(r.tag===3)Ep(r,r,t);else for(;e!==null;){if(e.tag===3){Ep(e,r,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qr===null||!Qr.has(i))){r=Gn(t,r),r=iv(e,r,1),e=Zr(e,r,1),r=it(),e!==null&&(ho(e,1,r),ct(e,r));break}}e=e.return}}function V1(r,e,t){var i=r.pingCache;i!==null&&i.delete(e),e=it(),r.pingedLanes|=r.suspendedLanes&t,ze===r&&(We&t)===t&&(Le===4||Le===3&&(We&130023424)===We&&500>Me()-Xd?bi(r,0):Vd|=t),ct(r,e)}function Tv(r,e){e===0&&(r.mode&1?(e=Io,Io<<=1,!(Io&130023424)&&(Io=4194304)):e=1);var t=it();r=br(r,e),r!==null&&(ho(r,e,t),ct(r,t))}function X1(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Tv(r,t)}function W1(r,e){var t=0;switch(r.tag){case 13:var i=r.stateNode,n=r.memoizedState;n!==null&&(t=n.retryLane);break;case 19:i=r.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(e),Tv(r,t)}var Sv;Sv=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||ut.current)at=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return at=!1,N1(r,e,t);at=!!(r.flags&131072)}else at=!1,ve&&e.flags&1048576&&Iy(e,Xa,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_a(r,e),r=e.pendingProps;var n=Bn(e,Je.current);An(e,t),n=Ud(null,e,i,r,n,t);var s=Gd();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(i)?(s=!0,ja(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Nd(e),n.updater=kl,e.stateNode=n,n._reactInternals=e,qh(e,i,r,t),e=Jh(null,e,i,!0,s,t)):(e.tag=0,ve&&s&&bd(e),tt(null,e,n,t),e=e.child),e;case 16:i=e.elementType;e:{switch(_a(r,e),r=e.pendingProps,n=i._init,i=n(i._payload),e.type=i,n=e.tag=K1(i),r=Ft(i,r),n){case 0:e=Qh(null,e,i,r,t);break e;case 1:e=dp(null,e,i,r,t);break e;case 11:e=hp(null,e,i,r,t);break e;case 14:e=cp(null,e,i,Ft(i.type,r),t);break e}throw Error(D(306,i,""))}return e;case 0:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:Ft(i,n),Qh(r,e,i,n,t);case 1:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:Ft(i,n),dp(r,e,i,n,t);case 3:e:{if(av(e),r===null)throw Error(D(387));i=e.pendingProps,s=e.memoizedState,n=s.element,Ny(r,e),Ka(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=Gn(Error(D(423)),e),e=fp(r,e,i,t,n);break e}else if(i!==n){n=Gn(Error(D(424)),e),e=fp(r,e,i,t,n);break e}else for(pt=qr(e.stateNode.containerInfo.firstChild),gt=e,ve=!0,Ot=null,t=ky(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(On(),i===n){e=Ir(r,e,t);break e}tt(r,e,i,t)}e=e.child}return e;case 5:return Fy(e),r===null&&Wh(e),i=e.type,n=e.pendingProps,s=r!==null?r.memoizedProps:null,o=n.children,zh(i,n)?o=null:s!==null&&zh(i,s)&&(e.flags|=32),ov(r,e),tt(r,e,o,t),e.child;case 6:return r===null&&Wh(e),null;case 13:return lv(r,e,t);case 4:return Fd(e,e.stateNode.containerInfo),i=e.pendingProps,r===null?e.child=Ln(e,null,i,t):tt(r,e,i,t),e.child;case 11:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:Ft(i,n),hp(r,e,i,n,t);case 7:return tt(r,e,e.pendingProps,t),e.child;case 8:return tt(r,e,e.pendingProps.children,t),e.child;case 12:return tt(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,n=e.pendingProps,s=e.memoizedProps,o=n.value,de(Wa,i._currentValue),i._currentValue=o,s!==null)if($t(s.value,o)){if(s.children===n.children&&!ut.current){e=Ir(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Tr(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Yh(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Yh(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tt(r,e,n.children,t),e=e.child}return e;case 9:return n=e.type,i=e.pendingProps.children,An(e,t),n=bt(n),i=i(n),e.flags|=1,tt(r,e,i,t),e.child;case 14:return i=e.type,n=Ft(i,e.pendingProps),n=Ft(i.type,n),cp(r,e,i,n,t);case 15:return nv(r,e,e.type,e.pendingProps,t);case 17:return i=e.type,n=e.pendingProps,n=e.elementType===i?n:Ft(i,n),_a(r,e),e.tag=1,ht(i)?(r=!0,ja(e)):r=!1,An(e,t),tv(e,i,n),qh(e,i,n,t),Jh(null,e,i,!0,r,t);case 19:return uv(r,e,t);case 22:return sv(r,e,t)}throw Error(D(156,e.tag))};function Av(r,e){return Qg(r,e)}function Y1(r,e,t,i){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(r,e,t,i){return new Y1(r,e,t,i)}function qd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function K1(r){if(typeof r=="function")return qd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===md)return 11;if(r===gd)return 14}return 2}function ei(r,e){var t=r.alternate;return t===null?(t=Tt(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Ea(r,e,t,i,n,s){var o=2;if(i=r,typeof r=="function")qd(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case an:return Ii(t.children,n,s,e);case pd:o=8,n|=8;break;case xh:return r=Tt(12,t,e,n|2),r.elementType=xh,r.lanes=s,r;case wh:return r=Tt(13,t,e,n),r.elementType=wh,r.lanes=s,r;case Eh:return r=Tt(19,t,e,n),r.elementType=Eh,r.lanes=s,r;case Fg:return Fl(t,n,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Dg:o=10;break e;case Ng:o=9;break e;case md:o=11;break e;case gd:o=14;break e;case Br:o=16,i=null;break e}throw Error(D(130,r==null?r:typeof r,""))}return e=Tt(o,t,e,n),e.elementType=r,e.type=i,e.lanes=s,e}function Ii(r,e,t,i){return r=Tt(7,r,i,e),r.lanes=t,r}function Fl(r,e,t,i){return r=Tt(22,r,i,e),r.elementType=Fg,r.lanes=t,r.stateNode={isHidden:!1},r}function Su(r,e,t){return r=Tt(6,r,null,e),r.lanes=t,r}function Au(r,e,t){return e=Tt(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function q1(r,e,t,i,n){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Zd(r,e,t,i,n,s,o,a,l){return r=new q1(r,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tt(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(s),r}function Z1(r,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:on,key:i==null?null:""+i,children:r,containerInfo:e,implementation:t}}function Cv(r){if(!r)return ii;r=r._reactInternals;e:{if(zi(r)!==r||r.tag!==1)throw Error(D(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(r.tag===1){var t=r.type;if(ht(t))return Cy(r,t,e)}return e}function bv(r,e,t,i,n,s,o,a,l){return r=Zd(t,i,!0,r,n,s,o,a,l),r.context=Cv(null),t=r.current,i=it(),n=Jr(t),s=Tr(i,n),s.callback=e??null,Zr(t,s,n),r.current.lanes=n,ho(r,n,i),ct(r,i),r}function Bl(r,e,t,i){var n=e.current,s=it(),o=Jr(n);return t=Cv(t),e.context===null?e.context=t:e.pendingContext=t,e=Tr(s,o),e.payload={element:r},i=i===void 0?null:i,i!==null&&(e.callback=i),r=Zr(n,e,o),r!==null&&(Gt(r,n,o,s),ga(r,n,o)),o}function il(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Tp(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function Qd(r,e){Tp(r,e),(r=r.alternate)&&Tp(r,e)}function Q1(){return null}var Iv=typeof reportError=="function"?reportError:function(r){console.error(r)};function Jd(r){this._internalRoot=r}Ol.prototype.render=Jd.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(D(409));Bl(r,e,null,null)};Ol.prototype.unmount=Jd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Bi(function(){Bl(null,r,null,null)}),e[Cr]=null}};function Ol(r){this._internalRoot=r}Ol.prototype.unstable_scheduleHydration=function(r){if(r){var e=sy();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Ur.length&&e!==0&&e<Ur[t].priority;t++);Ur.splice(t,0,r),t===0&&ay(r)}};function ef(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ll(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Sp(){}function J1(r,e,t,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var u=il(o);s.call(u)}}var o=bv(e,i,r,0,null,!1,!1,"",Sp);return r._reactRootContainer=o,r[Cr]=o.current,Ws(r.nodeType===8?r.parentNode:r),Bi(),o}for(;n=r.lastChild;)r.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var u=il(l);a.call(u)}}var l=Zd(r,0,!1,null,null,!1,!1,"",Sp);return r._reactRootContainer=l,r[Cr]=l.current,Ws(r.nodeType===8?r.parentNode:r),Bi(function(){Bl(e,l,t,i)}),l}function Ul(r,e,t,i,n){var s=t._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=il(o);a.call(l)}}Bl(e,o,r,n)}else o=J1(t,e,r,n,i);return il(o)}iy=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=ms(e.pendingLanes);t!==0&&(_d(e,t|1),ct(e,Me()),!(le&6)&&(Hn=Me()+500,li()))}break;case 13:Bi(function(){var i=br(r,1);if(i!==null){var n=it();Gt(i,r,1,n)}}),Qd(r,1)}};xd=function(r){if(r.tag===13){var e=br(r,134217728);if(e!==null){var t=it();Gt(e,r,134217728,t)}Qd(r,134217728)}};ny=function(r){if(r.tag===13){var e=Jr(r),t=br(r,e);if(t!==null){var i=it();Gt(t,r,e,i)}Qd(r,e)}};sy=function(){return he};oy=function(r,e){var t=he;try{return he=r,e()}finally{he=t}};kh=function(r,e,t){switch(e){case"input":if(Ah(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==r&&i.form===r.form){var n=Pl(i);if(!n)throw Error(D(90));Og(i),Ah(i,n)}}}break;case"textarea":Ug(r,t);break;case"select":e=t.value,e!=null&&wn(r,!!t.multiple,e,!1)}};Xg=Wd;Wg=Bi;var ew={usingClientEntryPoint:!1,Events:[fo,cn,Pl,jg,Vg,Wd]},ss={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tw={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=qg(r),r===null?null:r.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uo.isDisabled&&Uo.supportsFiber)try{Al=Uo.inject(tw),or=Uo}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew;vt.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(e))throw Error(D(200));return Z1(r,e,null,t)};vt.createRoot=function(r,e){if(!ef(r))throw Error(D(299));var t=!1,i="",n=Iv;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Zd(r,1,!1,null,null,t,!1,i,n),r[Cr]=e.current,Ws(r.nodeType===8?r.parentNode:r),new Jd(e)};vt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(D(188)):(r=Object.keys(r).join(","),Error(D(268,r)));return r=qg(e),r=r===null?null:r.stateNode,r};vt.flushSync=function(r){return Bi(r)};vt.hydrate=function(r,e,t){if(!Ll(e))throw Error(D(200));return Ul(null,r,e,!0,t)};vt.hydrateRoot=function(r,e,t){if(!ef(r))throw Error(D(405));var i=t!=null&&t.hydratedSources||null,n=!1,s="",o=Iv;if(t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=bv(e,null,r,1,t??null,n,!1,s,o),r[Cr]=e.current,Ws(r),i)for(r=0;r<i.length;r++)t=i[r],n=t._getVersion,n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n);return new Ol(e)};vt.render=function(r,e,t){if(!Ll(e))throw Error(D(200));return Ul(null,r,e,!1,t)};vt.unmountComponentAtNode=function(r){if(!Ll(r))throw Error(D(40));return r._reactRootContainer?(Bi(function(){Ul(null,null,r,!1,function(){r._reactRootContainer=null,r[Cr]=null})}),!0):!1};vt.unstable_batchedUpdates=Wd;vt.unstable_renderSubtreeIntoContainer=function(r,e,t,i){if(!Ll(t))throw Error(D(200));if(r==null||r._reactInternals===void 0)throw Error(D(38));return Ul(r,e,t,!1,i)};vt.version="18.3.1-next-f1338f8080-20240426";function Pv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pv)}catch(r){console.error(r)}}Pv(),Pg.exports=vt;var rw=Pg.exports,Ap=rw;vh.createRoot=Ap.createRoot,vh.hydrateRoot=Ap.hydrateRoot;var $i=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))($i||{}),Rv=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(Rv||{}),cc=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(cc||{}),Q=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Q||{}),sr=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(sr||{}),N=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(N||{}),bn=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(bn||{}),Y=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Y||{}),O=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(O||{}),_r=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(_r||{}),ti=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(ti||{}),hr=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(hr||{}),lt=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(lt||{}),rr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(rr||{}),tf=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(tf||{}),St=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(St||{}),Be=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Be||{}),ke=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(ke||{}),lr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(lr||{});const iw={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},L={ADAPTER:iw,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Cu=/iPhone/i,Cp=/iPod/i,bp=/iPad/i,Ip=/\biOS-universal(?:.+)Mac\b/i,bu=/\bAndroid(?:.+)Mobile\b/i,Pp=/Android/i,Wi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Go=/Silk/i,dr=/Windows Phone/i,Rp=/\bWindows(?:.+)ARM\b/i,Mp=/BlackBerry/i,kp=/BB10/i,Dp=/Opera Mini/i,Np=/\b(CriOS|Chrome)(?:.+)Mobile/i,Fp=/Mobile(?:.+)Firefox\b/i,Bp=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function nw(r){return function(e){return e.test(r)}}function Op(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var n=nw(t),s={apple:{phone:n(Cu)&&!n(dr),ipod:n(Cp),tablet:!n(Cu)&&(n(bp)||Bp(e))&&!n(dr),universal:n(Ip),device:(n(Cu)||n(Cp)||n(bp)||n(Ip)||Bp(e))&&!n(dr)},amazon:{phone:n(Wi),tablet:!n(Wi)&&n(Go),device:n(Wi)||n(Go)},android:{phone:!n(dr)&&n(Wi)||!n(dr)&&n(bu),tablet:!n(dr)&&!n(Wi)&&!n(bu)&&(n(Go)||n(Pp)),device:!n(dr)&&(n(Wi)||n(Go)||n(bu)||n(Pp))||n(/\bokhttp\b/i)},windows:{phone:n(dr),tablet:n(Rp),device:n(dr)||n(Rp)},other:{blackberry:n(Mp),blackberry10:n(kp),opera:n(Dp),firefox:n(Fp),chrome:n(Np),device:n(Mp)||n(kp)||n(Dp)||n(Fp)||n(Np)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const sw=Op.default??Op,xr=sw(globalThis.navigator);L.RETINA_PREFIX=/@([0-9\.]+)x/;L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Mv={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new n(h,c||l,d),p=t?t+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)e.call(h,c)&&u.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(u){var h=t?t+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,p){var y=t?t+u:u;if(!this._events[y])return!1;var _=this._events[y],g=arguments.length,v,m;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),g){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,c),!0;case 4:return _.fn.call(_.context,h,c,d),!0;case 5:return _.fn.call(_.context,h,c,d,f),!0;case 6:return _.fn.call(_.context,h,c,d,f,p),!0}for(m=1,v=new Array(g-1);m<g;m++)v[m-1]=arguments[m];_.fn.apply(_.context,v)}else{var x=_.length,w;for(m=0;m<x;m++)switch(_[m].once&&this.removeListener(u,_[m].fn,void 0,!0),g){case 1:_[m].fn.call(_[m].context);break;case 2:_[m].fn.call(_[m].context,h);break;case 3:_[m].fn.call(_[m].context,h,c);break;case 4:_[m].fn.call(_[m].context,h,c,d);break;default:if(!v)for(w=1,v=new Array(g-1);w<g;w++)v[w-1]=arguments[w];_[m].fn.apply(_[m].context,v)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=t?t+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var y=0,_=[],g=p.length;y<g;y++)(p[y].fn!==h||d&&!p[y].once||c&&p[y].context!==c)&&_.push(p[y]);_.length?this._events[f]=_.length===1?_[0]:_:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(Mv);var ow=Mv.exports;const mo=od(ow);var rf={exports:{}};rf.exports=Gl;rf.exports.default=Gl;function Gl(r,e,t){t=t||2;var i=e&&e.length,n=i?e[0]*t:r.length,s=kv(r,0,n,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(i&&(s=cw(r,e,s,t)),r.length>80*t){a=u=r[0],l=h=r[1];for(var p=t;p<n;p+=t)c=r[p],d=r[p+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return ro(s,o,t,a,l,f,0),o}function kv(r,e,t,i,n){var s,o;if(n===pc(r,e,t,i)>0)for(s=e;s<t;s+=i)o=Lp(s,r[s],r[s+1],o);else for(s=t-i;s>=e;s-=i)o=Lp(s,r[s],r[s+1],o);return o&&Hl(o,o.next)&&(no(o),o=o.next),o}function Oi(r,e){if(!r)return r;e||(e=r);var t=r,i;do if(i=!1,!t.steiner&&(Hl(t,t.next)||Ee(t.prev,t,t.next)===0)){if(no(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ro(r,e,t,i,n,s,o){if(r){!o&&s&&gw(r,i,n,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?lw(r,i,n,s):aw(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),no(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=uw(Oi(r),e,t),ro(r,e,t,i,n,s,2)):o===2&&hw(r,e,t,i,n,s):ro(Oi(r),e,t,i,n,s,1);break}}}}function aw(r){var e=r.prev,t=r,i=r.next;if(Ee(e,t,i)>=0)return!1;for(var n=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=n<s?n<o?n:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=n>s?n>o?n:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&vn(n,a,s,l,o,u,p.x,p.y)&&Ee(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function lw(r,e,t,i){var n=r.prev,s=r,o=r.next;if(Ee(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,h=n.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,y=a>l?a>u?a:u:l>u?l:u,_=h>c?h>d?h:d:c>d?c:d,g=dc(f,p,e,t,i),v=dc(y,_,e,t,i),m=r.prevZ,x=r.nextZ;m&&m.z>=g&&x&&x.z<=v;){if(m.x>=f&&m.x<=y&&m.y>=p&&m.y<=_&&m!==n&&m!==o&&vn(a,h,l,c,u,d,m.x,m.y)&&Ee(m.prev,m,m.next)>=0||(m=m.prevZ,x.x>=f&&x.x<=y&&x.y>=p&&x.y<=_&&x!==n&&x!==o&&vn(a,h,l,c,u,d,x.x,x.y)&&Ee(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;m&&m.z>=g;){if(m.x>=f&&m.x<=y&&m.y>=p&&m.y<=_&&m!==n&&m!==o&&vn(a,h,l,c,u,d,m.x,m.y)&&Ee(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;x&&x.z<=v;){if(x.x>=f&&x.x<=y&&x.y>=p&&x.y<=_&&x!==n&&x!==o&&vn(a,h,l,c,u,d,x.x,x.y)&&Ee(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function uw(r,e,t){var i=r;do{var n=i.prev,s=i.next.next;!Hl(n,s)&&Dv(n,i,i.next,s)&&io(n,s)&&io(s,n)&&(e.push(n.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),no(i),no(i.next),i=r=s),i=i.next}while(i!==r);return Oi(i)}function hw(r,e,t,i,n,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&_w(o,a)){var l=Nv(o,a);o=Oi(o,o.next),l=Oi(l,l.next),ro(o,e,t,i,n,s,0),ro(l,e,t,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function cw(r,e,t,i){var n=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:r.length,u=kv(r,a,l,i,!1),u===u.next&&(u.steiner=!0),n.push(vw(u));for(n.sort(dw),s=0;s<n.length;s++)t=fw(n[s],t);return t}function dw(r,e){return r.x-e.x}function fw(r,e){var t=pw(r,e);if(!t)return e;var i=Nv(t,r);return Oi(i,i.next),Oi(t,t.next)}function pw(r,e){var t=e,i=r.x,n=r.y,s=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===i))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;t=o;do i>=t.x&&t.x>=u&&i!==t.x&&vn(n<h?i:s,n,u,h,n<h?s:i,n,t.x,t.y)&&(d=Math.abs(n-t.y)/(i-t.x),io(t,r)&&(d<c||d===c&&(t.x>o.x||t.x===o.x&&mw(o,t)))&&(o=t,c=d)),t=t.next;while(t!==l);return o}function mw(r,e){return Ee(r.prev,r,e.prev)<0&&Ee(e.next,r,r.next)<0}function gw(r,e,t,i){var n=r;do n.z===0&&(n.z=dc(n.x,n.y,e,t,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,yw(n)}function yw(r){var e,t,i,n,s,o,a,l,u=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(n=t,t=t.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;t=i}s.nextZ=null,u*=2}while(o>1);return r}function dc(r,e,t,i,n){return r=(r-t)*n|0,e=(e-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function vw(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function vn(r,e,t,i,n,s,o,a){return(n-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(n-o)*(i-a)}function _w(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!xw(r,e)&&(io(r,e)&&io(e,r)&&ww(r,e)&&(Ee(r.prev,r,e.prev)||Ee(r,e.prev,e))||Hl(r,e)&&Ee(r.prev,r,r.next)>0&&Ee(e.prev,e,e.next)>0)}function Ee(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Hl(r,e){return r.x===e.x&&r.y===e.y}function Dv(r,e,t,i){var n=zo(Ee(r,e,t)),s=zo(Ee(r,e,i)),o=zo(Ee(t,i,r)),a=zo(Ee(t,i,e));return!!(n!==s&&o!==a||n===0&&Ho(r,t,e)||s===0&&Ho(r,i,e)||o===0&&Ho(t,r,i)||a===0&&Ho(t,e,i))}function Ho(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function zo(r){return r>0?1:r<0?-1:0}function xw(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&Dv(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function io(r,e){return Ee(r.prev,r,r.next)<0?Ee(r,e,r.next)>=0&&Ee(r,r.prev,e)>=0:Ee(r,e,r.prev)<0||Ee(r,r.next,e)<0}function ww(r,e){var t=r,i=!1,n=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function Nv(r,e){var t=new fc(r.i,r.x,r.y),i=new fc(e.i,e.x,e.y),n=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=n,n.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Lp(r,e,t,i){var n=new fc(r,e,t);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function no(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function fc(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Gl.deviation=function(r,e,t,i){var n=e&&e.length,s=n?e[0]*t:r.length,o=Math.abs(pc(r,0,s,t));if(n)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,h=a<l-1?e[a+1]*t:r.length;o-=Math.abs(pc(r,u,h,t))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*t,f=i[a+1]*t,p=i[a+2]*t;c+=Math.abs((r[d]-r[p])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[p+1]-r[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function pc(r,e,t,i){for(var n=0,s=e,o=t-i;s<t;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}Gl.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var o=0;o<e;o++)t.vertices.push(r[n][s][o]);n>0&&(i+=r[n-1].length,t.holes.push(i))}return t};var Ew=rf.exports;const Tw=od(Ew);var nl={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */nl.exports;(function(r,e){(function(t){var i=e&&!e.nodeType&&e,n=r&&!r.nodeType&&r,s=typeof Ss=="object"&&Ss;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,p=128,y="-",_=/^xn--/,g=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-u,w=Math.floor,S=String.fromCharCode,T;function E(C){throw new RangeError(m[C])}function I(C,P){for(var K=C.length,oe=[];K--;)oe[K]=P(C[K]);return oe}function R(C,P){var K=C.split("@"),oe="";K.length>1&&(oe=K[0]+"@",C=K[1]),C=C.replace(v,".");var W=C.split("."),se=I(W,P).join(".");return oe+se}function q(C){for(var P=[],K=0,oe=C.length,W,se;K<oe;)W=C.charCodeAt(K++),W>=55296&&W<=56319&&K<oe?(se=C.charCodeAt(K++),(se&64512)==56320?P.push(((W&1023)<<10)+(se&1023)+65536):(P.push(W),K--)):P.push(W);return P}function F(C){return I(C,function(P){var K="";return P>65535&&(P-=65536,K+=S(P>>>10&1023|55296),P=56320|P&1023),K+=S(P),K}).join("")}function A(C){return C-48<10?C-22:C-65<26?C-65:C-97<26?C-97:l}function k(C,P){return C+22+75*(C<26)-((P!=0)<<5)}function G(C,P,K){var oe=0;for(C=K?w(C/d):C>>1,C+=w(C/P);C>x*h>>1;oe+=l)C=w(C/x);return w(oe+(x+1)*C/(C+c))}function Z(C){var P=[],K=C.length,oe,W=0,se=p,te=f,ue,_e,et,Ne,ce,Ce,be,Vt,Xt;for(ue=C.lastIndexOf(y),ue<0&&(ue=0),_e=0;_e<ue;++_e)C.charCodeAt(_e)>=128&&E("not-basic"),P.push(C.charCodeAt(_e));for(et=ue>0?ue+1:0;et<K;){for(Ne=W,ce=1,Ce=l;et>=K&&E("invalid-input"),be=A(C.charCodeAt(et++)),(be>=l||be>w((a-W)/ce))&&E("overflow"),W+=be*ce,Vt=Ce<=te?u:Ce>=te+h?h:Ce-te,!(be<Vt);Ce+=l)Xt=l-Vt,ce>w(a/Xt)&&E("overflow"),ce*=Xt;oe=P.length+1,te=G(W-Ne,oe,Ne==0),w(W/oe)>a-se&&E("overflow"),se+=w(W/oe),W%=oe,P.splice(W++,0,se)}return F(P)}function $(C){var P,K,oe,W,se,te,ue,_e,et,Ne,ce,Ce=[],be,Vt,Xt,Zn;for(C=q(C),be=C.length,P=p,K=0,se=f,te=0;te<be;++te)ce=C[te],ce<128&&Ce.push(S(ce));for(oe=W=Ce.length,W&&Ce.push(y);oe<be;){for(ue=a,te=0;te<be;++te)ce=C[te],ce>=P&&ce<ue&&(ue=ce);for(Vt=oe+1,ue-P>w((a-K)/Vt)&&E("overflow"),K+=(ue-P)*Vt,P=ue,te=0;te<be;++te)if(ce=C[te],ce<P&&++K>a&&E("overflow"),ce==P){for(_e=K,et=l;Ne=et<=se?u:et>=se+h?h:et-se,!(_e<Ne);et+=l)Zn=_e-Ne,Xt=l-Ne,Ce.push(S(k(Ne+Zn%Xt,0))),_e=w(Zn/Xt);Ce.push(S(k(_e,0))),se=G(K,Vt,oe==W),K=0,++oe}++K,++P}return Ce.join("")}function b(C){return R(C,function(P){return _.test(P)?Z(P.slice(4).toLowerCase()):P})}function U(C){return R(C,function(P){return g.test(P)?"xn--"+$(P):P})}if(o={version:"1.4.1",ucs2:{decode:q,encode:F},decode:Z,encode:$,toASCII:U,toUnicode:b},i&&n)if(r.exports==i)n.exports=o;else for(T in o)o.hasOwnProperty(T)&&(i[T]=o[T]);else t.punycode=o})(Ss)})(nl,nl.exports);var Sw=nl.exports,Yn=TypeError;const Aw={},Cw=Object.freeze(Object.defineProperty({__proto__:null,default:Aw},Symbol.toStringTag,{value:"Module"})),bw=P_(Cw);var nf=typeof Map=="function"&&Map.prototype,Iu=Object.getOwnPropertyDescriptor&&nf?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,sl=nf&&Iu&&typeof Iu.get=="function"?Iu.get:null,Up=nf&&Map.prototype.forEach,sf=typeof Set=="function"&&Set.prototype,Pu=Object.getOwnPropertyDescriptor&&sf?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ol=sf&&Pu&&typeof Pu.get=="function"?Pu.get:null,Gp=sf&&Set.prototype.forEach,Iw=typeof WeakMap=="function"&&WeakMap.prototype,Ns=Iw?WeakMap.prototype.has:null,Pw=typeof WeakSet=="function"&&WeakSet.prototype,Fs=Pw?WeakSet.prototype.has:null,Rw=typeof WeakRef=="function"&&WeakRef.prototype,Hp=Rw?WeakRef.prototype.deref:null,Mw=Boolean.prototype.valueOf,kw=Object.prototype.toString,Dw=Function.prototype.toString,Nw=String.prototype.match,of=String.prototype.slice,jr=String.prototype.replace,Fw=String.prototype.toUpperCase,zp=String.prototype.toLowerCase,Fv=RegExp.prototype.test,$p=Array.prototype.concat,ir=Array.prototype.join,Bw=Array.prototype.slice,jp=Math.floor,mc=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ru=Object.getOwnPropertySymbols,gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,zn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Bs=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===zn||!0)?Symbol.toStringTag:null,Bv=Object.prototype.propertyIsEnumerable,Vp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Xp(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Fv.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-jp(-r):jp(r);if(i!==r){var n=String(i),s=of.call(e,n.length+1);return jr.call(n,t,"$&_")+"."+jr.call(jr.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return jr.call(e,t,"$&_")}var yc=bw,Wp=yc.custom,Yp=Uv(Wp)?Wp:null,Ov={__proto__:null,double:'"',single:"'"},Ow={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},zl=function r(e,t,i,n){var s=t||{};if(mr(s,"quoteStyle")&&!mr(Ov,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=mr(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Hv(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Xp(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?Xp(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=h&&h>0&&typeof e=="object")return vc(e)?"[Array]":"[Object]";var c=tE(s,i);if(typeof n>"u")n=[];else if(Gv(n,e)>=0)return"[Circular]";function d(A,k,G){if(k&&(n=Bw.call(n),n.push(k)),G){var Z={depth:s.depth};return mr(s,"quoteStyle")&&(Z.quoteStyle=s.quoteStyle),r(A,Z,i+1,n)}return r(A,s,i+1,n)}if(typeof e=="function"&&!Kp(e)){var f=Xw(e),p=$o(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+ir.call(p,", ")+" }":"")}if(Uv(e)){var y=zn?jr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):gc.call(e);return typeof e=="object"&&!zn?os(y):y}if(Qw(e)){for(var _="<"+zp.call(String(e.nodeName)),g=e.attributes||[],v=0;v<g.length;v++)_+=" "+g[v].name+"="+Lv(Lw(g[v].value),"double",s);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+zp.call(String(e.nodeName))+">",_}if(vc(e)){if(e.length===0)return"[]";var m=$o(e,d);return c&&!eE(m)?"["+_c(m,c)+"]":"[ "+ir.call(m,", ")+" ]"}if(Gw(e)){var x=$o(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Bv.call(e,"cause")?"{ ["+String(e)+"] "+ir.call($p.call("[cause]: "+d(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ir.call(x,", ")+" }"}if(typeof e=="object"&&o){if(Yp&&typeof e[Yp]=="function"&&yc)return yc(e,{depth:h-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Ww(e)){var w=[];return Up&&Up.call(e,function(A,k){w.push(d(k,e,!0)+" => "+d(A,e))}),qp("Map",sl.call(e),w,c)}if(qw(e)){var S=[];return Gp&&Gp.call(e,function(A){S.push(d(A,e))}),qp("Set",ol.call(e),S,c)}if(Yw(e))return Mu("WeakMap");if(Zw(e))return Mu("WeakSet");if(Kw(e))return Mu("WeakRef");if(zw(e))return os(d(Number(e)));if(jw(e))return os(d(mc.call(e)));if($w(e))return os(Mw.call(e));if(Hw(e))return os(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Ss<"u"&&e===Ss)return"{ [object globalThis] }";if(!Uw(e)&&!Kp(e)){var T=$o(e,d),E=Vp?Vp(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",R=!E&&Bs&&Object(e)===e&&Bs in e?of.call(ui(e),8,-1):I?"Object":"",q=E||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",F=q+(R||I?"["+ir.call($p.call([],R||[],I||[]),": ")+"] ":"");return T.length===0?F+"{}":c?F+"{"+_c(T,c)+"}":F+"{ "+ir.call(T,", ")+" }"}return String(e)};function Lv(r,e,t){var i=t.quoteStyle||e,n=Ov[i];return n+r+n}function Lw(r){return jr.call(String(r),/"/g,"&quot;")}function ji(r){return!Bs||!(typeof r=="object"&&(Bs in r||typeof r[Bs]<"u"))}function vc(r){return ui(r)==="[object Array]"&&ji(r)}function Uw(r){return ui(r)==="[object Date]"&&ji(r)}function Kp(r){return ui(r)==="[object RegExp]"&&ji(r)}function Gw(r){return ui(r)==="[object Error]"&&ji(r)}function Hw(r){return ui(r)==="[object String]"&&ji(r)}function zw(r){return ui(r)==="[object Number]"&&ji(r)}function $w(r){return ui(r)==="[object Boolean]"&&ji(r)}function Uv(r){if(zn)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!gc)return!1;try{return gc.call(r),!0}catch{}return!1}function jw(r){if(!r||typeof r!="object"||!mc)return!1;try{return mc.call(r),!0}catch{}return!1}var Vw=Object.prototype.hasOwnProperty||function(r){return r in this};function mr(r,e){return Vw.call(r,e)}function ui(r){return kw.call(r)}function Xw(r){if(r.name)return r.name;var e=Nw.call(Dw.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Gv(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}function Ww(r){if(!sl||!r||typeof r!="object")return!1;try{sl.call(r);try{ol.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Yw(r){if(!Ns||!r||typeof r!="object")return!1;try{Ns.call(r,Ns);try{Fs.call(r,Fs)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function Kw(r){if(!Hp||!r||typeof r!="object")return!1;try{return Hp.call(r),!0}catch{}return!1}function qw(r){if(!ol||!r||typeof r!="object")return!1;try{ol.call(r);try{sl.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function Zw(r){if(!Fs||!r||typeof r!="object")return!1;try{Fs.call(r,Fs);try{Ns.call(r,Ns)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Qw(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Hv(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return Hv(of.call(r,0,e.maxStringLength),e)+i}var n=Ow[e.quoteStyle||"single"];n.lastIndex=0;var s=jr.call(jr.call(r,n,"\\$1"),/[\x00-\x1f]/g,Jw);return Lv(s,"single",e)}function Jw(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Fw.call(e.toString(16))}function os(r){return"Object("+r+")"}function Mu(r){return r+" { ? }"}function qp(r,e,t,i){var n=i?_c(t,i):ir.call(t,", ");return r+" ("+e+") {"+n+"}"}function eE(r){for(var e=0;e<r.length;e++)if(Gv(r[e],`
`)>=0)return!1;return!0}function tE(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=ir.call(Array(r.indent+1)," ");else return null;return{base:t,prev:ir.call(Array(e+1),t)}}function _c(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+ir.call(r,","+t)+`
`+e.prev}function $o(r,e){var t=vc(r),i=[];if(t){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=mr(r,n)?e(r[n],r):""}var s=typeof Ru=="function"?Ru(r):[],o;if(zn){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in r)mr(r,l)&&(t&&String(Number(l))===l&&l<r.length||zn&&o["$"+l]instanceof Symbol||(Fv.call(/[^\w$]/,l)?i.push(e(l,r)+": "+e(r[l],r)):i.push(l+": "+e(r[l],r))));if(typeof Ru=="function")for(var u=0;u<s.length;u++)Bv.call(r,s[u])&&i.push("["+e(s[u])+"]: "+e(r[s[u]],r));return i}var rE=zl,iE=Yn,$l=function(r,e,t){for(var i=r,n;(n=i.next)!=null;i=n)if(n.key===e)return i.next=n.next,t||(n.next=r.next,r.next=n),n},nE=function(r,e){if(r){var t=$l(r,e);return t&&t.value}},sE=function(r,e,t){var i=$l(r,e);i?i.value=t:r.next={key:e,next:r.next,value:t}},oE=function(r,e){return r?!!$l(r,e):!1},aE=function(r,e){if(r)return $l(r,e,!0)},lE=function(){var e,t={assert:function(i){if(!t.has(i))throw new iE("Side channel does not contain "+rE(i))},delete:function(i){var n=e&&e.next,s=aE(e,i);return s&&n&&n===s&&(e=void 0),!!s},get:function(i){return nE(e,i)},has:function(i){return oE(e,i)},set:function(i,n){e||(e={next:void 0}),sE(e,i,n)}};return t},zv=Object,uE=Error,hE=EvalError,cE=RangeError,dE=ReferenceError,fE=SyntaxError,pE=URIError,mE=Math.abs,gE=Math.floor,yE=Math.max,vE=Math.min,_E=Math.pow,xE=Math.round,wE=Number.isNaN||function(e){return e!==e},EE=wE,TE=function(e){return EE(e)||e===0?e:e<0?-1:1},SE=Object.getOwnPropertyDescriptor,Ta=SE;if(Ta)try{Ta([],"length")}catch{Ta=null}var $v=Ta,Sa=Object.defineProperty||!1;if(Sa)try{Sa({},"a",{value:1})}catch{Sa=!1}var AE=Sa,ku,Zp;function CE(){return Zp||(Zp=1,ku=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==n||a.enumerable!==!0)return!1}return!0}),ku}var Du,Qp;function bE(){if(Qp)return Du;Qp=1;var r=typeof Symbol<"u"&&Symbol,e=CE();return Du=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Du}var Nu,Jp;function jv(){return Jp||(Jp=1,Nu=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Nu}var Fu,em;function Vv(){if(em)return Fu;em=1;var r=zv;return Fu=r.getPrototypeOf||null,Fu}var IE="Function.prototype.bind called on incompatible ",PE=Object.prototype.toString,RE=Math.max,ME="[object Function]",tm=function(e,t){for(var i=[],n=0;n<e.length;n+=1)i[n]=e[n];for(var s=0;s<t.length;s+=1)i[s+e.length]=t[s];return i},kE=function(e,t){for(var i=[],n=t,s=0;n<e.length;n+=1,s+=1)i[s]=e[n];return i},DE=function(r,e){for(var t="",i=0;i<r.length;i+=1)t+=r[i],i+1<r.length&&(t+=e);return t},NE=function(e){var t=this;if(typeof t!="function"||PE.apply(t)!==ME)throw new TypeError(IE+t);for(var i=kE(arguments,1),n,s=function(){if(this instanceof n){var h=t.apply(this,tm(i,arguments));return Object(h)===h?h:this}return t.apply(e,tm(i,arguments))},o=RE(0,t.length-i.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(n=Function("binder","return function ("+DE(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,n.prototype=new u,u.prototype=null}return n},FE=NE,jl=Function.prototype.bind||FE,af=Function.prototype.call,Bu,rm;function Xv(){return rm||(rm=1,Bu=Function.prototype.apply),Bu}var BE=typeof Reflect<"u"&&Reflect&&Reflect.apply,OE=jl,LE=Xv(),UE=af,GE=BE,HE=GE||OE.call(UE,LE),zE=jl,$E=Yn,jE=af,VE=HE,Wv=function(e){if(e.length<1||typeof e[0]!="function")throw new $E("a function is required");return VE(zE,jE,e)},Ou,im;function XE(){if(im)return Ou;im=1;var r=Wv,e=$v,t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!t&&e&&e(Object.prototype,"__proto__"),n=Object,s=n.getPrototypeOf;return Ou=i&&typeof i.get=="function"?r([i.get]):typeof s=="function"?function(a){return s(a==null?a:n(a))}:!1,Ou}var Lu,nm;function WE(){if(nm)return Lu;nm=1;var r=jv(),e=Vv(),t=XE();return Lu=r?function(n){return r(n)}:e?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return e(n)}:t?function(n){return t(n)}:null,Lu}var Uu,sm;function YE(){if(sm)return Uu;sm=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=jl;return Uu=t.call(r,e),Uu}var re,KE=zv,qE=uE,ZE=hE,QE=cE,JE=dE,$n=fE,In=Yn,eT=pE,tT=mE,rT=gE,iT=yE,nT=vE,sT=_E,oT=xE,aT=TE,Yv=Function,Gu=function(r){try{return Yv('"use strict"; return ('+r+").constructor;")()}catch{}},so=$v,lT=AE,Hu=function(){throw new In},uT=so?function(){try{return arguments.callee,Hu}catch{try{return so(arguments,"callee").get}catch{return Hu}}}():Hu,Yi=bE()(),Ue=WE(),hT=Vv(),cT=jv(),Kv=Xv(),go=af,Qi={},dT=typeof Uint8Array>"u"||!Ue?re:Ue(Uint8Array),Pi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?re:ArrayBuffer,"%ArrayIteratorPrototype%":Yi&&Ue?Ue([][Symbol.iterator]()):re,"%AsyncFromSyncIteratorPrototype%":re,"%AsyncFunction%":Qi,"%AsyncGenerator%":Qi,"%AsyncGeneratorFunction%":Qi,"%AsyncIteratorPrototype%":Qi,"%Atomics%":typeof Atomics>"u"?re:Atomics,"%BigInt%":typeof BigInt>"u"?re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":qE,"%eval%":eval,"%EvalError%":ZE,"%Float16Array%":typeof Float16Array>"u"?re:Float16Array,"%Float32Array%":typeof Float32Array>"u"?re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?re:FinalizationRegistry,"%Function%":Yv,"%GeneratorFunction%":Qi,"%Int8Array%":typeof Int8Array>"u"?re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yi&&Ue?Ue(Ue([][Symbol.iterator]())):re,"%JSON%":typeof JSON=="object"?JSON:re,"%Map%":typeof Map>"u"?re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Yi||!Ue?re:Ue(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":KE,"%Object.getOwnPropertyDescriptor%":so,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?re:Promise,"%Proxy%":typeof Proxy>"u"?re:Proxy,"%RangeError%":QE,"%ReferenceError%":JE,"%Reflect%":typeof Reflect>"u"?re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Yi||!Ue?re:Ue(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yi&&Ue?Ue(""[Symbol.iterator]()):re,"%Symbol%":Yi?Symbol:re,"%SyntaxError%":$n,"%ThrowTypeError%":uT,"%TypedArray%":dT,"%TypeError%":In,"%Uint8Array%":typeof Uint8Array>"u"?re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?re:Uint32Array,"%URIError%":eT,"%WeakMap%":typeof WeakMap>"u"?re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?re:WeakSet,"%Function.prototype.call%":go,"%Function.prototype.apply%":Kv,"%Object.defineProperty%":lT,"%Object.getPrototypeOf%":hT,"%Math.abs%":tT,"%Math.floor%":rT,"%Math.max%":iT,"%Math.min%":nT,"%Math.pow%":sT,"%Math.round%":oT,"%Math.sign%":aT,"%Reflect.getPrototypeOf%":cT};if(Ue)try{null.error}catch(r){var fT=Ue(Ue(r));Pi["%Error.prototype%"]=fT}var pT=function r(e){var t;if(e==="%AsyncFunction%")t=Gu("async function () {}");else if(e==="%GeneratorFunction%")t=Gu("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Gu("async function* () {}");else if(e==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&Ue&&(t=Ue(n.prototype))}return Pi[e]=t,t},om={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},yo=jl,al=YE(),mT=yo.call(go,Array.prototype.concat),gT=yo.call(Kv,Array.prototype.splice),am=yo.call(go,String.prototype.replace),ll=yo.call(go,String.prototype.slice),yT=yo.call(go,RegExp.prototype.exec),vT=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_T=/\\(\\)?/g,xT=function(e){var t=ll(e,0,1),i=ll(e,-1);if(t==="%"&&i!=="%")throw new $n("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new $n("invalid intrinsic syntax, expected opening `%`");var n=[];return am(e,vT,function(s,o,a,l){n[n.length]=a?am(l,_T,"$1"):o||s}),n},wT=function(e,t){var i=e,n;if(al(om,i)&&(n=om[i],i="%"+n[0]+"%"),al(Pi,i)){var s=Pi[i];if(s===Qi&&(s=pT(i)),typeof s>"u"&&!t)throw new In("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new $n("intrinsic "+e+" does not exist!")},lf=function(e,t){if(typeof e!="string"||e.length===0)throw new In("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new In('"allowMissing" argument must be a boolean');if(yT(/^%?[^%]*%?$/,e)===null)throw new $n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=xT(e),n=i.length>0?i[0]:"",s=wT("%"+n+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(n=u[0],gT(i,mT([0,1],u)));for(var h=1,c=!0;h<i.length;h+=1){var d=i[h],f=ll(d,0,1),p=ll(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new $n("property names with quotes must have matching quotes");if((d==="constructor"||!c)&&(l=!0),n+="."+d,o="%"+n+"%",al(Pi,o))a=Pi[o];else if(a!=null){if(!(d in a)){if(!t)throw new In("base intrinsic for "+e+" exists, but the property is not available.");return}if(so&&h+1>=i.length){var y=so(a,d);c=!!y,c&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[d]}else c=al(a,d),a=a[d];c&&!l&&(Pi[o]=a)}}return a},qv=lf,Zv=Wv,ET=Zv([qv("%String.prototype.indexOf%")]),Qv=function(e,t){var i=qv(e,!!t);return typeof i=="function"&&ET(e,".prototype.")>-1?Zv([i]):i},TT=lf,vo=Qv,ST=zl,AT=Yn,lm=TT("%Map%",!0),CT=vo("Map.prototype.get",!0),bT=vo("Map.prototype.set",!0),IT=vo("Map.prototype.has",!0),PT=vo("Map.prototype.delete",!0),RT=vo("Map.prototype.size",!0),Jv=!!lm&&function(){var e,t={assert:function(i){if(!t.has(i))throw new AT("Side channel does not contain "+ST(i))},delete:function(i){if(e){var n=PT(e,i);return RT(e)===0&&(e=void 0),n}return!1},get:function(i){if(e)return CT(e,i)},has:function(i){return e?IT(e,i):!1},set:function(i,n){e||(e=new lm),bT(e,i,n)}};return t},MT=lf,Vl=Qv,kT=zl,jo=Jv,DT=Yn,Ki=MT("%WeakMap%",!0),NT=Vl("WeakMap.prototype.get",!0),FT=Vl("WeakMap.prototype.set",!0),BT=Vl("WeakMap.prototype.has",!0),OT=Vl("WeakMap.prototype.delete",!0),LT=Ki?function(){var e,t,i={assert:function(n){if(!i.has(n))throw new DT("Side channel does not contain "+kT(n))},delete:function(n){if(Ki&&n&&(typeof n=="object"||typeof n=="function")){if(e)return OT(e,n)}else if(jo&&t)return t.delete(n);return!1},get:function(n){return Ki&&n&&(typeof n=="object"||typeof n=="function")&&e?NT(e,n):t&&t.get(n)},has:function(n){return Ki&&n&&(typeof n=="object"||typeof n=="function")&&e?BT(e,n):!!t&&t.has(n)},set:function(n,s){Ki&&n&&(typeof n=="object"||typeof n=="function")?(e||(e=new Ki),FT(e,n,s)):jo&&(t||(t=jo()),t.set(n,s))}};return i}:jo,UT=Yn,GT=zl,HT=lE,zT=Jv,$T=LT,jT=$T||zT||HT,VT=function(){var e,t={assert:function(i){if(!t.has(i))throw new UT("Side channel does not contain "+GT(i))},delete:function(i){return!!e&&e.delete(i)},get:function(i){return e&&e.get(i)},has:function(i){return!!e&&e.has(i)},set:function(i,n){e||(e=jT()),e.set(i,n)}};return t},XT=String.prototype.replace,WT=/%20/g,zu={RFC1738:"RFC1738",RFC3986:"RFC3986"},uf={default:zu.RFC3986,formatters:{RFC1738:function(r){return XT.call(r,WT,"+")},RFC3986:function(r){return String(r)}},RFC1738:zu.RFC1738,RFC3986:zu.RFC3986},YT=uf,$u=Object.prototype.hasOwnProperty,wi=Array.isArray,Yt=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),KT=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(wi(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);t.obj[t.prop]=n}}},e0=function(e,t){for(var i=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)typeof e[n]<"u"&&(i[n]=e[n]);return i},qT=function r(e,t,i){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(wi(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!$u.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var n=e;return wi(e)&&!wi(t)&&(n=e0(e,i)),wi(e)&&wi(t)?(t.forEach(function(s,o){if($u.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,i):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return $u.call(s,o)?s[o]=r(s[o],a,i):s[o]=a,s},n)},ZT=function(e,t){return Object.keys(t).reduce(function(i,n){return i[n]=t[n],i},e)},QT=function(r,e,t){var i=r.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},ju=1024,JT=function(e,t,i,n,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=ju){for(var u=o.length>=ju?o.slice(l,l+ju):o,h=[],c=0;c<u.length;++c){var d=u.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===YT.RFC1738&&(d===40||d===41)){h[h.length]=u.charAt(c);continue}if(d<128){h[h.length]=Yt[d];continue}if(d<2048){h[h.length]=Yt[192|d>>6]+Yt[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=Yt[224|d>>12]+Yt[128|d>>6&63]+Yt[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|u.charCodeAt(c)&1023),h[h.length]=Yt[240|d>>18]+Yt[128|d>>12&63]+Yt[128|d>>6&63]+Yt[128|d&63]}a+=h.join("")}return a},eS=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],n=0;n<t.length;++n)for(var s=t[n],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&i.indexOf(h)===-1&&(t.push({obj:o,prop:u}),i.push(h))}return KT(t),e},tS=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},rS=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},iS=function(e,t){return[].concat(e,t)},nS=function(e,t){if(wi(e)){for(var i=[],n=0;n<e.length;n+=1)i.push(t(e[n]));return i}return t(e)},t0={arrayToObject:e0,assign:ZT,combine:iS,compact:eS,decode:QT,encode:JT,isBuffer:rS,isRegExp:tS,maybeMap:nS,merge:qT},r0=VT,Aa=t0,Os=uf,sS=Object.prototype.hasOwnProperty,i0={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},tr=Array.isArray,oS=Array.prototype.push,n0=function(r,e){oS.apply(r,tr(e)?e:[e])},aS=Date.prototype.toISOString,um=Os.default,Fe={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Aa.encode,encodeValuesOnly:!1,filter:void 0,format:um,formatter:Os.formatters[um],indices:!1,serializeDate:function(e){return aS.call(e)},skipNulls:!1,strictNullHandling:!1},lS=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Vu={},uS=function r(e,t,i,n,s,o,a,l,u,h,c,d,f,p,y,_,g,v){for(var m=e,x=v,w=0,S=!1;(x=x.get(Vu))!==void 0&&!S;){var T=x.get(e);if(w+=1,typeof T<"u"){if(T===w)throw new RangeError("Cyclic object value");S=!0}typeof x.get(Vu)>"u"&&(w=0)}if(typeof h=="function"?m=h(t,m):m instanceof Date?m=f(m):i==="comma"&&tr(m)&&(m=Aa.maybeMap(m,function(C){return C instanceof Date?f(C):C})),m===null){if(o)return u&&!_?u(t,Fe.encoder,g,"key",p):t;m=""}if(lS(m)||Aa.isBuffer(m)){if(u){var E=_?t:u(t,Fe.encoder,g,"key",p);return[y(E)+"="+y(u(m,Fe.encoder,g,"value",p))]}return[y(t)+"="+y(String(m))]}var I=[];if(typeof m>"u")return I;var R;if(i==="comma"&&tr(m))_&&u&&(m=Aa.maybeMap(m,u)),R=[{value:m.length>0?m.join(",")||null:void 0}];else if(tr(h))R=h;else{var q=Object.keys(m);R=c?q.sort(c):q}var F=l?String(t).replace(/\./g,"%2E"):String(t),A=n&&tr(m)&&m.length===1?F+"[]":F;if(s&&tr(m)&&m.length===0)return A+"[]";for(var k=0;k<R.length;++k){var G=R[k],Z=typeof G=="object"&&G&&typeof G.value<"u"?G.value:m[G];if(!(a&&Z===null)){var $=d&&l?String(G).replace(/\./g,"%2E"):String(G),b=tr(m)?typeof i=="function"?i(A,$):A:A+(d?"."+$:"["+$+"]");v.set(e,w);var U=r0();U.set(Vu,v),n0(I,r(Z,b,i,n,s,o,a,l,i==="comma"&&_&&tr(m)?null:u,h,c,d,f,p,y,_,g,U))}}return I},hS=function(e){if(!e)return Fe;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Fe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Os.default;if(typeof e.format<"u"){if(!sS.call(Os.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var n=Os.formatters[i],s=Fe.filter;(typeof e.filter=="function"||tr(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in i0?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Fe.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Fe.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Fe.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Fe.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Fe.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Fe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Fe.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Fe.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Fe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Fe.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Fe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Fe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Fe.strictNullHandling}},cS=function(r,e){var t=r,i=hS(e),n,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):tr(i.filter)&&(s=i.filter,n=s);var o=[];if(typeof t!="object"||t===null)return"";var a=i0[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;n||(n=Object.keys(t)),i.sort&&n.sort(i.sort);for(var u=r0(),h=0;h<n.length;++h){var c=n[h],d=t[c];i.skipNulls&&d===null||n0(o,uS(d,c,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var f=o.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Li=t0,xc=Object.prototype.hasOwnProperty,hm=Array.isArray,Ie={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Li.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},dS=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},s0=function(r,e,t){if(r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1)return r.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return r},fS="utf8=%26%2310003%3B",pS="utf8=%E2%9C%93",mS=function(e,t){var i={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,t.throwOnLimitExceeded?s+1:s);if(t.throwOnLimitExceeded&&o.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===pS?u="utf-8":o[l]===fS&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),d=c===-1?h.indexOf("="):c+1,f,p;d===-1?(f=t.decoder(h,Ie.decoder,u,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(h.slice(0,d),Ie.decoder,u,"key"),p=Li.maybeMap(s0(h.slice(d+1),t,hm(i[f])?i[f].length:0),function(_){return t.decoder(_,Ie.decoder,u,"value")})),p&&t.interpretNumericEntities&&u==="iso-8859-1"&&(p=dS(String(p))),h.indexOf("[]=")>-1&&(p=hm(p)?[p]:p);var y=xc.call(i,f);y&&t.duplicates==="combine"?i[f]=Li.combine(i[f],p):(!y||t.duplicates==="last")&&(i[f]=p)}return i},gS=function(r,e,t,i){var n=0;if(r.length>0&&r[r.length-1]==="[]"){var s=r.slice(0,-1).join("");n=Array.isArray(e)&&e[s]?e[s].length:0}for(var o=i?e:s0(e,t,n),a=r.length-1;a>=0;--a){var l,u=r[a];if(u==="[]"&&t.parseArrays)l=t.allowEmptyArrays&&(o===""||t.strictNullHandling&&o===null)?[]:Li.combine([],o);else{l=t.plainObjects?{__proto__:null}:{};var h=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,c=t.decodeDotInKeys?h.replace(/%2E/g,"."):h,d=parseInt(c,10);!t.parseArrays&&c===""?l={0:o}:!isNaN(d)&&u!==c&&String(d)===c&&d>=0&&t.parseArrays&&d<=t.arrayLimit?(l=[],l[d]=o):c!=="__proto__"&&(l[c]=o)}o=l}return o},yS=function(e,t,i,n){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!i.plainObjects&&xc.call(Object.prototype,u)&&!i.allowPrototypes)return;h.push(u)}for(var c=0;i.depth>0&&(l=a.exec(s))!==null&&c<i.depth;){if(c+=1,!i.plainObjects&&xc.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;h.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");h.push("["+s.slice(l.index)+"]")}return gS(h,t,i,n)}},vS=function(e){if(!e)return Ie;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?Ie.charset:e.charset,i=typeof e.duplicates>"u"?Ie.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ie.allowDots:!!e.allowDots;return{allowDots:n,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ie.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ie.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ie.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ie.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ie.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ie.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ie.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ie.decoder,delimiter:typeof e.delimiter=="string"||Li.isRegExp(e.delimiter)?e.delimiter:Ie.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ie.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ie.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ie.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ie.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ie.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ie.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},_S=function(r,e){var t=vS(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?{__proto__:null}:{};for(var i=typeof r=="string"?mS(r,t):r,n=t.plainObjects?{__proto__:null}:{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],l=yS(a,i[a],t,typeof r=="string");n=Li.merge(n,l,t)}return t.allowSparse===!0?n:Li.compact(n)},xS=cS,wS=_S,ES=uf,TS={formats:ES,parse:wS,stringify:xS},SS=Sw;function Sr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var AS=/^([a-z0-9.+-]+:)/i,CS=/:[0-9]*$/,bS=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,IS=["<",">",'"',"`"," ","\r",`
`,"	"],PS=["{","}","|","\\","^","`"].concat(IS),wc=["'"].concat(PS),cm=["%","/","?",";","#"].concat(wc),dm=["/","?","#"],RS=255,fm=/^[+a-z0-9A-Z_-]{0,63}$/,MS=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kS={javascript:!0,"javascript:":!0},Ec={javascript:!0,"javascript:":!0},Pn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Tc=TS;function DS(r,e,t){if(r&&typeof r=="object"&&r instanceof Sr)return r;var i=new Sr;return i.parse(r,e,t),i}Sr.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(n);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var l=bS.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Tc.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=AS.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&Ec[u])&&(a=a.substr(2),this.slashes=!0)}if(!Ec[u]&&(c||u&&!Pn[u])){for(var d=-1,f=0;f<dm.length;f++){var p=a.indexOf(dm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var y,_;d===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",d),_!==-1&&(y=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(y)),d=-1;for(var f=0;f<cm.length;f++){var p=a.indexOf(cm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var v=this.hostname.split(/\./),f=0,m=v.length;f<m;f++){var x=v[f];if(x&&!x.match(fm)){for(var w="",S=0,T=x.length;S<T;S++)x.charCodeAt(S)>127?w+="x":w+=x[S];if(!w.match(fm)){var E=v.slice(0,f),I=v.slice(f+1),R=x.match(MS);R&&(E.push(R[1]),I.unshift(R[2])),I.length&&(a="/"+I.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>RS?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=SS.toASCII(this.hostname));var q=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+q,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!kS[h])for(var f=0,m=wc.length;f<m;f++){var A=wc[f];if(a.indexOf(A)!==-1){var k=encodeURIComponent(A);k===A&&(k=escape(A)),a=a.split(A).join(k)}}var G=a.indexOf("#");G!==-1&&(this.hash=a.substr(G),a=a.slice(0,G));var Z=a.indexOf("?");if(Z!==-1?(this.search=a.substr(Z),this.query=a.substr(Z+1),e&&(this.query=Tc.parse(this.query)),a=a.slice(0,Z)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Pn[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",$=this.search||"";this.path=q+$}return this.href=this.format(),this};Sr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Tc.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Pn[e])&&n!==!1?(n="//"+(n||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+n+t+o+i};Sr.prototype.resolve=function(r){return this.resolveObject(DS(r,!1,!0)).format()};Sr.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new Sr;e.parse(r,!1,!0),r=e}for(var t=new Sr,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=r[l])}return Pn[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Pn[r.protocol]){for(var u=Object.keys(r),h=0;h<u.length;h++){var c=u[h];t[c]=r[c]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Ec[r.protocol]){for(var m=(r.pathname||"").split("/");m.length&&!(r.host=m.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),t.pathname=m.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",y=r.host||r.pathname&&r.pathname.charAt(0)==="/",_=y||p||t.host&&r.pathname,g=_,v=t.pathname&&t.pathname.split("/")||[],m=r.pathname&&r.pathname.split("/")||[],x=t.protocol&&!Pn[t.protocol];if(x&&(t.hostname="",t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host=null),_=_&&(m[0]===""||v[0]==="")),y)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,v=m;else if(m.length)v||(v=[]),v.pop(),v=v.concat(m),t.search=r.search,t.query=r.query;else if(r.search!=null){if(x){t.host=v.shift(),t.hostname=t.host;var w=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;w&&(t.auth=w.shift(),t.hostname=w.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!v.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=v.slice(-1)[0],T=(t.host||r.host||v.length>1)&&(S==="."||S==="..")||S==="",E=0,I=v.length;I>=0;I--)S=v[I],S==="."?v.splice(I,1):S===".."?(v.splice(I,1),E++):E&&(v.splice(I,1),E--);if(!_&&!g)for(;E--;E)v.unshift("..");_&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),T&&v.join("/").substr(-1)!=="/"&&v.push("");var R=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(x){t.hostname=R?"":v.length?v.shift():"",t.host=t.hostname;var w=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;w&&(t.auth=w.shift(),t.hostname=w.shift(),t.host=t.hostname)}return _=_||t.host&&v.length,_&&!R&&v.unshift(""),v.length>0?t.pathname=v.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};Sr.prototype.parseHost=function(){var r=this.host,e=CS.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};const pm={};function ie(r,e,t=3){if(pm[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(i))),pm[e]=!0}function Rt(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function as(r){return r.split("?")[0].split("#")[0]}function NS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function FS(r,e,t){return r.replace(new RegExp(NS(e),"g"),t)}function BS(r,e){let t="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),n=a,s=0;continue}}else if(t.length===2||t.length===1){t="",i=0,n=a,s=0;continue}}}else t.length>0?t+=`/${r.slice(n+1,a)}`:t=r.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const $e={toPosix(r){return FS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Rt(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(Rt(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=as(this.toPosix(e??L.ADAPTER.getBaseUrl())),n=as(this.toPosix(t??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?$e.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(Rt(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const i=r.endsWith("/");return r=BS(r),r.length>0&&i&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return Rt(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];if(Rt(i),i.length>0)if(e===void 0)e=i;else{const n=r[t-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(Rt(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let i=-1,n=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!n){i=a;break}}else n=!1;return i===-1?t?"/":this.isUrl(o)?s+r:s:t&&i===1?"//":s+r.slice(0,i)},rootname(r){Rt(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){Rt(r),e&&Rt(e),r=as(this.toPosix(r));let t=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(t,i)},extname(r){Rt(r),r=as(this.toPosix(r));let e=-1,t=0,i=-1,n=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!n){t=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":r.slice(e,i)},parse(r){Rt(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=as(this.toPosix(r));let t=r.charCodeAt(0);const i=this.isAbsolute(r);let n;e.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,o=0,a=-1,l=!0,u=r.length-1,h=0;for(;u>=n;--u){if(t=r.charCodeAt(u),t===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),t===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&i?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Xu;async function OS(){return Xu??(Xu=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return lt.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return lt.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.deleteFramebuffer(i),r.deleteTexture(t),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?lt.PMA:lt.UNPACK})()),Xu}let Wu;function LS(){return typeof Wu>"u"&&(Wu=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!L.ADAPTER.getWebGLRenderingContext())return!1;const t=L.ADAPTER.createCanvas();let i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const n=!!((e=i==null?void 0:i.getContextAttributes())!=null&&e.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),Wu}var US={grad:.9,turn:360,rad:360/(2*Math.PI)},fr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},He=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},At=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},o0=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},mm=function(r){return{r:At(r.r,0,255),g:At(r.g,0,255),b:At(r.b,0,255),a:At(r.a)}},Yu=function(r){return{r:He(r.r),g:He(r.g),b:He(r.b),a:He(r.a,3)}},GS=/^#([0-9a-f]{3,8})$/i,Vo=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},a0=function(r){var e=r.r,t=r.g,i=r.b,n=r.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},l0=function(r){var e=r.h,t=r.s,i=r.v,n=r.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),u=s%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:n}},gm=function(r){return{h:o0(r.h),s:At(r.s,0,100),l:At(r.l,0,100),a:At(r.a)}},ym=function(r){return{h:He(r.h),s:He(r.s),l:He(r.l),a:He(r.a,3)}},vm=function(r){return l0((t=(e=r).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Ls=function(r){return{h:(e=a0(r)).h,s:(n=(200-(t=e.s))*(i=e.v)/100)>0&&n<200?t*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,t,i,n},HS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$S=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Sc={string:[[function(r){var e=GS.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?He(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?He(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=$S.exec(r)||jS.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:mm({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=HS.exec(r)||zS.exec(r);if(!e)return null;var t,i,n=gm({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(US[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return vm(n)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,i=r.b,n=r.a,s=n===void 0?1:n;return fr(e)&&fr(t)&&fr(i)?mm({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,i=r.l,n=r.a,s=n===void 0?1:n;if(!fr(e)||!fr(t)||!fr(i))return null;var o=gm({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return vm(o)},"hsl"],[function(r){var e=r.h,t=r.s,i=r.v,n=r.a,s=n===void 0?1:n;if(!fr(e)||!fr(t)||!fr(i))return null;var o=function(a){return{h:o0(a.h),s:At(a.s,0,100),v:At(a.v,0,100),a:At(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return l0(o)},"hsv"]]},_m=function(r,e){for(var t=0;t<e.length;t++){var i=e[t][0](r);if(i)return[i,e[t][1]]}return[null,void 0]},VS=function(r){return typeof r=="string"?_m(r.trim(),Sc.string):typeof r=="object"&&r!==null?_m(r,Sc.object):[null,void 0]},Ku=function(r,e){var t=Ls(r);return{h:t.h,s:At(t.s+100*e,0,100),l:t.l,a:t.a}},qu=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},xm=function(r,e){var t=Ls(r);return{h:t.h,s:t.s,l:At(t.l+100*e,0,100),a:t.a}},Ac=function(){function r(e){this.parsed=VS(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return He(qu(this.rgba),2)},r.prototype.isDark=function(){return qu(this.rgba)<.5},r.prototype.isLight=function(){return qu(this.rgba)>=.5},r.prototype.toHex=function(){return e=Yu(this.rgba),t=e.r,i=e.g,n=e.b,o=(s=e.a)<1?Vo(He(255*s)):"","#"+Vo(t)+Vo(i)+Vo(n)+o;var e,t,i,n,s,o},r.prototype.toRgb=function(){return Yu(this.rgba)},r.prototype.toRgbString=function(){return e=Yu(this.rgba),t=e.r,i=e.g,n=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+n+", "+s+")":"rgb("+t+", "+i+", "+n+")";var e,t,i,n,s},r.prototype.toHsl=function(){return ym(Ls(this.rgba))},r.prototype.toHslString=function(){return e=ym(Ls(this.rgba)),t=e.h,i=e.s,n=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+n+"%, "+s+")":"hsl("+t+", "+i+"%, "+n+"%)";var e,t,i,n,s},r.prototype.toHsv=function(){return e=a0(this.rgba),{h:He(e.h),s:He(e.s),v:He(e.v),a:He(e.a,3)};var e},r.prototype.invert=function(){return Kt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Kt(Ku(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Kt(Ku(this.rgba,-e))},r.prototype.grayscale=function(){return Kt(Ku(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Kt(xm(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Kt(xm(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Kt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):He(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=Ls(this.rgba);return typeof e=="number"?Kt({h:e,s:t.s,l:t.l,a:t.a}):He(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Kt(e).toHex()},r}(),Kt=function(r){return r instanceof Ac?r:new Ac(r)},wm=[],XS=function(r){r.forEach(function(e){wm.indexOf(e)<0&&(e(Ac,Sc),wm.push(e))})};function WS(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in t)i[t[n]]=n;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,d="black";if(!s.length)for(var f in t)s[f]=new r(t[f]).toRgb();for(var p in t){var y=(a=h,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));y<c&&(c=y,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}XS([WS]);const Ji=class Ca{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ca)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,s)=>n===t[s]);if(e!==null&&t!==null){const n=Object.keys(e),s=Object.keys(t);return n.length!==s.length?!1:n.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,n]=this._components;return{r:e,g:t,b:i,a:n}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,n]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[t,i,n]=this._components;return e[0]=t,e[1]=i,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,n,s]=Ca.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,n=n*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(n<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,n,s]=this._components;return e[0]=t,e[1]=i,e[2]=n,e[3]=s,e}normalize(e){let t,i,n,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,n=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,n,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,n,s=255]=e,t/=255,i/=255,n/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Ca.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Kt(e);o.isValid()&&({r:t,g:i,b:n,a:s}=o.rgba,t/=255,i/=255,n/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((n,s)=>{e[s]=Math.min(Math.max(n,t),i)}),e)}};Ji.shared=new Ji,Ji.temp=new Ji,Ji.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let me=Ji;function YS(r){return ie("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),me.shared.setValue(r).toHex()}function KS(r){return ie("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),me.shared.setValue(r).toNumber()}function qS(){const r=[],e=[];for(let i=0;i<32;i++)r[i]=i,e[i]=i;r[Q.NORMAL_NPM]=Q.NORMAL,r[Q.ADD_NPM]=Q.ADD,r[Q.SCREEN_NPM]=Q.SCREEN,e[Q.NORMAL]=Q.NORMAL_NPM,e[Q.ADD]=Q.ADD_NPM,e[Q.SCREEN]=Q.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const u0=qS();function h0(r,e){return u0[e?1:0][r]}function ZS(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,n=0;i<t;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function c0(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function ul(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Em(r){return!(r&r-1)&&!!r}function Tm(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Rn(r,e,t){const i=r.length;let n;if(e>=i||t===0)return;t=e+t>i?i-e:t;const s=i-t;for(n=e;n<s;++n)r[n]=r[n+t];r.length=s}function Vr(r){return r===0?0:r<0?-1:1}let QS=0;function Ui(){return++QS}const Cc=class{constructor(r,e,t,i){this.left=r,this.top=e,this.right=t,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Cc.EMPTY=new Cc(0,0,0,0);let Sm=Cc;const Am={},qt=Object.create(null),Dr=Object.create(null);class JS{constructor(e,t,i){this._canvas=L.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||L.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Cm(r,e,t){for(let i=0,n=4*t*e;i<e;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function bm(r,e,t,i,n){const s=4*e;for(let o=i,a=i*s+4*t;o<=n;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function eA(r){const{width:e,height:t}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,l=t-1;for(;o<t&&Cm(n,e,o);)++o;if(o===t)return Sm.EMPTY;for(;Cm(n,e,l);)--l;for(;bm(n,e,s,o,l);)++s;for(;bm(n,e,a,o,l);)--a;return++a,++l,new Sm(s,o,a,l)}function tA(r){const e=eA(r),{width:t,height:i}=e;let n=null;if(!e.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(e.left,e.top,t,i)}return{width:t,height:i,data:n}}function rA(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Pr(r,e=1){var i;const t=(i=L.RETINA_PREFIX)==null?void 0:i.exec(r);return t?parseFloat(t[1]):e}var B=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(B||{});const bc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Im=(r,e)=>bc(r).priority??e,V={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(bc).forEach(e=>{e.type.forEach(t=>{var i,n;return(n=(i=this._removeHandlers)[t])==null?void 0:n.call(i,e)})}),this},add(...r){return r.map(bc).forEach(e=>{e.type.forEach(t=>{var s,o;const i=this._addHandlers,n=this._queue;i[t]?(s=i[t])==null||s.call(i,e):(n[t]=n[t]||[],(o=n[t])==null||o.push(e))})}),this},handle(r,e,t){var o;const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=e,n[r]=t;const s=this._queue;return s[r]&&((o=s[r])==null||o.forEach(a=>e(a)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((n,s)=>Im(s,t)-Im(n,t)))},i=>{const n=e.indexOf(i.ref);n!==-1&&e.splice(n,1)})}};class Ic{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const iA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function nA(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function sA(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=iA.replace(/%forloop%/gi,nA(r));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const Zu=0,Qu=1,Ju=2,eh=3,th=4,rh=5;class cr{constructor(){this.data=0,this.blendMode=Q.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Zu)}set blend(e){!!(this.data&1<<Zu)!==e&&(this.data^=1<<Zu)}get offsets(){return!!(this.data&1<<Qu)}set offsets(e){!!(this.data&1<<Qu)!==e&&(this.data^=1<<Qu)}get culling(){return!!(this.data&1<<Ju)}set culling(e){!!(this.data&1<<Ju)!==e&&(this.data^=1<<Ju)}get depthTest(){return!!(this.data&1<<eh)}set depthTest(e){!!(this.data&1<<eh)!==e&&(this.data^=1<<eh)}get depthMask(){return!!(this.data&1<<rh)}set depthMask(e){!!(this.data&1<<rh)!==e&&(this.data^=1<<rh)}get clockwiseFrontFace(){return!!(this.data&1<<th)}set clockwiseFrontFace(e){!!(this.data&1<<th)!==e&&(this.data^=1<<th)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Q.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new cr;return e.depthTest=!1,e.blend=!0,e}}cr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Pc=[];function d0(r,e){if(!r)return null;let t="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(t=i[1].toLowerCase())}for(let i=Pc.length-1;i>=0;--i){const n=Pc[i];if(n.test&&n.test(r,t))return new n(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ht{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](e,t,i,n,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ht.prototype,{dispatch:{value:Ht.prototype.emit},run:{value:Ht.prototype.emit}});class oo{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Ht("setRealSize"),this.onUpdate=new Ht("update"),this.onError=new Ht("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Xl extends oo{constructor(e,t){const{width:i,height:n}=t||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,i){const n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lt.UNPACK);const s=t.realWidth,o=t.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(t.target,0,0,0,s,o,t.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const oA={scaleMode:_r.NEAREST,alphaMode:lt.NPM},Rc=class en extends mo{constructor(e=null,t=null){super(),t=Object.assign({},en.defaultOptions,t);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:h,type:c,target:d,resolution:f,resourceOptions:p}=t;e&&!(e instanceof oo)&&(e=d0(e,p),e.internal=!0),this.resolution=f||L.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=h,this.type=c,this.target=d,this.alphaMode=i,this.uid=Ui(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Em(this.realWidth)&&Em(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Dr[this.cacheId],delete qt[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),en.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=L.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Ui()}`}s=e._pixiId}let o=Dr[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new en(e,t),o.cacheId=s,en.addToCache(o,s)),o}static fromBuffer(e,t,i,n){e=e||new Float32Array(t*i*4);const s=new Xl(e,{width:t,height:i,...n==null?void 0:n.resourceOptions});let o,a;return e instanceof Float32Array?(o=N.RGBA,a=Y.FLOAT):e instanceof Int32Array?(o=N.RGBA_INTEGER,a=Y.INT):e instanceof Uint32Array?(o=N.RGBA_INTEGER,a=Y.UNSIGNED_INT):e instanceof Int16Array?(o=N.RGBA_INTEGER,a=Y.SHORT):e instanceof Uint16Array?(o=N.RGBA_INTEGER,a=Y.UNSIGNED_SHORT):e instanceof Int8Array?(o=N.RGBA,a=Y.BYTE):(o=N.RGBA,a=Y.UNSIGNED_BYTE),s.internal=!0,new en(s,Object.assign({},oA,{type:a,format:o},n))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Dr[t]&&Dr[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Dr[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Dr[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Dr[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Dr[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};Rc.defaultOptions={mipmap:hr.POW2,anisotropicLevel:0,scaleMode:_r.LINEAR,wrapMode:ti.CLAMP,alphaMode:lt.UNPACK,target:bn.TEXTURE_2D,format:N.RGBA,type:Y.UNSIGNED_BYTE},Rc._globalBatch=0;let J=Rc;class Mc{constructor(){this.texArray=null,this.blend=0,this.type=sr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let aA=0;class Re{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=aA++,this.disposeRunner=new Ht("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?lr.ELEMENT_ARRAY_BUFFER:lr.ARRAY_BUFFER}get index(){return this.type===lr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Re(e)}}class hl{constructor(e,t=0,i=!1,n=Y.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,i,n,s){return new hl(e,t,i,n,s)}}const lA={Float32Array,Uint32Array,Int32Array,Uint8Array};function uA(r,e){let t=0,i=0;const n={};for(let l=0;l<r.length;l++)i+=e[l],t+=r[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=e[l],h=r[l],c=c0(h);n[c]||(n[c]=new lA[c](s)),o=n[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*i+a,p=d%u;o[f+p]=h[d]}a+=u}return new Float32Array(s)}const Pm={5126:4,5123:2,5121:1};let hA=0;const cA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ni{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=hA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ht("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,n=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Re||(t instanceof Array&&(t=new Float32Array(t)),t=new Re(t));const u=e.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],t,i,n,s);return this}let h=this.buffers.indexOf(t);return h===-1&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new hl(h,i,n,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Re||(e instanceof Array&&(e=new Uint16Array(e)),e=new Re(e)),e.type=lr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],i=new Re;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*Pm[s.type]/4),s.buffer=0}for(i.data=uA(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ni;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new Re(this.buffers[t].data.slice(0));for(const t in this.attributes){const i=this.attributes[t];e.attributes[t]=new hl(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=lr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new ni,i=[],n=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new cA[c0(o.buffers[a].data)](n[a]),t.buffers[a]=new Re(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=lr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*Pm[d.type]/4)}for(let c=0;c<e.length;c++){const d=e[c].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+u]+=a;a+=e[c].buffers[h].data.length/l,u+=d.length}}return t}}class f0 extends ni{constructor(e=!1){super(),this._buffer=new Re(null,e,!1),this._indexBuffer=new Re(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Y.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Y.FLOAT).addAttribute("aColor",this._buffer,4,!0,Y.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Y.FLOAT).addIndex(this._indexBuffer)}}const cl=Math.PI*2,dA=180/Math.PI,fA=Math.PI/180;var Xe=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Xe||{});class ae{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new ae(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}ae.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Xo=[new ae,new ae,new ae,new ae];class ee{constructor(e=0,t=0,i=0,n=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(n),this.type=Xe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ee(0,0,0,0)}clone(){return new ee(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const E=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=E)return!1;const I=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>I}const i=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=i||o<=s)return!1;const a=Xo[0].set(e.left,e.top),l=Xo[1].set(e.left,e.bottom),u=Xo[2].set(e.right,e.top),h=Xo[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(t.a*t.d-t.b*t.c);if(c===0||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=i||Math.min(a.x,l.x,u.x,h.x)>=n||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*i+f*s,y=d*n+f*s,_=d*i+f*o,g=d*n+f*o;if(Math.max(p,y,_,g)<=d*a.x+f*a.y||Math.min(p,y,_,g)>=d*h.x+f*h.y)return!1;const v=c*(a.y-u.y),m=c*(u.x-a.x),x=v*i+m*s,w=v*n+m*s,S=v*i+m*o,T=v*n+m*o;return!(Math.max(x,w,S,T)<=v*a.x+m*a.y||Math.min(x,w,S,T)>=v*h.x+m*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=n,this.height=s-n,this}}ee.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Wl{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.radius=i,this.type=Xe.CIRC}clone(){return new Wl(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-e,s=this.y-t;return n*=n,s*=s,n+s<=i}getBounds(){return new ee(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Wl.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Yl{constructor(e=0,t=0,i=0,n=0){this.x=e,this.y=t,this.width=i,this.height=n,this.type=Xe.ELIP}clone(){return new Yl(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,n=(t-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new ee(this.x-this.width,this.y-this.height,this.width,this.height)}}Yl.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ri{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const i=[];for(let n=0,s=t.length;n<s;n++)i.push(t[n].x,t[n].y);t=i}this.points=t,this.type=Xe.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new Ri(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let i=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>t!=h>t&&e<(u-a)*((t-l)/(h-l))+a&&(i=!i)}return i}}Ri.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class Kl{constructor(e=0,t=0,i=0,n=0,s=20){this.x=e,this.y=t,this.width=i,this.height=n,this.radius=s,this.type=Xe.RREC}clone(){return new Kl(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let n=e-(this.x+i),s=t-(this.y+i);const o=i*i;if(n*n+s*s<=o||(n=e-(this.x+this.width-i),n*n+s*s<=o)||(s=t-(this.y+this.height-i),n*n+s*s<=o)||(n=e-(this.x+i),n*n+s*s<=o))return!0}return!1}}Kl.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ye{constructor(e=1,t=0,i=0,n=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,n,s,o){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new ae;const i=e.x,n=e.y;return t.x=this.a*i+this.c*n+this.tx,t.y=this.b*i+this.d*n+this.ty,t}applyInverse(e,t){t=t||new ae;const i=1/(this.a*this.d+this.c*-this.b),n=e.x,s=e.y;return t.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),n=this.a,s=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,n=this.c,s=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,t,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+n*this.c),this.ty=t-(i*this.b+n*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,n=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,t),u=Math.abs(a+l);return u<1e-5||Math.abs(cl-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(o.x*t+o.y*n),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,t=this.b,i=this.c,n=this.d,s=this.tx,o=e*n-t*i;return this.a=n/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ye;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new ye}static get TEMP_MATRIX(){return new ye}}ye.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const mi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],gi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],yi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],kc=[],p0=[],Wo=Math.sign;function pA(){for(let r=0;r<16;r++){const e=[];kc.push(e);for(let t=0;t<16;t++){const i=Wo(mi[r]*mi[t]+yi[r]*gi[t]),n=Wo(gi[r]*mi[t]+vi[r]*gi[t]),s=Wo(mi[r]*yi[t]+yi[r]*vi[t]),o=Wo(gi[r]*yi[t]+vi[r]*vi[t]);for(let a=0;a<16;a++)if(mi[a]===i&&gi[a]===n&&yi[a]===s&&vi[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new ye;e.set(mi[r],gi[r],yi[r],vi[r],0,0),p0.push(e)}}pA();const xe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>mi[r],uY:r=>gi[r],vX:r=>yi[r],vY:r=>vi[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>kc[r][e],sub:(r,e)=>kc[r][xe.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?xe.S:xe.N:Math.abs(e)*2<=Math.abs(r)?r>0?xe.E:xe.W:e>0?r>0?xe.SE:xe.SW:r>0?xe.NE:xe.NW,matrixAppendRotationInv:(r,e,t=0,i=0)=>{const n=p0[xe.inv(e)];n.tx=t,n.ty=i,r.append(n)}};class wr{constructor(e,t,i=0,n=0){this._x=i,this._y=n,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new wr(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}wr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Dc=class{constructor(){this.worldTransform=new ye,this.localTransform=new ye,this.position=new wr(this.onChange,this,0,0),this.scale=new wr(this.onChange,this,1,1),this.pivot=new wr(this.onChange,this,0,0),this.skew=new wr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,i=this.worldTransform;i.a=e.a*t.a+e.b*t.c,i.b=e.a*t.b+e.b*t.d,i.c=e.c*t.a+e.d*t.c,i.d=e.c*t.b+e.d*t.d,i.tx=e.tx*t.a+e.ty*t.c+t.tx,i.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};Dc.IDENTITY=new Dc;let hf=Dc;hf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var mA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,gA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Rm(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}function ih(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function m0(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ih(2*e);case"bvec3":return ih(3*e);case"bvec4":return ih(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Mn=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],yA={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},vA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function _A(r,e){var i;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=e[n];if(!s){((i=r.uniforms[n])==null?void 0:i.group)===!0&&(r.uniforms[n].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=r.uniforms[n];let a=!1;for(let l=0;l<Mn.length;l++)if(Mn[l].test(s,o)){t.push(Mn[l].code(n,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?yA:vA)[s.type].replace("location",`ud["${n}"].location`);t.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const g0={};let qi=g0;function xA(){if(qi===g0||qi!=null&&qi.isContextLost()){const r=L.ADAPTER.createCanvas();let e;L.PREFER_ENV>=$i.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),qi=e}return qi}let Yo;function wA(){if(!Yo){Yo=St.MEDIUM;const r=xA();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(Yo=e.precision?St.HIGH:St.MEDIUM)}}return Yo}function Mm(r,e){const t=r.getShaderSource(e).split(`
`).map((u,h)=>`${h}: ${u}`),i=r.getShaderInfoLog(e),n=i.split(`
`),s={},o=n.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function EA(r,e,t,i){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||Mm(r,t),r.getShaderParameter(i,r.COMPILE_STATUS)||Mm(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const TA={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function y0(r){return TA[r]}let Ko=null;const km={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function v0(r,e){if(!Ko){const t=Object.keys(km);Ko={};for(let i=0;i<t.length;++i){const n=t[i];Ko[r[n]]=km[n]}}return Ko[e]}function Dm(r,e,t){if(r.substring(0,9)!=="precision"){let i=e;return e===St.HIGH&&t!==St.HIGH&&(i=St.MEDIUM),`precision ${i} float;
${r}`}else if(t!==St.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let ls;function SA(){if(typeof ls=="boolean")return ls;try{ls=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ls=!1}return ls}let AA=0;const qo={},Nc=class tn{constructor(e,t,i="pixi-shader",n={}){this.extra={},this.id=AA++,this.vertexSrc=e||tn.defaultVertexSrc,this.fragmentSrc=t||tn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),qo[i]?(qo[i]++,i+=`-${qo[i]}`):qo[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Dm(this.vertexSrc,tn.defaultVertexPrecision,St.HIGH),this.fragmentSrc=Dm(this.fragmentSrc,tn.defaultFragmentPrecision,wA())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return gA}static get defaultFragmentSrc(){return mA}static from(e,t,i){const n=e+t;let s=Am[n];return s||(Am[n]=s=new tn(e,t,i)),s}};Nc.defaultVertexPrecision=St.HIGH,Nc.defaultFragmentPrecision=xr.apple.device?St.HIGH:St.MEDIUM;let Er=Nc,CA=0;class zt{constructor(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=CA++,this.static=!!t,this.ubo=!!i,e instanceof Re?(this.buffer=e,this.buffer.type=lr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Re(new Float32Array(1)),this.buffer.type=lr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,i){if(!this.ubo)this.uniforms[e]=new zt(t,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,i){return new zt(e,t,i)}static uboFrom(e,t){return new zt(e,t??!0,!0)}}class ur{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof zt?this.uniformGroup=t:this.uniformGroup=new zt(t):this.uniformGroup=new zt({}),this.disposeRunner=new Ht("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const i in t.uniforms){const n=t.uniforms[i];if(n.group===!0&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){const n=Er.from(e,t);return new ur(n,i)}}class bA{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=zt.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${e}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Er(this.vertexSrc,n)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new ye,default:this.defaultGroupCache[e]};return new ur(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class Fc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function IA(){return!xr.apple.device}function PA(r){let e=!0;const t=L.ADAPTER.getNavigator();if(xr.tablet||xr.phone){if(xr.apple.device){const i=t.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(xr.android.device){const i=t.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?r:4}class ql{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var RA=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,MA=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ys=class kt extends ql{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=f0,this.vertexSize=6,this.state=cr.for2d(),this.size=kt.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??PA(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??IA(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return ie("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return MA}static get defaultFragmentTemplate(){return RA}setShaderGenerator({vertex:e=kt.defaultVertexSrc,fragment:t=kt.defaultFragmentTemplate}={}){this.shaderGenerator=new bA(e,t)}contextChange(){const e=this.renderer.gl;L.PREFER_ENV===$i.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),kt.defaultMaxTextures),this.maxTextures=sA(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=kt,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new Mc);for(;t.length<n;)t.push(new Fc);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=kt._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++J._globalBatch,l=0,u=i[0],h=0;n.copyBoundTextures(s,t);for(let c=0;c<this._bufferSize;++c){const d=e[c];e[c]=null,d._batchEnabled!==a&&(u.count>=t&&(n.boundArray(u,s,a,t),this.buildDrawCalls(u,h,c),h=c,u=i[++l],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(n.boundArray(u,s,a,t),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(let c=0;c<s.length;c++)s[c]=null;J._globalBatch=a}buildDrawCalls(e,t,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=kt._drawCallPool;let u=this._dcIndex,h=this._aIndex,c=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(let f=t;f<i;++f){const p=n[f],y=p._texture.baseTexture,_=u0[y.alphaMode?1:0][p.blendMode];n[f]=null,t<f&&d.blend!==_&&(d.size=c-d.start,t=f,d=l[++u],d.texArray=e,d.start=c),this.packInterleavedGeometry(p,s,o,h,c),h+=p.vertexData.length/2*a,c+=p.indices.length,d.blend=_}t<i&&(d.size=c-d.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;kt.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,n=kt._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:u,start:h,blend:c}=n[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=c,i.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),kt.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=ul(Math.ceil(e/8)),i=Tm(t),n=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new Ic(n*this.vertexSize*4)),s}getIndexBuffer(e){const t=ul(Math.ceil(e/12)),i=Tm(t),n=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(e,t,i,n,s){const{uint32View:o,float32View:a}=t,l=n/this.vertexSize,u=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=me.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let y=0;y<c.length;y+=2)a[n++]=c[y],a[n++]=c[y+1],a[n++]=u[y],a[n++]=u[y+1],o[n++]=p,a[n++]=d;for(let y=0;y<h.length;y++)i[s++]=l+h[y]}};ys.defaultBatchSize=4096,ys.extension={name:"batch",type:B.RendererPlugin},ys._drawCallPool=[],ys._textureArrayPool=[];let _i=ys;V.add(_i);var kA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,DA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Bc=class vs extends ur{constructor(e,t,i){const n=Er.from(e||vs.defaultVertexSrc,t||vs.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=vs.defaultResolution,this.multisample=vs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new cr}apply(e,t,i,n,s){e.applyFilter(this,t,i,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return DA}static get defaultFragmentSrc(){return kA}};Bc.defaultResolution=1,Bc.defaultMultisample=ke.NONE;let rt=Bc;class dl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new me(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:i,backgroundAlpha:n}=e,s=i??t;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}dl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},dl.extension={type:[B.RendererSystem,B.CanvasRendererSystem],name:"background"};V.add(dl);class _0{constructor(e){this.renderer=e,this.emptyRenderer=new ql(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:i}=this.renderer.texture;for(let n=t-1;n>=0;--n)e[n]=i[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,t,i,n){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<n&&t[c]===h){o[u]=c;continue}for(;l<n;){const d=t[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,t[l]=h;break}}}destroy(){this.renderer=null}}_0.extension={type:B.RendererSystem,name:"batch"};V.add(_0);let Nm=0;class fl{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Nm++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Nm++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let i;if(L.PREFER_ENV>=$i.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}fl.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},fl.extension={type:B.RendererSystem,name:"context"};V.add(fl);class Oc{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ht("disposeFramebuffer"),this.multisample=ke.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new J(null,{scaleMode:_r.NEAREST,resolution:1,mipmap:hr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new J(null,{scaleMode:_r.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:hr.OFF,format:N.DEPTH_COMPONENT,type:Y.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(e/s,t/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class x0 extends J{constructor(e={}){if(typeof e=="number"){const t=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];e={width:t,height:i,scaleMode:n,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=ke.NONE),super(null,e),this.mipmap=hr.OFF,this.valid=!0,this._clear=new me([0,0,0,0]),this.framebuffer=new Oc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Rr extends oo{constructor(e){const t=e,i=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,n=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(i,n),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){i===void 0&&!t.startsWith("data:")?e.crossOrigin=rA(t):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,t,i,n){const s=e.gl,o=t.realWidth,a=t.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lt.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,i.type,n):(i.width=o,i.height=a,s.texImage2D(t.target,0,i.internalFormat,t.format,i.type,n)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(t,i),super.update()}dispose(){this.source=null}}class w0 extends Rr{constructor(e,t){if(t=t||{},typeof e=="string"){const i=new Image;Rr.crossOrigin(i,e,t.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??L.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>t(n,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===lt.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,i){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==t.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class cf{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){const n=t.width,s=t.height;if(i){const o=e.width/2/n,a=e.height/2/s,l=e.x/n+o,u=e.y/s+a;i=xe.add(i,xe.NW),this.x0=l+o*xe.uX(i),this.y0=u+a*xe.uY(i),i=xe.add(i,2),this.x1=l+o*xe.uX(i),this.y1=u+a*xe.uY(i),i=xe.add(i,2),this.x2=l+o*xe.uX(i),this.y2=u+a*xe.uY(i),i=xe.add(i,2),this.x3=l+o*xe.uX(i),this.y3=u+a*xe.uY(i)}else this.x0=e.x/n,this.y0=e.y/s,this.x1=(e.x+e.width)/n,this.y1=e.y/s,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/s,this.x3=e.x/n,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}cf.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Fm=new cf;function Zo(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class j extends mo{constructor(e,t,i,n,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new ee(0,0,1,1)),e instanceof j&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=Fm,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ae(o.x,o.y):new ae(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&qt[t.url]&&j.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,j.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),i=new j(this.baseTexture,!this.noFrame&&e,t,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===Fm&&(this._uvs=new cf),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=L.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let s=null;if(n)s=e;else if(e instanceof J){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Ui()}`,J.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Ui()}`}s=e._pixiId}let o=qt[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof J)?(t.resolution||(t.resolution=Pr(e)),o=new j(new J(e,t)),o.baseTexture.cacheId=s,J.addToCache(o.baseTexture,s),j.addToCache(o,s)):!o&&e instanceof J&&(o=new j(e),j.addToCache(o,s)),o}static fromURL(e,t){const i=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),n=j.from(e,Object.assign({resourceOptions:i},t),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(e,t,i,n){return new j(J.fromBuffer(e,t,i,n))}static fromLoader(e,t,i,n){const s=new J(e,Object.assign({scaleMode:J.defaultOptions.scaleMode,resolution:Pr(t)},n)),{resource:o}=s;o instanceof w0&&(o.url=t);const a=new j(s);return i||(i=t),J.addToCache(a.baseTexture,i),j.addToCache(a,i),i!==t&&(J.addToCache(a.baseTexture,t),j.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),qt[t]&&qt[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),qt[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=qt[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete qt[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)qt[e.textureCacheIds[t]]===e&&delete qt[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:i,width:n,height:s}=e,o=t+n>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${t} + ${n} = ${t+n} > ${this.baseTexture.width}`,h=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return j._EMPTY||(j._EMPTY=new j(new J),Zo(j._EMPTY),Zo(j._EMPTY.baseTexture)),j._EMPTY}static get WHITE(){if(!j._WHITE){const e=L.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),j._WHITE=new j(J.from(e)),Zo(j._WHITE),Zo(j._WHITE.baseTexture)}return j._WHITE}}class Vi extends j{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,i=!0){const n=this.baseTexture.resolution,s=Math.round(e*n)/n,o=Math.round(t*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Vi(new x0(e))}}class E0{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,i=ke.NONE){const n=new x0(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new Vi(n)}getOptimalTexture(e,t,i=1,n=ke.NONE){let s;e=Math.max(Math.ceil(e*i-1e-6),1),t=Math.max(Math.ceil(t*i-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=ul(e),t=ul(t),s=((e&65535)<<16|t&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,n)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(e,t,i){const n=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||ke.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const i=this.texturePool[t];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const i=this.texturePool[t];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}E0.SCREEN_KEY=-1;class NA extends ni{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class T0 extends ni{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Re(this.vertices),this.uvBuffer=new Re(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+t.width/e.width,this.uvs[3]=n,this.uvs[4]=i+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=i,this.uvs[7]=n+t.height/e.height,i=t.x,n=t.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+t.width,this.vertices[3]=n,this.vertices[4]=i+t.width,this.vertices[5]=n+t.height,this.vertices[6]=i,this.vertices[7]=n+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FA{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ke.NONE,this.sourceFrame=new ee,this.destinationFrame=new ee,this.bindingSourceFrame=new ee,this.bindingDestinationFrame=new ee,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Qo=[new ae,new ae,new ae,new ae],nh=new ye;class S0{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new E0,this.statePool=[],this.quad=new NA,this.quadUv=new T0,this.tempRect=new ee,this.activeState={},this.globalUniforms=new zt({outputFrame:new ee,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new FA,o=i.renderTexture;let a,l;if(o.current){const _=o.current;a=_.resolution,l=_.multisample}else a=i.resolution,l=i.multisample;let u=t[0].resolution||a,h=t[0].multisample??l,c=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let _=1;_<t.length;_++){const g=t[_];u=Math.min(u,g.resolution||a),h=Math.min(h,g.multisample??l),c=this.useMaxPadding?Math.max(c,g.padding):c+g.padding,d=d&&g.autoFit,f=f||(g.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=u,s.multisample=h,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const p=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(nh.copyFrom(i.projection.transform).invert(),p),d?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,y),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;const n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const u=n.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,l.renderTexture,rr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,t.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<i.length-1;++c){c===1&&t.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,t.resolution),h.filterFrame=u.filterFrame),i[c].apply(this,u,h,rr.CLEAR,t);const d=u;u=h,h=d}i[c].apply(this,u,l.renderTexture,rr.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=rr.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(t===rr.CLEAR||t===rr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,i,n){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(sr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(sr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=t._texture,o=e.set(n.width,0,0,n.height,i.x,i.y),a=t.worldTransform.copyTo(ye.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1,n=ke.NONE){return this.texturePool.getOptimalTexture(e,t,i,n)}getFilterTexture(e,t,i){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||ke.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const i=Qo[0],n=Qo[1],s=Qo[2],o=Qo[3];i.set(t.left,t.top),n.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(i,i),e.apply(n,n),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),u=Math.max(i.x,n.x,s.x,o.x),h=Math.max(i.y,n.y,s.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=h-l}roundFrame(e,t,i,n,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?nh.copyFrom(s):nh.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}S0.extension={type:B.RendererSystem,name:"filter"};V.add(S0);class BA{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ke.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const OA=new ee;class A0{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Oc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ee,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;L.PREFER_ENV===$i.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=n=>t.drawBuffersWEBGL(n):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,i=0){const{gl:n}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>i,a=t.height>>i,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>i,a=e.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,n){const s=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=i,s.height=n,this.gl.viewport(e,t,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,n,s=cc.COLOR|cc.DEPTH){const{gl:o}=this;o.clearColor(e,t,i,n),o.clear(s)}initFramebuffer(e){const{gl:t}=this,i=new BA(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];if(i.stencil){t.bindRenderbuffer(t.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const n=e.colorTextures;let s=n.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:i}=this,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):e.depth&&e.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):e.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,u,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,u,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,n.stencil)}else n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let i=ke.NONE;if(e<=1||t===null)return i;for(let n=0;n<t.length;n++)if(t[n]<=e){i=t[n];break}return i===1&&(i=ke.NONE),i}blit(e,t,i){const{current:n,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=n.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new Oc(n.width,n.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||(t=OA,t.width=n.width,t.height=n.height),i||(i=t);const u=t.width===i.width&&t.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const i=e.width,n=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,i,n):s.renderbufferStorage(s.RENDERBUFFER,l,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ee}destroy(){this.renderer=null}}A0.extension={type:B.RendererSystem,name:"framebuffer"};V.add(A0);const sh={5126:4,5123:2,5121:1};class C0{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;L.PREFER_ENV===$i.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=n=>i.bindVertexArrayOES(n),e.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),e.drawElementsInstanced=(n,s,o,a,l)=>i.drawElementsInstancedANGLE(n,s,o,a,l),e.drawArraysInstanced=(n,s,o,a)=>i.drawArraysInstancedANGLE(n,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:i}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const n=e.buffers[i];t.update(n)}}checkCompatibility(e,t){const i=e.attributes,n=t.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const i=e.attributes,n=t.attributeData,s=["g",e.id];for(const o in i)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(e,t,i=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=e.buffers,d=e.attributes,f={},p={};for(const y in c)f[y]=0,p[y]=0;for(const y in d)!d[y].size&&a.attributeData[y]?d[y].size=a.attributeData[y].size:d[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[y].buffer]+=d[y].size*sh[d[y].type];for(const y in d){const _=d[y],g=_.size;_.stride===void 0&&(f[_.buffer]===g*sh[_.type]?_.stride=0:_.stride=f[_.buffer]),_.start===void 0&&(_.start=p[_.buffer],p[_.buffer]+=g*sh[_.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let y=0;y<c.length;y++){const _=c[y];o.bind(_),i&&_._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=h,u[l]=h,n.bindVertexArray(null),o.unbind(lr.ARRAY_BUFFER),h}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&o.dispose(s[l],t))}if(!t){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)}activateVao(e,t){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[n];if(t.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=t.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,t||o.getSize(),n||1):s.drawArrays(e,i,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}C0.extension={type:B.RendererSystem,name:"geometry"};V.add(C0);const Bm=new ye;class b0{constructor(e,t){this._texture=e,this.mapCoord=new ye,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let n=0;n<e.length;n+=2){const s=e[n],o=e[n+1];t[n]=s*i.a+o*i.c+i.tx,t[n+1]=s*i.b+o*i.d+i.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=t.orig,s=t.trim;s&&(Bm.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Bm));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var LA=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,UA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class GA extends rt{constructor(e,t,i){let n=null;typeof e!="string"&&t===void 0&&i===void 0&&(n=e,e=void 0,t=void 0,i=void 0),super(e||UA,t||LA,i),this.maskSprite=n,this.maskMatrix=new ye}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,i,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new b0(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,i,n))}}class HA{constructor(e=null){this.type=Be.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=rt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Be.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class I0{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let i=t;if(!i.isMaskData){const s=this.maskDataPool.pop()||new HA;s.pooled=!0,s.maskObject=t,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Be.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Be.SCISSOR:this.renderer.scissor.push(i);break;case Be.STENCIL:this.renderer.stencil.push(i);break;case Be.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Be.COLOR:this.pushColorMask(i);break}i.type===Be.SPRITE&&this.maskStack.push(i)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Be.SCISSOR:this.renderer.scissor.pop(t);break;case Be.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Be.SPRITE:this.popSpriteMask(t);break;case Be.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Be.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=Be.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Be.SCISSOR:e.type=Be.STENCIL:e.type=Be.COLOR}pushSpriteMask(e){const{maskObject:t}=e,i=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new GA])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=t;const s=i.filterArea;i.filterArea=t.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}I0.extension={type:B.RendererSystem,name:"mask"};V.add(I0);class P0{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==i&&(n===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Om=new ye,Lm=[],R0=class ba extends P0{constructor(e){super(e),this.glConst=L.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:n}=this,s=n.renderTexture,o=i.getBounds(!0,Lm.pop()??new ee);this.roundFrameToPixels(o,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:n,d:s}=e;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||ba.isMatrixRotated(t.worldTransform)||ba.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,n,s){ba.isMatrixRotated(s)||(s=s?Om.copyFrom(s):Om.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Lm.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};R0.extension={type:B.RendererSystem,name:"scissor"};let zA=R0;V.add(zA);class M0 extends P0{constructor(e){super(e),this.glConst=L.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:i}=this.renderer,n=e._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(i._colorMask=n,t.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}M0.extension={type:B.RendererSystem,name:"stencil"};V.add(M0);class k0{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ie("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return ie("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return ie("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}k0.extension={type:[B.RendererSystem,B.CanvasRendererSystem],name:"_plugin"};V.add(k0);class D0{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ye,this.transform=null}update(e,t,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,i,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}D0.extension={type:B.RendererSystem,name:"projection"};V.add(D0);const $A=new hf,Um=new ee;class N0{constructor(e){this.renderer=e,this._tempMatrix=new ye}generateTexture(e,t){const{region:i,...n}=t||{},s=(i==null?void 0:i.copyTo(Um))||e.getLocalBounds(Um,!0),o=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),n.width=s.width,n.height=s.height,n.resolution=o,n.multisample??(n.multisample=this.renderer.multisample);const a=Vi.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=$A,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}N0.extension={type:[B.RendererSystem,B.CanvasRendererSystem],name:"textureGenerator"};V.add(N0);const ci=new ee,us=new ee;class F0{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ee,this.destinationFrame=new ee,this.viewportFrame=new ee}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,i){const n=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(ci.width=e.frame.width,ci.height=e.frame.height,t=ci),i||(us.x=e.frame.x,us.y=e.frame.y,us.width=t.width,us.height=t.height,i=us),o=s.framebuffer):(a=n.resolution,t||(ci.width=n._view.screen.width,ci.height=n._view.screen.height,t=ci),i||(i=ci,i.width=t.width,i.height=t.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=me.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:c}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,c)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}F0.extension={type:B.RendererSystem,name:"renderTexture"};V.add(F0);class jA{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function VA(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=e.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const o=v0(e,s.type),a={type:o,name:s.name,size:y0(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function XA(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=e.getActiveUniform(r,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=v0(e,s.type);t[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:m0(l,s.size)}}return t}function WA(r,e){var a;const t=Rm(r,r.VERTEX_SHADER,e.vertexSrc),i=Rm(r,r.FRAGMENT_SHADER,e.fragmentSrc),n=r.createProgram();r.attachShader(n,t),r.attachShader(n,i);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||EA(r,n,t,i),e.attributeData=VA(n,r),e.uniformData=XA(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,h)=>u>h?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,r.bindAttribLocation(n,u,l[u]);r.linkProgram(n)}r.deleteShader(t),r.deleteShader(i);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:r.getUniformLocation(n,l),value:m0(u.type,u.size)}}return new jA(n,o)}function YA(r,e,t,i,n){t.buffer.update(n)}const KA={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},B0={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function qA(r){const e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,i=0,n=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=B0[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,i%t!==0&&i<16){const a=i%t%16;i+=a,n+=a}i+t>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=t,i=t):(o.offset=n,i+=t,n+=t)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function ZA(r,e){const t=[];for(const i in r)e[i]&&t.push(e[i]);return t.sort((i,n)=>i.index-n.index),t}function QA(r,e){if(!r.autoManage)return{size:0,syncFunc:YA};const t=ZA(r.uniforms,e),{uboElements:i,size:n}=qA(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<Mn.length;c++){const d=Mn[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Mn[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=y0(a.data.type),d=Math.max(B0[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=KA[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let JA=0;const Jo={textureCount:0,uboCount:0};class O0{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=JA++}systemCheck(){if(!SA())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),t||(Jo.textureCount=0,Jo.uboCount=0,this.syncUniformGroup(e.uniformGroup,Jo)),n}setUniforms(e){const t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,t){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=_A(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const n=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),n(i.uniformData,e.uniforms,this.renderer,Jo,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])}createSyncBufferGroup(e,t,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=QA(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,i){const n=e.uniforms,s=[`${i}-`];for(const o in n)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,i=e.program,n=WA(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}O0.extension={type:B.RendererSystem,name:"shader"};V.add(O0);class pl{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}pl.defaultOptions={hello:!1},pl.extension={type:[B.RendererSystem,B.CanvasRendererSystem],name:"startup"};V.add(pl);function eC(r,e=[]){return e[Q.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.ADD]=[r.ONE,r.ONE],e[Q.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.NONE]=[0,0],e[Q.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[Q.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Q.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[Q.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[Q.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Q.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[Q.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[Q.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[Q.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[Q.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Q.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const tC=0,rC=1,iC=2,nC=3,sC=4,oC=5,L0=class Lc{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Q.NONE,this._blendEq=!1,this.map=[],this.map[tC]=this.setBlend,this.map[rC]=this.setOffset,this.map[iC]=this.setCullFace,this.map[nC]=this.setDepthTest,this.map[sC]=this.setFrontFace,this.map[oC]=this.setDepthMask,this.checks=[],this.defaultState=new cr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=eC(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Lc.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Lc.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};L0.extension={type:B.RendererSystem,name:"state"};let aC=L0;V.add(aC);class lC extends mo{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(n=>e.systems[n]),i=[...t,...Object.keys(e.systems).filter(n=>!t.includes(n))];for(const n of i)this.addSystem(e.systems[n],n)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Ht(t)})}addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(e,t){const i=Object.keys(this._systemsHash);e.items.forEach(n=>{const s=i.find(o=>this._systemsHash[o]===n);n[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const _s=class Ia{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Ia.defaultMaxIdle,this.checkCountMax=Ia.defaultCheckCountMax,this.mode=Ia.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==tf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let n=0;n<t.length;n++){const s=t[n];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[n++]=t[s]);t.length=n}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};_s.defaultMode=tf.AUTO,_s.defaultMaxIdle=60*60,_s.defaultCheckCountMax=60*10,_s.extension={type:B.RendererSystem,name:"textureGC"};let xi=_s;V.add(xi);class oh{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Y.UNSIGNED_BYTE,this.internalFormat=N.RGBA,this.samplerType=0}}function uC(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:O.FLOAT,[r.RGBA]:O.FLOAT,[r.ALPHA]:O.FLOAT,[r.LUMINANCE]:O.FLOAT,[r.LUMINANCE_ALPHA]:O.FLOAT,[r.R8]:O.FLOAT,[r.R8_SNORM]:O.FLOAT,[r.RG8]:O.FLOAT,[r.RG8_SNORM]:O.FLOAT,[r.RGB8]:O.FLOAT,[r.RGB8_SNORM]:O.FLOAT,[r.RGB565]:O.FLOAT,[r.RGBA4]:O.FLOAT,[r.RGB5_A1]:O.FLOAT,[r.RGBA8]:O.FLOAT,[r.RGBA8_SNORM]:O.FLOAT,[r.RGB10_A2]:O.FLOAT,[r.RGB10_A2UI]:O.FLOAT,[r.SRGB8]:O.FLOAT,[r.SRGB8_ALPHA8]:O.FLOAT,[r.R16F]:O.FLOAT,[r.RG16F]:O.FLOAT,[r.RGB16F]:O.FLOAT,[r.RGBA16F]:O.FLOAT,[r.R32F]:O.FLOAT,[r.RG32F]:O.FLOAT,[r.RGB32F]:O.FLOAT,[r.RGBA32F]:O.FLOAT,[r.R11F_G11F_B10F]:O.FLOAT,[r.RGB9_E5]:O.FLOAT,[r.R8I]:O.INT,[r.R8UI]:O.UINT,[r.R16I]:O.INT,[r.R16UI]:O.UINT,[r.R32I]:O.INT,[r.R32UI]:O.UINT,[r.RG8I]:O.INT,[r.RG8UI]:O.UINT,[r.RG16I]:O.INT,[r.RG16UI]:O.UINT,[r.RG32I]:O.INT,[r.RG32UI]:O.UINT,[r.RGB8I]:O.INT,[r.RGB8UI]:O.UINT,[r.RGB16I]:O.INT,[r.RGB16UI]:O.UINT,[r.RGB32I]:O.INT,[r.RGB32UI]:O.UINT,[r.RGBA8I]:O.INT,[r.RGBA8UI]:O.UINT,[r.RGBA16I]:O.INT,[r.RGBA16UI]:O.UINT,[r.RGBA32I]:O.INT,[r.RGBA32UI]:O.UINT,[r.DEPTH_COMPONENT16]:O.FLOAT,[r.DEPTH_COMPONENT24]:O.FLOAT,[r.DEPTH_COMPONENT32F]:O.FLOAT,[r.DEPTH_STENCIL]:O.FLOAT,[r.DEPTH24_STENCIL8]:O.FLOAT,[r.DEPTH32F_STENCIL8]:O.FLOAT}:e={[r.RGB]:O.FLOAT,[r.RGBA]:O.FLOAT,[r.ALPHA]:O.FLOAT,[r.LUMINANCE]:O.FLOAT,[r.LUMINANCE_ALPHA]:O.FLOAT,[r.DEPTH_STENCIL]:O.FLOAT},e}function hC(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Y.UNSIGNED_BYTE]:{[N.RGBA]:r.RGBA8,[N.RGB]:r.RGB8,[N.RG]:r.RG8,[N.RED]:r.R8,[N.RGBA_INTEGER]:r.RGBA8UI,[N.RGB_INTEGER]:r.RGB8UI,[N.RG_INTEGER]:r.RG8UI,[N.RED_INTEGER]:r.R8UI,[N.ALPHA]:r.ALPHA,[N.LUMINANCE]:r.LUMINANCE,[N.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Y.BYTE]:{[N.RGBA]:r.RGBA8_SNORM,[N.RGB]:r.RGB8_SNORM,[N.RG]:r.RG8_SNORM,[N.RED]:r.R8_SNORM,[N.RGBA_INTEGER]:r.RGBA8I,[N.RGB_INTEGER]:r.RGB8I,[N.RG_INTEGER]:r.RG8I,[N.RED_INTEGER]:r.R8I},[Y.UNSIGNED_SHORT]:{[N.RGBA_INTEGER]:r.RGBA16UI,[N.RGB_INTEGER]:r.RGB16UI,[N.RG_INTEGER]:r.RG16UI,[N.RED_INTEGER]:r.R16UI,[N.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Y.SHORT]:{[N.RGBA_INTEGER]:r.RGBA16I,[N.RGB_INTEGER]:r.RGB16I,[N.RG_INTEGER]:r.RG16I,[N.RED_INTEGER]:r.R16I},[Y.UNSIGNED_INT]:{[N.RGBA_INTEGER]:r.RGBA32UI,[N.RGB_INTEGER]:r.RGB32UI,[N.RG_INTEGER]:r.RG32UI,[N.RED_INTEGER]:r.R32UI,[N.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Y.INT]:{[N.RGBA_INTEGER]:r.RGBA32I,[N.RGB_INTEGER]:r.RGB32I,[N.RG_INTEGER]:r.RG32I,[N.RED_INTEGER]:r.R32I},[Y.FLOAT]:{[N.RGBA]:r.RGBA32F,[N.RGB]:r.RGB32F,[N.RG]:r.RG32F,[N.RED]:r.R32F,[N.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Y.HALF_FLOAT]:{[N.RGBA]:r.RGBA16F,[N.RGB]:r.RGB16F,[N.RG]:r.RG16F,[N.RED]:r.R16F},[Y.UNSIGNED_SHORT_5_6_5]:{[N.RGB]:r.RGB565},[Y.UNSIGNED_SHORT_4_4_4_4]:{[N.RGBA]:r.RGBA4},[Y.UNSIGNED_SHORT_5_5_5_1]:{[N.RGBA]:r.RGB5_A1},[Y.UNSIGNED_INT_2_10_10_10_REV]:{[N.RGBA]:r.RGB10_A2,[N.RGBA_INTEGER]:r.RGB10_A2UI},[Y.UNSIGNED_INT_10F_11F_11F_REV]:{[N.RGB]:r.R11F_G11F_B10F},[Y.UNSIGNED_INT_5_9_9_9_REV]:{[N.RGB]:r.RGB9_E5},[Y.UNSIGNED_INT_24_8]:{[N.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Y.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[N.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Y.UNSIGNED_BYTE]:{[N.RGBA]:r.RGBA,[N.RGB]:r.RGB,[N.ALPHA]:r.ALPHA,[N.LUMINANCE]:r.LUMINANCE,[N.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Y.UNSIGNED_SHORT_5_6_5]:{[N.RGB]:r.RGB},[Y.UNSIGNED_SHORT_4_4_4_4]:{[N.RGBA]:r.RGBA},[Y.UNSIGNED_SHORT_5_5_5_1]:{[N.RGBA]:r.RGBA}},e}class U0{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new J,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=hC(e),this.samplerTypes=uC(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new oh(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new oh(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,t=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[n]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[n].samplerType!==O.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new oh(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var i;t.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??O.FLOAT,this.webGLVersion===2&&e.type===Y.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var n;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const i=this.renderer;if(this.initTextureType(e,t),(n=e.resource)==null?void 0:n.upload(i,e,t))t.samplerType!==O.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=i.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const n=this.managedTextures.indexOf(e);n!==-1&&Rn(this.managedTextures,n,1)}}updateTextureStyle(e){var i;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===hr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=ti.CLAMP:t.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const i=this.gl;if(t.mipmap&&e.mipmap!==hr.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===_r.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===_r.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===_r.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===_r.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}U0.extension={type:B.RendererSystem,name:"texture"};V.add(U0);class G0{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,n=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:i,renderer:n}=this;t&&n.shader.bind(t),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:i,CONTEXT_UID:n}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[n]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(i.buffer.update(a),a._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const i=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}i&&(t||n.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}G0.extension={type:B.RendererSystem,name:"transformFeedback"};V.add(G0);class ml{constructor(e){this.renderer=e}init(e){this.screen=new ee(0,0,e.width,e.height),this.element=e.view||L.ADAPTER.createCanvas(),this.resolution=e.resolution||L.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ml.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ml.extension={type:[B.RendererSystem,B.CanvasRendererSystem],name:"_view"};V.add(ml);L.PREFER_ENV=$i.WEBGL2;L.STRICT_TEXTURE_CACHE=!1;L.RENDER_OPTIONS={...fl.defaultOptions,...dl.defaultOptions,...ml.defaultOptions,...pl.defaultOptions};Object.defineProperties(L,{WRAP_MODE:{get(){return J.defaultOptions.wrapMode},set(r){ie("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),J.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return J.defaultOptions.scaleMode},set(r){ie("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),J.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return J.defaultOptions.mipmap},set(r){ie("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),J.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return J.defaultOptions.anisotropicLevel},set(r){ie("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),J.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return ie("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),rt.defaultResolution},set(r){rt.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return ie("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),rt.defaultMultisample},set(r){rt.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return _i.defaultMaxTextures},set(r){ie("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),_i.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return _i.defaultBatchSize},set(r){ie("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),_i.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return _i.canUploadSameBuffer},set(r){ie("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),_i.canUploadSameBuffer=r}},GC_MODE:{get(){return xi.defaultMode},set(r){ie("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),xi.defaultMode=r}},GC_MAX_IDLE:{get(){return xi.defaultMaxIdle},set(r){ie("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),xi.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return xi.defaultCheckCountMax},set(r){ie("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),xi.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return Er.defaultVertexPrecision},set(r){ie("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Er.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return Er.defaultFragmentPrecision},set(r){ie("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Er.defaultFragmentPrecision=r}}});var Gi=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Gi||{});class ah{constructor(e,t=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=n}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const H0=class dt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ah(null,null,1/0),this.deltaMS=1/dt.targetFPMS,this.elapsedMS=1/dt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Gi.NORMAL){return this._addListener(new ah(e,t,i))}addOnce(e,t,i=Gi.NORMAL){return this._addListener(new ah(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*dt.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,dt.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!dt._shared){const e=dt._shared=new dt;e.autoStart=!0,e._protected=!0}return dt._shared}static get system(){if(!dt._system){const e=dt._system=new dt;e.autoStart=!0,e._protected=!0}return dt._system}};H0.targetFPMS=.06;let mt=H0;Object.defineProperties(L,{TARGET_FPMS:{get(){return mt.targetFPMS},set(r){ie("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),mt.targetFPMS=r}}});class z0{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Gi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?mt.shared:new mt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}z0.extension=B.Application;V.add(z0);const $0=[];V.handleByList(B.Renderer,$0);function cC(r){for(const e of $0)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var dC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,fC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const pC=dC,j0=fC;class V0{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=ke.HIGH?this.multisample=ke.HIGH:t>=ke.MEDIUM?this.multisample=ke.MEDIUM:t>=ke.LOW?this.multisample=ke.LOW:this.multisample=ke.NONE}destroy(){}}V0.extension={type:B.RendererSystem,name:"_multisample"};V.add(V0);class mC{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class X0{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,n=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,o.buffer,i*256,256)}update(e){const{gl:t,CONTEXT_UID:i}=this,n=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),i&&(t||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:i}=this;return e._glBuffers[t]=new mC(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}X0.extension={type:B.RendererSystem,name:"buffer"};V.add(X0);class W0{constructor(e){this.renderer=e}render(e,t){const i=this.renderer;let n,s,o,a;if(t&&(n=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(n||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),n&&(t.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}W0.extension={type:B.RendererSystem,name:"objectRenderer"};V.add(W0);const Pa=class Uc extends lC{constructor(e){super(),this.type=Rv.WEBGL,e=Object.assign({},L.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new zt({projectionMatrix:new ye},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Uc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(ie("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Uc.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:LS()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ie("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ie("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ie("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ie("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){ie("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return ie("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){ie("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return ie("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Pa.extension={type:B.Renderer,priority:1},Pa.__plugins={},Pa.__systems={};let df=Pa;V.handleByMap(B.RendererPlugin,df.__plugins);V.handleByMap(B.RendererSystem,df.__systems);V.add(df);class Y0 extends oo{constructor(e,t){const{width:i,height:n}=t||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new J;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof oo?this.addResourceAt(e[i],i):this.addResourceAt(d0(e[i],t),i))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:i}=this.items[0];return this.resize(t,i),this.update(),Promise.resolve(this)}),this._load}}class gC extends Y0{constructor(e,t){const{width:i,height:n}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:n}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=bn.TEXTURE_2D_ARRAY}upload(e,t,i){const{length:n,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,t.format,i.type,null);for(let l=0;l<n;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,i.type,u.resource.source))}return!0}}class yC extends Rr{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const K0=class xs extends Y0{constructor(e,t){const{width:i,height:n,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==xs.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:n});for(let a=0;a<xs.SIDES;a++)this.items[a].target=bn.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=bn.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=bn.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const n=this.itemDirtyIds;for(let s=0;s<xs.SIDES;s++){const o=this.items[s];(n[s]<o.dirtyId||i.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,i),n[s]=o.dirtyId):n[s]<-1&&(e.gl.texImage2D(o.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),n[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===xs.SIDES}};K0.SIDES=6;let vC=K0;class _n extends Rr{constructor(e,t){t=t||{};let i,n,s;typeof e=="string"?(i=_n.EMPTY,n=e,s=!0):(i=e,n=null,s=!1),super(i),this.url=n,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const i=await L.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===lt.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(i){if(this.destroyed)return;t(i),this.onError.emit(i)}}),this._load)}upload(e,t,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return _n._EMPTY=_n._EMPTY??L.ADAPTER.createCanvas(0,0),_n._EMPTY}}const Gc=class Ra extends Rr{constructor(e,t){t=t||{},super(L.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Ra.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Rr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*t,s=this._overrideHeight||this._overrideWidth/t*i),n=Math.round(n),s=Math.round(s);const o=this.source;o.width=n,o.height=s,o._pixiId=`canvas_${Ui()}`,o.getContext("2d").drawImage(e,0,0,t,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(e){const t=Ra.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ra.SVG_XML.test(e)}};Gc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Gc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Hc=Gc;class _C extends Rr{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const zc=class $c extends Rr{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");t.autoLoad!==!1&&i.setAttribute("preload","auto"),t.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),t.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),t.loop===!0&&i.setAttribute("loop",""),t.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];Rr.crossOrigin(i,n,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);l=l||$c.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),i.appendChild(o)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=mt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,i)=>{this.valid?t(this):(this._resolve=t,this._reject=i,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(mt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(mt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(mt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||$c.TYPES.includes(t)}};zc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],zc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let q0=zc;Pc.push(_n,w0,yC,q0,_C,Hc,Xl,vC,gC);class gl{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ee.EMPTY:(e=e||new ee(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:i,b:n,c:s,d:o,tx:a,ty:l}=e,u=i*t.x+s*t.y+a,h=n*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=t,this.minY=i,this.maxX=n,this.maxY=s}addFrame(e,t,i,n,s){this.addFrameMatrix(e.worldTransform,t,i,n,s)}addFrameMatrix(e,t,i,n,s){const o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,c=e.ty;let d=this.minX,f=this.minY,p=this.maxX,y=this.maxY,_=o*t+l*i+h,g=a*t+u*i+c;d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,y=g>y?g:y,_=o*n+l*i+h,g=a*n+u*i+c,d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,y=g>y?g:y,_=o*t+l*s+h,g=a*t+u*s+c,d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,y=g>y?g:y,_=o*n+l*s+h,g=a*n+u*s+c,d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,y=g>y?g:y,this.minX=d,this.minY=f,this.maxX=p,this.maxY=y}addVertexData(e,t,i){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<i;l+=2){const u=e[l],h=e[l+1];n=u<n?u:n,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,i,n){this.addVerticesMatrix(e.worldTransform,t,i,n)}addVerticesMatrix(e,t,i,n,s=0,o=s){const a=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,d=e.ty;let f=this.minX,p=this.minY,y=this.maxX,_=this.maxY;for(let g=i;g<n;g+=2){const v=t[g],m=t[g+1],x=a*v+u*m+c,w=h*m+l*v+d;f=Math.min(f,x-s),y=Math.max(y,x+s),p=Math.min(p,w-o),_=Math.max(_,w+o)}this.minX=f,this.minY=p,this.maxX=y,this.maxY=_}addBounds(e){const t=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const i=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const i=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,n,s,o){e-=s,t-=o,i+=s,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n}}class Ae extends mo{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new hf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new gl,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const n=t[i];Object.defineProperty(Ae.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ee),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ee),e=this._localBoundsRect),this._localBounds||(this._localBounds=new gl);const t=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,n){return t&&(e=t.toGlobal(e,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,i=1,n=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new xC),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*dA}set angle(e){this.transform.rotation=e*fA}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class xC extends Ae{constructor(){super(...arguments),this.sortDirty=null}}Ae.prototype.displayObjectUpdateTransform=Ae.prototype.updateTransform;const wC=new ye;function EC(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const Z0=class jc extends Ae{constructor(){super(),this.children=[],this.sortableChildren=jc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),n=this.getChildIndex(t);this.children[i]=t,this.children[n]=e,this.onChildrenChange(i<n?i:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);Rn(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,Rn(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Rn(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,n=t,s=n-i;let o;if(s>0&&s<=n){o=this.children.splice(i,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(EC),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let n=0,s=this.children.length;n<s;++n){const o=this.children[n];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==jc.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(n?(n=wC.copyFrom(n),n.prepend(s)):n=s),i&&t.intersects(i,n))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const n=t&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Be.NONE));if(n&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}n&&e.batch.flush(),i&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<i.length;++n)i[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};Z0.defaultSortableChildren=!1;let Qe=Z0;Qe.prototype.containerUpdateTransform=Qe.prototype.updateTransform;Object.defineProperties(L,{SORTABLE_CHILDREN:{get(){return Qe.defaultSortableChildren},set(r){ie("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Qe.defaultSortableChildren=r}}});const hs=new ae,TC=new Uint16Array([0,1,2,0,2,3]);class Kn extends Qe{constructor(e){super(),this._anchor=new wr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new me(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Q.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||j.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=TC,this.pluginName="batch",this.isSprite=!0,this._roundPixels=L.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Vr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Vr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this.vertexData,h=e.trim,c=e.orig,d=this._anchor;let f=0,p=0,y=0,_=0;if(h?(p=h.x-d._x*c.width,f=p+h.width,_=h.y-d._y*c.height,y=_+h.height):(p=-d._x*c.width,f=p+c.width,_=-d._y*c.height,y=_+c.height),u[0]=i*p+s*_+a,u[1]=o*_+n*p+l,u[2]=i*f+s*_+a,u[3]=o*_+n*f+l,u[4]=i*f+s*y+a,u[5]=o*y+n*f+l,u[6]=i*p+s*y+a,u[7]=o*y+n*p+l,this._roundPixels){const g=L.RESOLUTION;for(let v=0;v<u.length;++v)u[v]=Math.round(u[v]*g)/g}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,i=e.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-n._x*i.width,f=d+i.width,p=-n._y*i.height,y=p+i.height;if(t[0]=o*d+l*p+h,t[1]=u*p+a*d+c,t[2]=o*f+l*p+h,t[3]=u*p+a*f+c,t[4]=o*f+l*y+h,t[5]=u*y+a*f+c,t[6]=o*d+l*y+h,t[7]=u*y+a*d+c,this._roundPixels){const _=L.RESOLUTION;for(let g=0;g<t.length;++g)t[g]=Math.round(t[g]*_)/_}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new gl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ee),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,hs);const t=this._texture.orig.width,i=this._texture.orig.height,n=-t*this.anchor.x;let s=0;return hs.x>=n&&hs.x<n+t&&(s=-i*this.anchor.y,hs.y>=s&&hs.y<s+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const i=e instanceof j?e:j.from(e,t);return new Kn(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Vr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Vr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||j.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Q0=new ye;Ae.prototype._cacheAsBitmap=!1;Ae.prototype._cacheData=null;Ae.prototype._cacheAsBitmapResolution=null;Ae.prototype._cacheAsBitmapMultisample=null;class SC{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ae.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new SC),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ae.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Ae.prototype._initCachedDisplayObject=function(r){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new ee,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;t.pad(p)}const i=this.cacheAsBitmapResolution||r.resolution;t.ceil(i),t.width=Math.max(t.width,1/i),t.height=Math.max(t.height,1/i);const n=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=Vi.create({width:t.width,height:t.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${Ui()}`;this._cacheData.textureCacheId=u,J.addToCache(l.baseTexture,u),j.addToCache(l,u);const h=this.transform.localTransform.copyTo(Q0).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new Kn(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(t.x/t.width),c.anchor.y=-(t.y/t.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Ae.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Ae.prototype._initCachedDisplayObjectCanvas=function(r){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(new ee,!0),t=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,n=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=Vi.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${Ui()}`;this._cacheData.textureCacheId=a,J.addToCache(o.baseTexture,a),j.addToCache(o,a);const l=Q0;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new Kn(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ae.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ae.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ae.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,J.removeFromCache(this._cacheData.textureCacheId),j.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ae.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Ae.prototype.name=null;Qe.prototype.getChildByName=function(r,e){for(let t=0,i=this.children.length;t<i;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,i=this.children.length;t<i;t++){const n=this.children[t];if(!n.getChildByName)continue;const s=n.getChildByName(r,!0);if(s)return s}return null};Ae.prototype.getGlobalPosition=function(r=new ae,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var AC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class CC extends rt{constructor(e=1){super(pC,AC,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const bC={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},IC=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function PC(r){const e=bC[r],t=e.length;let i=IC,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}const RC=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function MC(r,e){const t=Math.ceil(r/2);let i=RC,n="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}class Vc extends rt{constructor(e,t=8,i=4,n=rt.defaultResolution,s=5){const o=MC(s,e),a=PC(s);super(o,a),this.horizontal=e,this.resolution=n,this._quality=0,this.quality=i,this.blur=t}apply(e,t,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/t.width):this.uniforms.strength=1/i.height*(i.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,i,n);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,rr.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,rr.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,n),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class kC extends rt{constructor(e=8,t=4,i=rt.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Vc(!0,e,t,i,n),this.blurYFilter=new Vc(!1,e,t,i,n),this.resolution=i,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,i,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,rr.CLEAR),this.blurYFilter.apply(e,a,i,n),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,i,n):this.blurXFilter.apply(e,t,i,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var DC=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Xc extends rt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(j0,DC,e),this.alpha=1}_loadMatrix(e,t=!1){let i=e;t&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}tint(e,t){const[i,n,s]=me.shared.setValue(e).toArray(),o=[i,0,0,0,0,0,n,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const i=Math.cos(e),n=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,u=o*(1-i)-a*n,h=o*(1-i)+a*n,c=o*(1-i)+a*n,d=i+o*(1-i),f=o*(1-i)-a*n,p=o*(1-i)-a*n,y=o*(1-i)+a*n,_=i+o*(1-i),g=[l,u,h,0,0,c,d,f,0,0,p,y,_,0,0,0,0,0,1,0];this._loadMatrix(g,t)}contrast(e,t){const i=(e||0)+1,n=-.5*(i-1),s=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const i=e*2/3+1,n=(i-1)*-.5,s=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,i,n,s){e=e||.2,t=t||.15,i=i||16770432,n=n||3375104;const o=me.shared,[a,l,u]=o.setValue(i).toArray(),[h,c,d]=o.setValue(n).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,h,c,d,t,0,a-h,l-c,u-d,0,0];this._loadMatrix(f,s)}night(e,t){e=e||.1;const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,t)}predator(e,t){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Xc.prototype.grayscale=Xc.prototype.greyscale;var NC=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,FC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class BC extends rt{constructor(e,t){const i=new ye;e.renderable=!1,super(FC,NC,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,t==null&&(t=20),this.scale=new ae(t,t)}apply(e,t,i,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,i,n)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var OC=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,LC=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class UC extends rt{constructor(){super(LC,OC)}}var GC=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class HC extends rt{constructor(e=.5,t=Math.random()){super(j0,GC,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const Gm={AlphaFilter:CC,BlurFilter:kC,BlurFilterPass:Vc,ColorMatrixFilter:Xc,DisplacementFilter:BC,FXAAFilter:UC,NoiseFilter:HC};Object.entries(Gm).forEach(([r,e])=>{Object.defineProperty(Gm,r,{get(){return ie("7.1.0",`filters.${r} has moved to ${r}`),e}})});class zC{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(mt.system.add(this.tickerUpdate,this,Gi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(mt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Hr=new zC;class _o{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=_o.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ae,this.page=new ae,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class yl extends _o{constructor(){super(...arguments),this.client=new ae,this.movement=new ae,this.offset=new ae,this.global=new ae,this.screen=new ae}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,n,s,o,a,l,u,h,c,d,f,p,y){throw new Error("Method not implemented.")}}class Dt extends yl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class kn extends yl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}kn.DOM_DELTA_PIXEL=0,kn.DOM_DELTA_LINE=1,kn.DOM_DELTA_PAGE=2;const $C=2048,jC=new ae,lh=new ae;class VC{constructor(e){this.dispatch=new mo,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,n)=>i.priority-n.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,n=t.length;i<n;i++)t[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Hr.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[i](this.rootTarget,this.rootTarget.eventMode,jC.set(e,t),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(t)?t:[t];for(let s=i.length-1;s>=0;s--)n.forEach(o=>{e.currentTarget=i[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let i=0;i<$C&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,n,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Hr.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const d=h[c],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,i,n,s,o||s(e,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,i)&&n(e,i)?u?[e]:[]:null}hitTestRecursive(e,t,i,n,s){if(this._interactivePrune(e)||s(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Hr.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const h=l[u],c=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,i,n,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const d=e.isInteractive();return(c.length>0||d)&&c.push(e),c}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&n(e,i)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var i;if(e.hitArea&&(e.worldTransform.applyInverse(t,lh),!e.hitArea.contains(lh.x,lh.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const i=`on${t}`;(o=(s=e.currentTarget)[i])==null||o.call(s,e);const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Dt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const n=t.button===2;this.dispatchEvent(t,n?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,u;if(!(e instanceof Dt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.overTargets);if(((l=n.overTargets)==null?void 0:l.length)>0&&s!==t.target){const h=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,h,s);if(this.dispatchEvent(c,"pointerout"),i&&this.dispatchEvent(c,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==t.target){const h=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(t,h);this.dispatchEvent(c,"pointerover"),i&&this.dispatchEvent(c,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(t,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=t.target)==null?void 0:u.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof Dt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Dt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Dt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=n.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof Dt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof kn)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const n=this.allocateEvent(Dt);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof t=="string"&&(n.type=t),n}createWheelEvent(e){const t=this.allocateEvent(kn);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(Dt);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Dt&&t instanceof Dt&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof yl&&t instanceof yl&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const i=e.currentTarget._events[t];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let n=0,s=i.length;n<s&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeListener(t,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}const XC=1,WC={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Wc=class Yc{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new VC(null),Hr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Dt(null),this.rootWheelEvent=new kn(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Yc.defaultEventFeatures},{set:(t,i,n)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),t[i]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,Yc._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,n=t.length;i<n;i++){const s=t[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Hr.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let s=0,o=n.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,n[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let i=0,n=t.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Hr.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Hr.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Hr.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*s,e.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,n=e.changedTouches.length;i<n;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=XC),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=WC[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Wc.extension={name:"events",type:[B.RendererSystem,B.CanvasRendererSystem]},Wc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Kc=Wc;V.add(Kc);function Hm(r){return r==="dynamic"||r==="static"}const YC={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Hm(Kc.defaultEventMode)},set interactive(r){ie("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Kc.defaultEventMode},set eventMode(r){this._internalInteractive=Hm(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,n=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;r=i?`${r}capture`:r;const a=typeof e=="function"?e:e.handleEvent,l=this;n&&n.addEventListener("abort",()=>{l.off(r,a,o)}),s?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,n=typeof e=="function"?void 0:e;r=i?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,n)},dispatchEvent(r){if(!(r instanceof _o))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ae.mixin(YC);const KC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ae.mixin(KC);const qC=9,ea=100,ZC=0,QC=0,zm=2,$m=1,JC=-1e3,eb=-1e3,tb=2;class J0{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(xr.tablet||xr.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${ea}px`,t.style.height=`${ea}px`,t.style.position="absolute",t.style.top=`${ZC}px`,t.style.left=`${QC}px`,t.style.zIndex=zm.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${$m}px`,e.style.height=`${$m}px`,e.style.position="absolute",e.style.top=`${JC}px`,e.style.left=`${eb}px`,e.style.zIndex=tb.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}update(){const e=performance.now();if(xr.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:i,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=n/o*l,h=s/a*l;let c=this.div;c.style.left=`${t}px`,c.style.top=`${i}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Rn(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const y=f.worldTransform;f.hitArea?(c.style.left=`${(y.tx+p.x*y.a)*u}px`,c.style.top=`${(y.ty+p.y*y.d)*h}px`,c.style.width=`${p.width*y.a*u}px`,c.style.height=`${p.height*y.d*h}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*u}px`,c.style.top=`${p.y*h}px`,c.style.width=`${p.width*u}px`,c.style.height=`${p.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${ea}px`,t.style.height=`${ea}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=zm.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:i}=e.target,n=this.renderer.events.rootBoundary,s=Object.assign(new _o(n),{target:i});n.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>n.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===qC&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}J0.extension={name:"accessibility",type:[B.RendererPlugin,B.CanvasRendererPlugin]};V.add(J0);const e_=class qc{constructor(e){this.stage=new Qe,e=Object.assign({forceCanvas:!1},e),this.renderer=cC(e),qc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const i=qc._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};e_._plugins=[];let t_=e_;V.handleByList(B.Application,t_._plugins);class r_{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;t=n,i=s}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}r_.extension=B.Application;V.add(r_);const jm={loader:B.LoadParser,resolver:B.ResolveParser,cache:B.CacheParser,detection:B.DetectionParser};V.handle(B.Asset,r=>{const e=r.ref;Object.entries(jm).filter(([t])=>!!e[t]).forEach(([t,i])=>V.add(Object.assign(e[t],{extension:e[t].extension??i})))},r=>{const e=r.ref;Object.keys(jm).filter(t=>!!e[t]).forEach(t=>V.remove(e[t]))});class rb{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function qn(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function hi(r,e){const t=r.split("?")[0],i=$e.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const Lt=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(i=>typeof i=="string"||t?e(i):i):r),Zc=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function i_(r,e,t,i,n){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?i_(r.replace(i[t],a),e,t+1,i,n):n.push(r.replace(i[t],a))}}function ib(r){const e=/\{(.*?)\}/g,t=r.match(e),i=[];if(t){const n=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),i_(r,n,0,t,i)}else i.push(r);return i}const vl=r=>!Array.isArray(r);class nb{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=Lt(e);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){n=l.getCacheableAssets(i,t);break}}n||(n={},i.forEach(a=>{n[a]=t}));const s=Object.keys(n),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{const l=n?n[a]:t;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),t instanceof j){const a=t;i.forEach(l=>{a.baseTexture!==j.EMPTY.baseTexture&&J.addToCache(a.baseTexture,l),j.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Ei=new nb;class sb{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let n=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,t,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(e,t,this),i.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,n,t,this))&&(n=await u.parse(n,t,this)||n,i.parser=u)}return n})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0;const n={},s=vl(e),o=Lt(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const h=$e.toAbsolute(u.src);if(!n[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),n[u.src]=await this.promiseCache[h].promise,t&&t(++i/a)}catch(c){throw delete this.promiseCache[h],delete n[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?n[o[0].src]:n}async unload(e){const t=Lt(e,i=>({alias:[i],src:i})).map(async i=>{var o,a;const n=$e.toAbsolute(i.src),s=this.promiseCache[n];if(s){const l=await s.promise;delete this.promiseCache[n],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var jt=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(jt||{});const ob=".json",ab="application/json",lb={extension:{type:B.LoadParser,priority:jt.Low},name:"loadJson",test(r){return qn(r,ab)||hi(r,ob)},async load(r){return await(await L.ADAPTER.fetch(r)).json()}};V.add(lb);const ub=".txt",hb="text/plain",cb={name:"loadTxt",extension:{type:B.LoadParser,priority:jt.Low},test(r){return qn(r,hb)||hi(r,ub)},async load(r){return await(await L.ADAPTER.fetch(r)).text()}};V.add(cb);const db=["normal","bold","100","200","300","400","500","600","700","800","900"],fb=[".ttf",".otf",".woff",".woff2"],pb=["font/ttf","font/otf","font/woff","font/woff2"],mb=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function gb(r){const e=$e.extname(r),t=$e.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=t.length>0;for(const s of t)if(!s.match(mb)){i=!1;break}let n=t.join(" ");return i||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const yb=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function vb(r){return yb.test(r)?r:encodeURI(r)}const _b={extension:{type:B.LoadParser,priority:jt.Low},name:"loadWebFont",test(r){return qn(r,pb)||hi(r,fb)},async load(r,e){var i,n,s;const t=L.ADAPTER.getFontFaceSet();if(t){const o=[],a=((i=e.data)==null?void 0:i.family)??gb(r),l=((s=(n=e.data)==null?void 0:n.weights)==null?void 0:s.filter(h=>db.includes(h)))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${vb(r)})`,{...u,weight:c});await d.load(),t.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>L.ADAPTER.getFontFaceSet().delete(e))}};V.add(_b);const xb=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Dn=null,Qc=class{constructor(){Dn||(Dn=URL.createObjectURL(new Blob([xb],{type:"application/javascript"}))),this.worker=new Worker(Dn)}};Qc.revokeObjectURL=function(){Dn&&(URL.revokeObjectURL(Dn),Dn=null)};const wb=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Nn=null;class n_{constructor(){Nn||(Nn=URL.createObjectURL(new Blob([wb],{type:"application/javascript"}))),this.worker=new Worker(Nn)}}n_.revokeObjectURL=function(){Nn&&(URL.revokeObjectURL(Nn),Nn=null)};let Vm=0,uh;class Eb{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Qc;t.addEventListener("message",i=>{t.terminate(),Qc.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){uh===void 0&&(uh=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<uh&&(this._createdWorkers++,e=new n_().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:e,arguments:t,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),i=t.id;this.resolveHash[Vm]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Vm++,id:i})}}const Xm=new Eb;function xo(r,e,t){r.resource.internal=!0;const i=new j(r),n=()=>{delete e.promiseCache[t],Ei.has(t)&&Ei.remove(t)};return i.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),i}const Tb=[".jpeg",".jpg",".png",".webp",".avif"],Sb=["image/jpeg","image/png","image/webp","image/avif"];async function Ab(r){const e=await L.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Zl={name:"loadTextures",extension:{type:B.LoadParser,priority:jt.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return qn(r,Sb)||hi(r,Tb)},async load(r,e,t){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;i?this.config.preferWorkers&&await Xm.isImageBitmapSupported()?n=await Xm.loadImageBitmap(r):n=await Ab(r):n=await new Promise((l,u)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=r,h.complete?l(h):(h.onload=()=>l(h),h.onerror=c=>u(c))});const s={...e.data};s.resolution??(s.resolution=Pr(r)),i&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new J(n,s);return o.resource.src=r,xo(o,t,r)},unload(r){r.destroy(!0)}};V.add(Zl);const Cb=".svg",bb="image/svg+xml",Ib={extension:{type:B.LoadParser,priority:jt.High},name:"loadSVG",test(r){return qn(r,bb)||hi(r,Cb)},async testParse(r){return Hc.test(r)},async parse(r,e,t){var s;const i=new Hc(r,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await i.load();const n=new J(i,{resolution:Pr(r),...e==null?void 0:e.data});return n.resource.src=e.src,xo(n,t,e.src)},async load(r,e){return(await L.ADAPTER.fetch(r)).text()},unload:Zl.unload};V.add(Ib);const Pb=[".mp4",".m4v",".webm",".ogv"],Rb=["video/mp4","video/webm","video/ogg"],Mb={name:"loadVideo",extension:{type:B.LoadParser,priority:jt.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return qn(r,Rb)||hi(r,Pb)},async load(r,e,t){var o;let i;const n=await(await L.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(n);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new q0(s,a);await l.load();const u=new J(l,{alphaMode:await OS(),resolution:Pr(r),...e==null?void 0:e.data});u.resource.src=r,i=xo(u,t,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return i},unload(r){r.destroy(!0)}};V.add(Mb);class kb{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){const{alias:t,name:i,src:n,srcs:s}=e;return Lt(t||i||n||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];Array.isArray(t)?t.forEach(n=>{const s=n.src??n.srcs,o=n.alias??n.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);i.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(e,u));i.push(...l),a=[...o,...l]}this.add({...n,alias:a,src:s})}):Object.keys(t).forEach(n=>{const s=[n,this._createBundleAssetId(e,n)];if(typeof t[n]=="string")this.add({alias:s,src:t[n]});else if(Array.isArray(t[n]))this.add({alias:s,src:t[n]});else{const o=t[n],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}i.push(...s)}),this._bundles[e]=i}add(e,t,i,n,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(ie("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:i,format:n,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Lt(o).forEach(l=>{const{src:u,srcs:h}=l;let{data:c,format:d,loadParser:f}=l;const p=Lt(u||h).map(g=>typeof g=="string"?ib(g):Array.isArray(g)?g:[g]),y=this.getAlias(l);Array.isArray(y)?y.forEach(a):a(y);const _=[];p.forEach(g=>{g.forEach(v=>{let m={};if(typeof v!="object"){m.src=v;for(let x=0;x<this._parsers.length;x++){const w=this._parsers[x];if(w.test(v)){m=w.parse(v);break}}}else c=v.data??c,d=v.format??d,f=v.loadParser??f,m={...m,...v};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this.buildResolvedAsset(m,{aliases:y,data:c,format:d,loadParser:f}),_.push(m)})}),y.forEach(g=>{this._assetMap[g]=_})})}resolveBundle(e){const t=vl(e);e=Lt(e);const i={};return e.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(n,l)]=u}i[n]=a}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const i={};for(const n in t)i[n]=t[n].src;return i}return t.src}resolve(e){const t=vl(e);e=Lt(e);const i={};return e.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[n]=s[0]??o}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:i,data:n,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=$e.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...n||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??$e.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class Db{constructor(){this._detections=[],this._initialized=!1,this.resolver=new kb,this.loader=new sb,this.cache=Ei,this._backgroundLoader=new rb(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,i=typeof t=="number"?[t]:t,n=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,i,n,s){this.resolver.add(e,t,i,n,s)}async load(e,t){this._initialized||await this.init();const i=vl(e),n=Lt(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,t);return i?o[n[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const n=this.resolver.resolveBundle(e),s={},o=Object.keys(n);let a=0,l=0;const u=()=>{t==null||t(++a/l)},h=o.map(c=>{const d=n[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ei.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=Ei.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(i,t);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[n[l]]=u,Ei.set(h,u)}),o}async unload(e){this._initialized||await this.init();const t=Lt(e).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Lt(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(n=>this._unloadFromResolved(t[n]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(i=>{Ei.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,n)=>t.indexOf(i)===n),t}get detections(){return this._detections}get preferWorkers(){return Zl.config.preferWorkers}set preferWorkers(e){ie("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}}const ta=new Db;V.handleByList(B.LoadParser,ta.loader.parsers).handleByList(B.ResolveParser,ta.resolver.parsers).handleByList(B.CacheParser,ta.cache.parsers).handleByList(B.DetectionParser,ta.detections);const Nb={extension:B.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof j),getCacheableAssets:(r,e)=>{const t={};return r.forEach(i=>{e.forEach((n,s)=>{t[i+(s===0?"":s+1)]=n})}),t}};V.add(Nb);async function s_(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const Fb={extension:{type:B.DetectionParser,priority:1},test:async()=>s_("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};V.add(Fb);const Bb={extension:{type:B.DetectionParser,priority:0},test:async()=>s_("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};V.add(Bb);const Wm=["png","jpg","jpeg"],Ob={extension:{type:B.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...Wm],remove:async r=>r.filter(e=>!Wm.includes(e))};V.add(Ob);const Lb="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ff(r){return Lb?!1:document.createElement("video").canPlayType(r)!==""}const Ub={extension:{type:B.DetectionParser,priority:0},test:async()=>ff("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};V.add(Ub);const Gb={extension:{type:B.DetectionParser,priority:0},test:async()=>ff("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};V.add(Gb);const Hb={extension:{type:B.DetectionParser,priority:0},test:async()=>ff("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};V.add(Hb);const zb={extension:B.ResolveParser,test:Zl.test,parse:r=>{var e;return{resolution:parseFloat(((e=L.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:$e.extname(r).slice(1),src:r}}};V.add(zb);var je=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(je||{});const _l={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Zt,rn;function Ym(){rn={bptc:Zt.getExtension("EXT_texture_compression_bptc"),astc:Zt.getExtension("WEBGL_compressed_texture_astc"),etc:Zt.getExtension("WEBGL_compressed_texture_etc"),s3tc:Zt.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Zt.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Zt.getExtension("WEBGL_compressed_texture_pvrtc")||Zt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Zt.getExtension("WEBGL_compressed_texture_etc1"),atc:Zt.getExtension("WEBGL_compressed_texture_atc")}}const $b={extension:{type:B.DetectionParser,priority:2},test:async()=>{const r=L.ADAPTER.createCanvas().getContext("webgl");return r?(Zt=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{rn||Ym();const e=[];for(const t in rn)rn[t]&&e.push(t);return[...e,...r]},remove:async r=>(rn||Ym(),r.filter(e=>!(e in rn)))};V.add($b);class jb extends Xl{constructor(e,t={width:1,height:1,autoLoad:!0}){let i,n;typeof e=="string"?(i=e,n=new Uint8Array):(i=null,n=e),super(n,t),this.origin=i,this.buffer=n?new Ic(n):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Ic(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Mi extends jb{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=Mi._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||Mi._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,i){const n=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:h}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,l,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=Mi._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,i,n,s,o,a){const l=new Array(i);let u=e.byteOffset,h=o,c=a,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*_l[t];for(let y=0;y<i;y++)l[y]={levelID:y,levelWidth:i>1?h:d,levelHeight:i>1?c:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,h=h>>1||1,c=c>>1||1,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*_l[t];return l}}const hh=4,ra=124,Vb=32,Km=20,Xb=542327876,ia={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Wb={FOURCC:2},na={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},Yb=1,Kb=2,qb=4,Zb=64,Qb=512,Jb=131072,eI=827611204,tI=861165636,rI=894720068,iI=808540228,nI=4,sI={[eI]:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[tI]:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[rI]:je.COMPRESSED_RGBA_S3TC_DXT5_EXT},oI={70:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:je.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:je.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:je.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:je.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:je.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:je.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function aI(r){const e=new Uint32Array(r);if(e[0]!==Xb)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,ra/Uint32Array.BYTES_PER_ELEMENT),i=t[ia.HEIGHT],n=t[ia.WIDTH],s=t[ia.MIPMAP_COUNT],o=new Uint32Array(r,ia.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Vb/Uint32Array.BYTES_PER_ELEMENT),a=o[Yb];if(a&qb){const l=o[Wb.FOURCC];if(l!==iI){const v=sI[l],m=hh+ra,x=new Uint8Array(r,m);return[new Mi(x,{format:v,width:n,height:i,levels:s})]}const u=hh+ra,h=new Uint32Array(e.buffer,u,Km/Uint32Array.BYTES_PER_ELEMENT),c=h[na.DXGI_FORMAT],d=h[na.RESOURCE_DIMENSION],f=h[na.MISC_FLAG],p=h[na.ARRAY_SIZE],y=oI[c];if(y===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(f===nI)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,g=hh+ra+Km;if(p===1)_.push(new Uint8Array(r,g));else{const v=_l[y];let m=0,x=n,w=i;for(let T=0;T<s;T++){const E=Math.max(1,x+3&-4),I=Math.max(1,w+3&-4),R=E*I*v;m+=R,x=x>>>1,w=w>>>1}let S=g;for(let T=0;T<p;T++)_.push(new Uint8Array(r,S,m)),S+=m}return _.map(v=>new Mi(v,{format:y,width:n,height:i,levels:s}))}throw a&Zb?new Error("DDSParser does not support uncompressed texture data."):a&Qb?new Error("DDSParser does not supported YUV uncompressed texture data."):a&Jb?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&Kb?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const qm=[171,75,84,88,32,49,49,187,13,10,26,10],lI=67305985,Mt={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Jc=64,Zm={[Y.UNSIGNED_BYTE]:1,[Y.UNSIGNED_SHORT]:2,[Y.INT]:4,[Y.UNSIGNED_INT]:4,[Y.FLOAT]:4,[Y.HALF_FLOAT]:8},uI={[N.RGBA]:4,[N.RGB]:3,[N.RG]:2,[N.RED]:1,[N.LUMINANCE]:1,[N.LUMINANCE_ALPHA]:2,[N.ALPHA]:1},hI={[Y.UNSIGNED_SHORT_4_4_4_4]:2,[Y.UNSIGNED_SHORT_5_5_5_1]:2,[Y.UNSIGNED_SHORT_5_6_5]:2};function cI(r,e,t=!1){const i=new DataView(e);if(!dI(r,i))return null;const n=i.getUint32(Mt.ENDIANNESS,!0)===lI,s=i.getUint32(Mt.GL_TYPE,n),o=i.getUint32(Mt.GL_FORMAT,n),a=i.getUint32(Mt.GL_INTERNAL_FORMAT,n),l=i.getUint32(Mt.PIXEL_WIDTH,n),u=i.getUint32(Mt.PIXEL_HEIGHT,n)||1,h=i.getUint32(Mt.PIXEL_DEPTH,n)||1,c=i.getUint32(Mt.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=i.getUint32(Mt.NUMBER_OF_FACES,n),f=i.getUint32(Mt.NUMBER_OF_MIPMAP_LEVELS,n),p=i.getUint32(Mt.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const y=4,_=4,g=l+3&-4,v=u+3&-4,m=new Array(c);let x=l*u;s===0&&(x=g*v);let w;if(s!==0?Zm[s]?w=Zm[s]*uI[o]:w=hI[s]:w=_l[a],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const S=t?pI(i,p,n):null;let T=x*w,E=l,I=u,R=g,q=v,F=Jc+p;for(let A=0;A<f;A++){const k=i.getUint32(F,n);let G=F+4;for(let Z=0;Z<c;Z++){let $=m[Z];$||($=m[Z]=new Array(f)),$[A]={levelID:A,levelWidth:f>1||s!==0?E:R,levelHeight:f>1||s!==0?I:q,levelBuffer:new Uint8Array(e,G,T)},G+=T}F+=k+4,F=F%4!==0?F+4-F%4:F,E=E>>1||1,I=I>>1||1,R=E+y-1&-4,q=I+_-1&-4,T=R*q*w}return s!==0?{uncompressed:m.map(A=>{let k=A[0].levelBuffer,G=!1;return s===Y.FLOAT?k=new Float32Array(A[0].levelBuffer.buffer,A[0].levelBuffer.byteOffset,A[0].levelBuffer.byteLength/4):s===Y.UNSIGNED_INT?(G=!0,k=new Uint32Array(A[0].levelBuffer.buffer,A[0].levelBuffer.byteOffset,A[0].levelBuffer.byteLength/4)):s===Y.INT&&(G=!0,k=new Int32Array(A[0].levelBuffer.buffer,A[0].levelBuffer.byteOffset,A[0].levelBuffer.byteLength/4)),{resource:new Xl(k,{width:A[0].levelWidth,height:A[0].levelHeight}),type:s,format:G?fI(o):o}}),kvData:S}:{compressed:m.map(A=>new Mi(null,{format:a,width:l,height:u,levels:f,levelBuffers:A})),kvData:S}}function dI(r,e){for(let t=0;t<qm.length;t++)if(e.getUint8(t)!==qm[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function fI(r){switch(r){case N.RGBA:return N.RGBA_INTEGER;case N.RGB:return N.RGB_INTEGER;case N.RG:return N.RG_INTEGER;case N.RED:return N.RED_INTEGER;default:return r}}function pI(r,e,t){const i=new Map;let n=0;for(;n<e;){const s=r.getUint32(Jc+n,t),o=Jc+n+4,a=3-(s+3)%4;if(s===0||s>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),h=new DataView(r.buffer,o+l+1,s-l-1);i.set(u,h),n+=4+s+a}return i}const mI={extension:{type:B.LoadParser,priority:jt.High},name:"loadDDS",test(r){return hi(r,".dds")},async load(r,e,t){const i=await(await L.ADAPTER.fetch(r)).arrayBuffer(),n=aI(i).map(s=>{const o=new J(s,{mipmap:hr.OFF,alphaMode:lt.NO_PREMULTIPLIED_ALPHA,resolution:Pr(r),...e.data});return xo(o,t,r)});return n.length===1?n[0]:n},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};V.add(mI);const gI={extension:{type:B.LoadParser,priority:jt.High},name:"loadKTX",test(r){return hi(r,".ktx")},async load(r,e,t){const i=await(await L.ADAPTER.fetch(r)).arrayBuffer(),{compressed:n,uncompressed:s,kvData:o}=cI(r,i),a=n??s,l={mipmap:hr.OFF,alphaMode:lt.NO_PREMULTIPLIED_ALPHA,resolution:Pr(r),...e.data},u=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const c=h.resource??h,d=new J(c,l);return d.ktxKeyValueData=o,xo(d,t,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};V.add(gI);const yI=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],vI={extension:B.ResolveParser,test:r=>{const e=$e.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var i,n;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const s=e.pop();if(yI.includes(s))return{resolution:parseFloat(((i=L.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:s,src:r}}return{resolution:parseFloat(((n=L.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:t,src:r}}};V.add(vI);const sa=new ee,_I=4,o_=class ws{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,i,n){const s=new Image;return s.src=await this.base64(e,t,i,n),s}async base64(e,t,i,n){const s=this.canvas(e,n);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},t,i)});if(s.toDataURL!==void 0)return s.toDataURL(t,i);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:i});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&ws._flipY(i,n,s),a&&ws._unpremultiplyAlpha(i);const l=new JS(n,s,1),u=new ImageData(new Uint8ClampedArray(i.buffer),n,s);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){const{pixels:i,width:n,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&ws._flipY(i,n,s),a&&ws._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let n,s=!1,o=!1,a,l=!1;e&&(e instanceof Vi?a=e:(a=i.generateTexture(e,{region:t,resolution:i.resolution,multisample:i.multisample}),l=!0,t&&(sa.width=t.width,sa.height=t.height,t=sa)));const u=i.gl;if(a){if(n=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===N.RGBA,!l){i.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[i.CONTEXT_UID];f.blitFramebuffer&&i.framebuffer.bind(f.blitFramebuffer)}}else n=i.resolution,t||(t=sa,t.width=i.width/n,t.height=i.height/n),s=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const h=Math.max(Math.round(t.width*n),1),c=Math.max(Math.round(t.height*n),1),d=new Uint8Array(_I*h*c);return u.readPixels(Math.round(t.x*n),Math.round(t.y*n),h,c,u.RGBA,u.UNSIGNED_BYTE,d),l&&(a==null||a.destroy(!0)),{pixels:d,width:h,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,i){const n=t<<2,s=i>>1,o=new Uint8Array(n);for(let a=0;a<s;a++){const l=a*n,u=(i-a-1)*n;o.set(e.subarray(l,l+n)),e.copyWithin(l,u,u+n),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const n=e[i+3];if(n!==0){const s=255.001/n;e[i]=e[i]*s+.5,e[i+1]=e[i+1]*s+.5,e[i+2]=e[i+2]*s+.5}}}};o_.extension={name:"extract",type:B.RendererSystem};let xI=o_;V.add(xI);const xl={build(r){const e=r.points;let t,i,n,s,o,a;if(r.type===Xe.CIRC){const p=r.shape;t=p.x,i=p.y,o=a=p.radius,n=s=0}else if(r.type===Xe.ELIP){const p=r.shape;t=p.x,i=p.y,o=p.width,a=p.height,n=s=0}else{const p=r.shape,y=p.width/2,_=p.height/2;t=p.x+y,i=p.y+_,o=a=Math.max(0,Math.min(p.radius,Math.min(y,_))),n=y-o,s=_-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(n?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+n,e[1]=e[3]=i+s,e[2]=e[4]=t-n,e[5]=e[7]=i-s;return}let h=0,c=l*4+(n?2:0)+2,d=c,f=u;{const p=n+o,y=s,_=t+p,g=t-p,v=i+y;if(e[h++]=_,e[h++]=v,e[--c]=v,e[--c]=g,s){const m=i-y;e[d++]=g,e[d++]=m,e[--f]=m,e[--f]=_}}for(let p=1;p<l;p++){const y=Math.PI/2*(p/l),_=n+Math.cos(y)*o,g=s+Math.sin(y)*a,v=t+_,m=t-_,x=i+g,w=i-g;e[h++]=v,e[h++]=x,e[--c]=x,e[--c]=m,e[d++]=m,e[d++]=w,e[--f]=w,e[--f]=v}{const p=n,y=s+a,_=t+p,g=t-p,v=i+y,m=i-y;e[h++]=_,e[h++]=v,e[--f]=m,e[--f]=_,n&&(e[h++]=g,e[h++]=v,e[--f]=m,e[--f]=g)}},triangulate(r,e){const t=r.points,i=e.points,n=e.indices;if(t.length===0)return;let s=i.length/2;const o=s;let a,l;if(r.type!==Xe.RREC){const h=r.shape;a=h.x,l=h.y}else{const h=r.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(t[0],t[1]);for(let h=2;h<t.length;h+=2)i.push(t[h],t[h+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function Qm(r,e=!1){const t=r.length;if(t<6)return;let i=0;for(let n=0,s=r[t-2],o=r[t-1];n<t;n+=2){const a=r[n],l=r[n+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const n=t/2;for(let s=n+n%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,u=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const a_={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const i=r.holes,n=e.points,s=e.indices;if(t.length>=6){Qm(t,!1);const o=[];for(let u=0;u<i.length;u++){const h=i[u];Qm(h.points,!0),o.push(t.length/2),t=t.concat(h.points)}const a=Tw(t,o,2);if(!a)return;const l=n.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<t.length;u++)n.push(t[u])}}},wI={build(r){const e=r.shape,t=e.x,i=e.y,n=e.width,s=e.height,o=r.points;o.length=0,n>=0&&s>=0&&o.push(t,i,t+n,i,t+n,i+s,t,i+s)},triangulate(r,e){const t=r.points,i=e.points;if(t.length===0)return;const n=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},EI={build(r){xl.build(r)},triangulate(r,e){xl.triangulate(r,e)}};var xt=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(xt||{}),Xr=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Xr||{});const jn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class Jm{static curveTo(e,t,i,n,s,o){const a=o[o.length-2],l=o[o.length-1]-t,u=a-e,h=n-t,c=i-e,d=Math.abs(l*c-u*h);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const f=l*l+u*u,p=h*h+c*c,y=l*h+u*c,_=s*Math.sqrt(f)/d,g=s*Math.sqrt(p)/d,v=_*y/f,m=g*y/p,x=_*c+g*u,w=_*h+g*l,S=u*(g+v),T=l*(g+v),E=c*(_+m),I=h*(_+m),R=Math.atan2(T-w,S-x),q=Math.atan2(I-w,E-x);return{cx:x+e,cy:w+t,radius:s,startAngle:R,endAngle:q,anticlockwise:u*h>c*l}}static arc(e,t,i,n,s,o,a,l,u){const h=a-o,c=jn._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/cl)*40),d=h/(c*2),f=d*2,p=Math.cos(d),y=Math.sin(d),_=c-1,g=_%1/_;for(let v=0;v<=_;++v){const m=v+g*v,x=d+o+f*m,w=Math.cos(x),S=-Math.sin(x);u.push((p*w+y*S)*s+i,(p*-S+y*w)*s+n)}}}class TI{constructor(){this.reset()}begin(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class pf{static curveLength(e,t,i,n,s,o,a,l){let u=0,h=0,c=0,d=0,f=0,p=0,y=0,_=0,g=0,v=0,m=0,x=e,w=t;for(let S=1;S<=10;++S)h=S/10,c=h*h,d=c*h,f=1-h,p=f*f,y=p*f,_=y*e+3*p*h*i+3*f*c*s+d*a,g=y*t+3*p*h*n+3*f*c*o+d*l,v=x-_,m=w-g,x=_,w=g,u+=Math.sqrt(v*v+m*m);return u}static curveTo(e,t,i,n,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=jn._segmentsCount(pf.curveLength(l,u,e,t,i,n,s,o));let c=0,d=0,f=0,p=0,y=0;a.push(l,u);for(let _=1,g=0;_<=h;++_)g=_/h,c=1-g,d=c*c,f=d*c,p=g*g,y=p*g,a.push(f*l+3*d*g*e+3*c*p*i+y*s,f*u+3*d*g*t+3*c*p*n+y*o)}}function eg(r,e,t,i,n,s,o,a){const l=r-t*n,u=e-i*n,h=r+t*s,c=e+i*s;let d,f;o?(d=i,f=-t):(d=-i,f=t);const p=l+d,y=u+f,_=h+d,g=c+f;return a.push(p,y,_,g),2}function di(r,e,t,i,n,s,o,a){const l=t-r,u=i-e;let h=Math.atan2(l,u),c=Math.atan2(n-r,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,p=Math.abs(f),y=Math.sqrt(l*l+u*u),_=(15*p*Math.sqrt(y)/Math.PI>>0)+1,g=f/_;if(d+=g,a){o.push(r,e,t,i);for(let v=1,m=d;v<_;v++,m+=g)o.push(r,e,r+Math.sin(m)*y,e+Math.cos(m)*y);o.push(r,e,n,s)}else{o.push(t,i,r,e);for(let v=1,m=d;v<_;v++,m+=g)o.push(r+Math.sin(m)*y,e+Math.cos(m)*y,r,e);o.push(n,s,r,e)}return _*2}function SI(r,e){const t=r.shape;let i=r.points||t.points.slice();const n=e.closePointEps;if(i.length===0)return;const s=r.lineStyle,o=new ae(i[0],i[1]),a=new ae(i[i.length-2],i[i.length-1]),l=t.type!==Xe.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const $=(o.x+a.x)*.5,b=(a.y+o.y)*.5;i.unshift($,b),i.push($,b)}const h=e.points,c=i.length/2;let d=i.length;const f=h.length/2,p=s.width/2,y=p*p,_=s.miterLimit*s.miterLimit;let g=i[0],v=i[1],m=i[2],x=i[3],w=0,S=0,T=-(v-x),E=g-m,I=0,R=0,q=Math.sqrt(T*T+E*E);T/=q,E/=q,T*=p,E*=p;const F=s.alignment,A=(1-F)*2,k=F*2;l||(s.cap===Xr.ROUND?d+=di(g-T*(A-k)*.5,v-E*(A-k)*.5,g-T*A,v-E*A,g+T*k,v+E*k,h,!0)+2:s.cap===Xr.SQUARE&&(d+=eg(g,v,T,E,A,k,!0,h))),h.push(g-T*A,v-E*A,g+T*k,v+E*k);for(let $=1;$<c-1;++$){g=i[($-1)*2],v=i[($-1)*2+1],m=i[$*2],x=i[$*2+1],w=i[($+1)*2],S=i[($+1)*2+1],T=-(v-x),E=g-m,q=Math.sqrt(T*T+E*E),T/=q,E/=q,T*=p,E*=p,I=-(x-S),R=m-w,q=Math.sqrt(I*I+R*R),I/=q,R/=q,I*=p,R*=p;const b=m-g,U=v-x,C=m-w,P=S-x,K=b*C+U*P,oe=U*C-P*b,W=oe<0;if(Math.abs(oe)<.001*Math.abs(K)){h.push(m-T*A,x-E*A,m+T*k,x+E*k),K>=0&&(s.join===xt.ROUND?d+=di(m,x,m-T*A,x-E*A,m-I*A,x-R*A,h,!1)+4:d+=2,h.push(m-I*k,x-R*k,m+I*A,x+R*A));continue}const se=(-T+g)*(-E+x)-(-T+m)*(-E+v),te=(-I+w)*(-R+x)-(-I+m)*(-R+S),ue=(b*te-C*se)/oe,_e=(P*se-U*te)/oe,et=(ue-m)*(ue-m)+(_e-x)*(_e-x),Ne=m+(ue-m)*A,ce=x+(_e-x)*A,Ce=m-(ue-m)*k,be=x-(_e-x)*k,Vt=Math.min(b*b+U*U,C*C+P*P),Xt=W?A:k,Zn=Vt+Xt*Xt*y,C_=et<=Zn;let Eo=s.join;if(Eo===xt.MITER&&et/y>_&&(Eo=xt.BEVEL),C_)switch(Eo){case xt.MITER:{h.push(Ne,ce,Ce,be);break}case xt.BEVEL:{W?h.push(Ne,ce,m+T*k,x+E*k,Ne,ce,m+I*k,x+R*k):h.push(m-T*A,x-E*A,Ce,be,m-I*A,x-R*A,Ce,be),d+=2;break}case xt.ROUND:{W?(h.push(Ne,ce,m+T*k,x+E*k),d+=di(m,x,m+T*k,x+E*k,m+I*k,x+R*k,h,!0)+4,h.push(Ne,ce,m+I*k,x+R*k)):(h.push(m-T*A,x-E*A,Ce,be),d+=di(m,x,m-T*A,x-E*A,m-I*A,x-R*A,h,!1)+4,h.push(m-I*A,x-R*A,Ce,be));break}}else{switch(h.push(m-T*A,x-E*A,m+T*k,x+E*k),Eo){case xt.MITER:{W?h.push(Ce,be,Ce,be):h.push(Ne,ce,Ne,ce),d+=2;break}case xt.ROUND:{W?d+=di(m,x,m+T*k,x+E*k,m+I*k,x+R*k,h,!0)+2:d+=di(m,x,m-T*A,x-E*A,m-I*A,x-R*A,h,!1)+2;break}}h.push(m-I*A,x-R*A,m+I*k,x+R*k),d+=2}}g=i[(c-2)*2],v=i[(c-2)*2+1],m=i[(c-1)*2],x=i[(c-1)*2+1],T=-(v-x),E=g-m,q=Math.sqrt(T*T+E*E),T/=q,E/=q,T*=p,E*=p,h.push(m-T*A,x-E*A,m+T*k,x+E*k),l||(s.cap===Xr.ROUND?d+=di(m-T*(A-k)*.5,x-E*(A-k)*.5,m-T*A,x-E*A,m+T*k,x+E*k,h,!1)+2:s.cap===Xr.SQUARE&&(d+=eg(m,x,T,E,A,k,!1,h)));const G=e.indices,Z=jn.epsilon*jn.epsilon;for(let $=f;$<d+f-2;++$)g=h[$*2],v=h[$*2+1],m=h[($+1)*2],x=h[($+1)*2+1],w=h[($+2)*2],S=h[($+2)*2+1],!(Math.abs(g*(x-S)+m*(S-v)+w*(v-x))<Z)&&G.push($,$+1,$+2)}function AI(r,e){let t=0;const i=r.shape,n=r.points||i.points,s=i.type!==Xe.POLY||i.closeStroke;if(n.length===0)return;const o=e.points,a=e.indices,l=n.length/2,u=o.length/2;let h=u;for(o.push(n[0],n[1]),t=1;t<l;t++)o.push(n[t*2],n[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function tg(r,e){r.lineStyle.native?AI(r,e):SI(r,e)}class mf{static curveLength(e,t,i,n,s,o){const a=e-2*i+s,l=t-2*n+o,u=2*i-2*e,h=2*n-2*t,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,p=2*Math.sqrt(c+d+f),y=Math.sqrt(c),_=2*c*y,g=2*Math.sqrt(f),v=d/y;return(_*p+y*d*(p-g)+(4*f*c-d*d)*Math.log((2*y+v+p)/(v+g)))/(4*_)}static curveTo(e,t,i,n,s){const o=s[s.length-2],a=s[s.length-1],l=jn._segmentsCount(mf.curveLength(o,a,e,t,i,n));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(e-o)*d,h=a+(t-a)*d,s.push(u+(e+(i-e)*d-u)*d,h+(t+(n-t)*d-h)*d)}}}const ch={[Xe.POLY]:a_,[Xe.CIRC]:xl,[Xe.ELIP]:xl,[Xe.RECT]:wI,[Xe.RREC]:EI},rg=[],oa=[];class wl{constructor(e,t=null,i=null,n=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=n,this.type=e.type}clone(){return new wl(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Zi=new ae,l_=class u_ extends f0{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new gl,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),oa.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),rg.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,n=null){const s=new wl(e,t,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new wl(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const n=t[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,Zi):Zi.copyFrom(e),n.shape.contains(Zi.x,Zi.y))){let s=!1;if(n.holes){for(let o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(Zi.x,Zi.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const u=t[l],h=u.fillStyle,c=u.lineStyle;ch[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||c.visible)&&this.processHoles(u.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const p=f.texture.baseTexture,y=this.indices.length,_=this.points.length/2;p.wrapMode=ti.REPEAT,d===0?this.processFill(u):this.processLine(u);const g=this.points.length/2-_;g!==0&&(i&&!this._compareStyles(n,f)&&(i.end(y,_),i=null),i||(i=rg.pop()||new TI,i.begin(f,y,_),this.batches.push(i),n=f),this.addUvs(this.points,e,f.texture,_,g,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(i&&i.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const n=e[t];for(let s=0;s<n.size;s++){const o=n.start+s;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<u_.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++J._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),oa.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let n=oa.pop();n||(n=new Mc,n.texArray=new Fc),n.texArray.count=0,n.start=0,n.size=0,n.type=sr.TRIANGLES;let s=0,o=null,a=0,l=!1,u=sr.TRIANGLES,h=0;this.drawCalls.push(n);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],f=8,p=d.style,y=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?sr.LINES:sr.TRIANGLES,o=null,s=f,e++),o!==y&&(o=y,y._batchEnabled!==e&&(s===f&&(e++,s=0,n.size>0&&(n=oa.pop(),n||(n=new Mc,n.texArray=new Fc),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=u),y.touched=1,y._batchEnabled=e,y._batchLocation=s,y.wrapMode=ti.REPEAT,n.texArray.elements[n.texArray.count++]=y,s++)),n.size+=d.size,h+=d.size,a=y._batchLocation,this.addColors(t,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(i,a,d.attribSize,d.attribStart)}J._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=t[u*2],o[l++]=t[u*2+1],a[l++]=i[u],o[l++]=n[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?a_.triangulate(e,this):ch[e.type].triangulate(e,this)}processLine(e){tg(e,this);for(let t=0;t<e.holes.length;t++)tg(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];ch[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const n=e[i*2],s=e[i*2+1];e[i*2]=t.a*n+t.c*s+t.tx,e[i*2+1]=t.b*n+t.d*s+t.ty}}addColors(e,t,i,n,s=0){const o=me.shared.setValue(t).toLittleEndianNumber(),a=me.shared.setValue(o).toPremultiplied(i);e.length=Math.max(e.length,s+n);for(let l=0;l<n;l++)e[s+l]=a}addTextureIds(e,t,i,n=0){e.length=Math.max(e.length,n+i);for(let s=0;s<i;s++)e[n+s]=t}addUvs(e,t,i,n,s,o=null){let a=0;const l=t.length,u=i.frame;for(;a<s;){let c=e[(n+a)*2],d=e[(n+a)*2+1];if(o){const f=o.a*c+o.c*d+o.tx;d=o.b*c+o.d*d+o.ty,c=f}a++,t.push(c/u.width,d/u.height)}const h=i.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(t,i,l,s)}adjustUvs(e,t,i,n){const s=t.baseTexture,o=1e-6,a=i+n*2,l=t.frame,u=l.width/s.width,h=l.height/s.height;let c=l.x/l.width,d=l.y/l.height,f=Math.floor(e[i]+o),p=Math.floor(e[i+1]+o);for(let y=i+2;y<a;y+=2)f=Math.min(f,Math.floor(e[y]+o)),p=Math.min(p,Math.floor(e[y+1]+o));c-=f,d-=p;for(let y=i;y<a;y+=2)e[y]=(e[y]+c)*u,e[y+1]=(e[y+1]+d)*h}};l_.BATCHABLE_SIZE=100;let CI=l_;class Ql{constructor(){this.color=16777215,this.alpha=1,this.texture=j.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Ql;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=j.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class gf extends Ql{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Xr.BUTT,this.join=xt.MITER,this.miterLimit=10}clone(){const e=new gf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Xr.BUTT,this.join=xt.MITER,this.miterLimit=10}}const dh={},ed=class Ma extends Qe{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ql,this._lineStyle=new gf,this._matrix=null,this._holeMode=!1,this.state=cr.for2d(),this._geometry=e||new CI,this._geometry.refCount++,this._transformID=-1,this._tintColor=new me(16777215),this.blendMode=Q.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ma(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,n=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:n,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:j.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Xr.BUTT,join:xt.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Ri,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Ri,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==e||s!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),mf.curveTo(e,t,i,n,s),this}bezierCurveTo(e,t,i,n,s,o){return this._initCurve(),pf.curveTo(e,t,i,n,s,o,this.currentPath.points),this}arcTo(e,t,i,n,s){this._initCurve(e,t);const o=this.currentPath.points,a=Jm.curveTo(e,t,i,n,s,o);if(a){const{cx:l,cy:u,radius:h,startAngle:c,endAngle:d,anticlockwise:f}=a;this.arc(l,u,h,c,d,f)}return this}arc(e,t,i,n,s,o=!1){if(n===s)return this;if(!o&&s<=n?s+=cl:o&&n<=s&&(n+=cl),s-n===0)return this;const a=e+Math.cos(n)*i,l=t+Math.sin(n)*i,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return Jm.arc(a,l,e,t,i,n,s,o,h),this}beginFill(e=0,t){return this.beginTextureFill({texture:j.WHITE,color:e,alpha:t})}normalizeColor(e){const t=me.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:j.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,n){return this.drawShape(new ee(e,t,i,n))}drawRoundedRect(e,t,i,n,s){return this.drawShape(new Kl(e,t,i,n,s))}drawCircle(e,t,i){return this.drawShape(new Wl(e,t,i))}drawEllipse(e,t,i,n){return this.drawShape(new Yl(e,t,i,n))}drawPolygon(...e){let t,i=!0;const n=e[0];n.points?(i=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new Ri(t);return s.closeStroke=i,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Xe.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let n=0;n<i;n++){const s=e.batches[n],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:t,indices:u,uvs:l,_batchRGB:me.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,n=this.worldAlpha,s=t.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,me.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,i.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:i,type:n,size:s,start:o}=t,a=i.count;for(let l=0;l<a;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(n,s,o)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!dh[i]){const{maxTextures:n}=e.plugins[i],s=new Int32Array(n);for(let l=0;l<n;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new ye,default:zt.from({uSamplers:s},!0)},a=e.plugins[i]._shader.program;dh[i]=new ur(a,o)}t=dh[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:n,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,i,n,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Ma._TEMP_POINT),this._geometry.containsPoint(Ma._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=me.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,n=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this._geometry.points,h=this.vertexData;let c=0;for(let d=0;d<u.length;d+=2){const f=u[d],p=u[d+1];h[c++]=i*f+s*p+a,h[c++]=o*p+n*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};ed.curves=jn,ed._TEMP_POINT=new ae;let Ti=ed;class bI{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const fh=new ae,ig=new Ri,h_=class c_ extends Qe{constructor(e,t,i,n=sr.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||cr.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=L.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===sr.TRIANGLES&&t.length<c_.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,u=n.tx,h=n.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=t[d*2],p=t[d*2+1];c[d*2]=s*f+a*p+u,c[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=L.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=i}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new bI(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,fh);const t=this.geometry.getBuffer("aVertexPosition").data,i=ig.points,n=this.geometry.getIndex().data,s=n.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=n[a]*2,u=n[a+1]*2,h=n[a+2]*2;if(i[0]=t[l],i[1]=t[l+1],i[2]=t[u],i[3]=t[u+1],i[4]=t[h],i[5]=t[h+1],ig.contains(fh.x,fh.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};h_.BATCHABLE_SIZE=100;let ng=h_;class II extends ni{constructor(e,t,i){super();const n=new Re(e),s=new Re(t,!0),o=new Re(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,Y.FLOAT).addAttribute("aTextureCoord",s,2,!1,Y.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var PI=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,RI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class sg extends ur{constructor(e,t){const i={uSampler:e,alpha:1,uTextureMatrix:ye.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(i,t.uniforms),super(t.program||Er.from(RI,PI),i),this._colorDirty=!1,this.uvMatrix=new b0(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new me(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;me.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class og{constructor(e,t,i){this.geometry=new ni,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<e.length;++n){let s=e[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Y.FLOAT,offset:s.offset},t[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new Re(ZS(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Re(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Re(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Y.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Y.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(e,t,i,s.type===Y.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(e,t,i,s.type===Y.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var MI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,kI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class d_ extends ql{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new ye,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Y.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ur.from(kI,MI,{}),this.state=cr.for2d()}render(e){const t=e.children,i=e._maxSize,n=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=h0(e.blendMode,u),s.state.set(this.state);const h=s.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=me.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let y=o-f;y>n&&(y=n),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const _=a[p];_.uploadDynamic(t,f,y);const g=e._bufferUpdateIDs[p]||0;d=d||_._updateID<g,d&&(_._updateID=e._updateID,_.uploadStatic(t,f,y)),s.geometry.bind(_.geometry),h.drawElements(h.TRIANGLES,y*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],i=e._maxSize,n=e._batchSize,s=e._properties;for(let o=0;o<i;o+=n)t.push(new og(this.properties,s,n));return t}_generateOneMoreBuffer(e){const t=e._batchSize,i=e._properties;return new og(this.properties,i,t)}uploadVertices(e,t,i,n,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<i;++c){const d=e[t+c],f=d._texture,p=d.scale.x,y=d.scale.y,_=f.trim,g=f.orig;_?(l=_.x-d.anchor.x*g.width,a=l+_.width,h=_.y-d.anchor.y*g.height,u=h+_.height):(a=g.width*(1-d.anchor.x),l=g.width*-d.anchor.x,u=g.height*(1-d.anchor.y),h=g.height*-d.anchor.y),n[o]=l*p,n[o+1]=h*y,n[o+s]=a*p,n[o+s+1]=h*y,n[o+s*2]=a*p,n[o+s*2+1]=u*y,n[o+s*3]=l*p,n[o+s*3+1]=u*y,o+=s*4}}uploadPosition(e,t,i,n,s,o){for(let a=0;a<i;a++){const l=e[t+a].position;n[o]=l.x,n[o+1]=l.y,n[o+s]=l.x,n[o+s+1]=l.y,n[o+s*2]=l.x,n[o+s*2+1]=l.y,n[o+s*3]=l.x,n[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,i,n,s,o){for(let a=0;a<i;a++){const l=e[t+a].rotation;n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}uploadUvs(e,t,i,n,s,o){for(let a=0;a<i;++a){const l=e[t+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+s]=l.x1,n[o+s+1]=l.y1,n[o+s*2]=l.x2,n[o+s*2+1]=l.y2,n[o+s*3]=l.x3,n[o+s*3+1]=l.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,i,n,s,o){for(let a=0;a<i;++a){const l=e[t+a],u=me.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);n[o]=u,n[o+s]=u,n[o+s*2]=u,n[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}d_.extension={name:"particle",type:B.RendererPlugin};V.add(d_);var Jl=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Jl||{});const aa={willReadFrequently:!0},Qt=class X{static get experimentalLetterSpacingSupported(){let e=X._experimentalLetterSpacingSupported;if(e!==void 0){const t=L.ADAPTER.getCanvasRenderingContext2D().prototype;e=X._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,n,s,o,a,l,u){this.text=e,this.style=t,this.width=i,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,i,n=X._canvas){i=i??t.wordWrap;const s=t.toFontString(),o=X.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=n.getContext("2d",aa);a.font=s;const l=(i?X.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let p=0;p<l.length;p++){const y=X._measureText(l[p],t.letterSpacing,a);u[p]=y,h=Math.max(h,y)}let c=h+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const d=t.lineHeight||o.fontSize+t.strokeThickness;let f=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new X(e,t,c,f,l,u,d+t.leading,h,o)}static _measureText(e,t,i){let n=!1;X.experimentalLetterSpacingSupported&&(X.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e).width;return s>0&&(n?s-=t:s+=(X.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,i=X._canvas){const n=i.getContext("2d",aa);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:h}=t,c=X.collapseSpaces(h),d=X.collapseNewlines(h);let f=!c;const p=t.wordWrapWidth+u,y=X.tokenize(e);for(let _=0;_<y.length;_++){let g=y[_];if(X.isNewline(g)){if(!d){a+=X.addLine(o),f=!c,o="",s=0;continue}g=" "}if(c){const m=X.isBreakingSpace(g),x=X.isBreakingSpace(o[o.length-1]);if(m&&x)continue}const v=X.getFromCache(g,u,l,n);if(v>p)if(o!==""&&(a+=X.addLine(o),o="",s=0),X.canBreakWords(g,t.breakWords)){const m=X.wordWrapSplit(g);for(let x=0;x<m.length;x++){let w=m[x],S=w,T=1;for(;m[x+T];){const I=m[x+T];if(!X.canBreakChars(S,I,g,x,t.breakWords))w+=I;else break;S=I,T++}x+=T-1;const E=X.getFromCache(w,u,l,n);E+s>p&&(a+=X.addLine(o),f=!1,o="",s=0),o+=w,s+=E}}else{o.length>0&&(a+=X.addLine(o),o="",s=0);const m=_===y.length-1;a+=X.addLine(g,!m),f=!1,o="",s=0}else v+s>p&&(f=!1,a+=X.addLine(o),o="",s=0),(o.length>0||!X.isBreakingSpace(g)||f)&&(o+=g,s+=v)}return a+=X.addLine(o,!1),a}static addLine(e,t=!0){return e=X.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,n){let s=i[e];return typeof s!="number"&&(s=X._measureText(e,t,n)+t,i[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!X.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:X._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:X._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const s=e[n],o=e[n+1];if(X.isBreakingSpace(s,o)||X.isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,n,s){return!0}static wordWrapSplit(e){return X.graphemeSegmenter(e)}static measureFont(e){if(X._fonts[e])return X._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=X._canvas,n=X._context;n.font=e;const s=X.METRICS_STRING+X.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width);let a=Math.ceil(n.measureText(X.BASELINE_SYMBOL).width);const l=Math.ceil(X.HEIGHT_MULTIPLIER*a);if(a=a*X.BASELINE_MULTIPLIER|0,o===0||l===0)return X._fonts[e]=t,t;i.width=o,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);const u=n.getImageData(0,0,o,l).data,h=u.length,c=o*4;let d=0,f=0,p=!1;for(d=0;d<a;++d){for(let y=0;y<c;y+=4)if(u[f+y]!==255){p=!0;break}if(!p)f+=c;else break}for(t.ascent=a-d,f=h-c,p=!1,d=l;d>a;--d){for(let y=0;y<c;y+=4)if(u[f+y]!==255){p=!0;break}if(!p)f-=c;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,X._fonts[e]=t,t}static clearMetrics(e=""){e?delete X._fonts[e]:X._fonts={}}static get _canvas(){var e;if(!X.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if((e=i.getContext("2d",aa))!=null&&e.measureText)return X.__canvas=i,i;t=L.ADAPTER.createCanvas()}catch{t=L.ADAPTER.createCanvas()}t.width=t.height=10,X.__canvas=t}return X.__canvas}static get _context(){return X.__context||(X.__context=X._canvas.getContext("2d",aa)),X.__context}};Qt.METRICS_STRING="|q",Qt.BASELINE_SYMBOL="M",Qt.BASELINE_MULTIPLIER=1.4,Qt.HEIGHT_MULTIPLIER=2,Qt.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),Qt.experimentalLetterSpacing=!1,Qt._fonts={},Qt._newlines=[10,13],Qt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Lr=Qt;const DI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f_=class Es{constructor(e){this.styleID=0,this.reset(),mh(this,e,e)}clone(){const e={};return mh(e,this,Es.defaultStyle),new Es(e)}reset(){mh(this,Es.defaultStyle,Es.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=ph(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=ph(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){NI(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=ph(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!DI.includes(n)&&(n=`"${n}"`),t[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};f_.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Jl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let si=f_;function ph(r){const e=me.shared,t=i=>{const n=e.setValue(i);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function NI(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function mh(r,e,t){for(const i in t)Array.isArray(e[i])?r[i]=e[i].slice():r[i]=e[i]}const FI={texture:!0,children:!1,baseTexture:!0},p_=class td extends Kn{constructor(e,t,i){let n=!1;i||(i=L.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=j.from(i);s.orig=new ee,s.trim=new ee,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=td.defaultResolution??L.RESOLUTION,this._autoResolution=td.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Lr.experimentalLetterSpacing}static set experimentalLetterSpacing(e){ie("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Lr.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,n=Lr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,o=n.height,a=n.lines,l=n.lineHeight,u=n.lineWidths,h=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let d,f;const p=t.dropShadow?2:1;for(let y=0;y<p;++y){const _=t.dropShadow&&y===0,g=_?Math.ceil(Math.max(1,o)+t.padding*2):0,v=g*this._resolution;if(_){i.fillStyle="black",i.strokeStyle="black";const x=t.dropShadowColor,w=t.dropShadowBlur*this._resolution,S=t.dropShadowDistance*this._resolution;i.shadowColor=me.shared.setValue(x).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=w,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*S,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*S+v}else i.fillStyle=this._generateFillStyle(t,a,n),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let m=(l-c.fontSize)/2;l-c.fontSize<0&&(m=0);for(let x=0;x<a.length;x++)d=t.strokeThickness/2,f=t.strokeThickness/2+x*l+c.ascent+m,t.align==="right"?d+=h-u[x]:t.align==="center"&&(d+=(h-u[x])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[x],d+t.padding,f+t.padding-g,!0),t.fill&&this.drawLetterSpacing(a[x],d+t.padding,f+t.padding-g)}this.updateTexture()}drawLetterSpacing(e,t,i,n=!1){const s=this._style.letterSpacing;let o=!1;if(Lr.experimentalLetterSpacingSupported&&(Lr.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=Lr.graphemeSegmenter(e);let u=this.context.measureText(e).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];n?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=tA(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,i=this._style,n=i.trim?0:i.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,h=n.slice(),c=e.fillGradientStops.slice();if(!c.length){const d=h.length+1;for(let f=1;f<d;++f)c.push(f/d)}if(h.unshift(n[0]),c.unshift(0),h.push(n[n.length-1]),c.push(1),e.fillGradientType===Jl.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const d=i.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const p=i.lineHeight*(f-1)+d,y=i.lineHeight*f;let _=y;f>0&&p>y&&(_=(y+p)/2);const g=y+d,v=i.lineHeight*(f+1);let m=g;f+1<t.length&&v<g&&(m=(g+v)/2);const x=(m-_)/u;for(let w=0;w<h.length;w++){let S=0;typeof c[w]=="number"?S=c[w]:S=w/h.length;let T=Math.min(1,Math.max(0,_/u+S*x));T=Number(T.toFixed(5)),s.addColorStop(T,h[w])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const d=h.length+1;let f=1;for(let p=0;p<h.length;p++){let y;typeof c[p]=="number"?y=c[p]:y=f/d,s.addColorStop(y,h[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},FI,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Vr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Vr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof si?this._style=e:this._style=new si(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};p_.defaultAutoResolution=!0;let m_=p_;class BI{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function OI(r,e){var i;let t=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof j){const s=r._textures[n].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function LI(r,e){if(r.baseTexture instanceof J){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function UI(r,e){if(r._texture&&r._texture instanceof j){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function GI(r,e){return e instanceof m_?(e.updateText(!0),!0):!1}function HI(r,e){if(e instanceof si){const t=e.toFontString();return Lr.measureFont(t),!0}return!1}function zI(r,e){if(r instanceof m_){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function $I(r,e){return r instanceof si?(e.includes(r)||e.push(r),!0):!1}const g_=class y_{constructor(e){this.limiter=new BI(y_.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(zI),this.registerFindHook($I),this.registerFindHook(OI),this.registerFindHook(LI),this.registerFindHook(UI),this.registerUploadHook(GI),this.registerUploadHook(HI)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,mt.system.addOnce(this.tick,this,Gi.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)mt.system.addOnce(this.tick,this,Gi.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Qe)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&mt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};g_.uploadsPerFrame=4;let rd=g_;Object.defineProperties(L,{UPLOADS_PER_FRAME:{get(){return rd.uploadsPerFrame},set(r){ie("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),rd.uploadsPerFrame=r}}});function v_(r,e){return e instanceof J?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function jI(r,e){if(!(e instanceof Ti))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:i}=t;for(let n=0;n<i.length;n++){const{texture:s}=i[n].style;s&&v_(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function VI(r,e){return r instanceof Ti?(e.push(r),!0):!1}class __ extends rd{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(VI),this.registerUploadHook(v_),this.registerUploadHook(jI)}}__.extension={name:"prepare",type:B.RendererSystem};V.add(__);var XI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,WI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,YI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,ag=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,KI=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const la=new ye;class x_ extends ql{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new T0,this.state=cr.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=ur.from(ag,KI,t),this.shader=e.context.webGLVersion>1?ur.from(WI,XI,t):ur.from(ag,YI,t)}render(e){const t=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,h=e.tileTransform.localTransform,c=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==ti.CLAMP:l.wrapMode===ti.CLAMP&&(l.wrapMode=ti.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,y=a.height,_=e._width,g=e._height;la.set(h.a*p/_,h.b*p/g,h.c*y/_,h.d*y/g,h.tx/_,h.ty/g),la.invert(),d?la.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=la.toArray(!0),f.uniforms.uColor=me.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(i),this.state.blendMode=h0(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}x_.extension={name:"tilingSprite",type:B.RendererPlugin};V.add(x_);const w_=class Ts{constructor(e,t,i){this.linkedSheets=[],(e instanceof J||e instanceof j)&&(e={texture:e,data:t,resolutionFilename:i});const{texture:n,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=n instanceof j?n:null,this.baseTexture=n instanceof J?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=Pr(e,null);return i===null&&(i=typeof t=="number"?t:parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ts.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Ts.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const n=this._frameKeys[t],s=this._frames[n],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new ee(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new ee(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new ee(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new ee(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new j(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),j.addToCache(this.textures[n],this.cachePrefix+n.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const n=e[t][i];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ts.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ts.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};w_.BATCH_SIZE=1e3;let lg=w_;const qI=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function E_(r,e,t){const i={};if(r.forEach(n=>{i[n]=e}),Object.keys(e.textures).forEach(n=>{i[`${e.cachePrefix}${n}`]=e.textures[n]}),!t){const n=$e.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(i,E_([`${n}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return i}const ZI={extension:B.Asset,cache:{test:r=>r instanceof lg,getCacheableAssets:(r,e)=>E_(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&qI.includes(i)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=L.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:B.LoadParser,priority:jt.Normal},async testParse(r,e){return $e.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var h,c;const{texture:i,imageFilename:n,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=$e.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const d=Zc(o+(n??r.meta.image),e.src);a=(await t.load([d]))[d]}const l=new lg({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:s});await l.parse();const u=(h=r==null?void 0:r.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const d=[];for(const p of u){if(typeof p!="string")continue;let y=o+p;(c=e.data)!=null&&c.ignoreMultiPack||(y=Zc(y,e.src),d.push(t.load({src:y,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(d);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(y=>y!==p))})}return l},unload(r){r.destroy(!0)}}};V.add(ZI);class El{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ka{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}i[o].push(l)}const n=new El;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class id{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new El,i=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)t.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<n.length;u++)t.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)t.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}}class nd{static test(e){return typeof e=="string"&&e.includes("<font>")?id.test(L.ADAPTER.parseXML(e)):!1}static parse(e){return id.parse(L.ADAPTER.parseXML(e))}}const gh=[ka,id,nd];function QI(r){for(let e=0;e<gh.length;e++)if(gh[e].test(r))return gh[e];return null}function JI(r,e,t,i,n,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,h=r.width/i-l-u*2,c=r.height/i-l-u*2,d=o.slice(),f=t.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let y=1;y<p;++y)f.push(y/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),t.fillGradientType===Jl.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,c+u);let p=0;const y=(s.fontProperties.fontSize+t.strokeThickness)/c;for(let _=0;_<n.length;_++){const g=s.lineHeight*_;for(let v=0;v<d.length;v++){let m=0;typeof f[v]=="number"?m=f[v]:m=v/d.length;const x=g/c+m*y;let w=Math.max(p,x);w=Math.min(w,1),a.addColorStop(w,d[v]),p=w}}}else{a=e.createLinearGradient(u,c/2,h+u,c/2);const p=d.length+1;let y=1;for(let _=0;_<d.length;_++){let g;typeof f[_]=="number"?g=f[_]:g=y/p,a.addColorStop(g,d[_]),y++}}return a}function eP(r,e,t,i,n,s,o){const a=t.text,l=t.fontProperties;e.translate(i,n),e.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=JI(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=me.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Da(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function T_(r){return Array.from?Array.from(r):r.split("")}function tP(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,i=r.length;t<i;t++){const n=r[t];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...T_(n))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Nr=class Jt{constructor(e,t,i){var h;const[n]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Pr(o.file),u={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<e.page.length;c++){const{id:d,file:f}=e.page[c];u[d]=t instanceof Array?t[c]:t[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[d].baseTexture.alphaMode=lt.NO_PREMULTIPLIED_ALPHA,u[d].baseTexture.mipmap=hr.OFF)}for(let c=0;c<e.char.length;c++){const{id:d,page:f}=e.char[c];let{x:p,y,width:_,height:g,xoffset:v,yoffset:m,xadvance:x}=e.char[c];p/=l,y/=l,_/=l,g/=l,v/=l,m/=l,x/=l;const w=new ee(p+u[f].frame.x/l,y+u[f].frame.y/l,_,g);this.chars[d]={xOffset:v,yOffset:m,xAdvance:x,kerning:{},texture:new j(u[f].baseTexture,w),page:f}}for(let c=0;c<e.kerning.length;c++){let{first:d,second:f,amount:p}=e.kerning[c];d/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[d]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let n;if(e instanceof El)n=e;else{const o=QI(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}t instanceof j&&(t=[t]);const s=new Jt(n,t,i);return Jt.available[s.font]=s,s}static uninstall(e){const t=Jt.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Jt.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},Jt.defaultOptions,i),h=tP(n),c=t instanceof si?t:new si(t),d=a,f=new El;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};let p=0,y=0,_,g,v,m=0;const x=[];for(let S=0;S<h.length;S++){_||(_=L.ADAPTER.createCanvas(),_.width=a,_.height=l,g=_.getContext("2d"),v=new J(_,{resolution:o,...u}),x.push(new j(v)),f.page.push({id:x.length-1,file:""}));const T=h[S],E=Lr.measureText(T,c,!1,_),I=E.width,R=Math.ceil(E.height),q=Math.ceil((c.fontStyle==="italic"?2:1)*I);if(y>=l-R*o){if(y===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--S,_=null,g=null,v=null,y=0,p=0,m=0;continue}if(m=Math.max(R+E.fontProperties.descent,m),q*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--S,y+=m*o,y=Math.ceil(y),p=0,m=0;continue}eP(_,g,E,p,y,o,c);const F=Da(E.text);f.char.push({id:F,page:x.length-1,x:p/o,y:y/o,width:q,height:R,xoffset:0,yoffset:0,xadvance:I-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),p+=(q+2*s)*o,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(let S=0,T=h.length;S<T;S++){const E=h[S];for(let I=0;I<T;I++){const R=h[I],q=g.measureText(E).width,F=g.measureText(R).width,A=g.measureText(E+R).width-(q+F);A&&f.kerning.push({first:Da(E),second:Da(R),amount:A})}}const w=new Jt(f,x,!0);return Jt.available[e]!==void 0&&Jt.uninstall(e),Jt.available[e]=w,w}};Nr.ALPHA=[["a","z"],["A","Z"]," "],Nr.NUMERIC=[["0","9"]],Nr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Nr.ASCII=[[" ","~"]],Nr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Nr.ALPHANUMERIC},Nr.available={};let Fr=Nr;var rP=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,iP=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ug=[],hg=[],cg=[],nP=class S_ extends Qe{constructor(e,t={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},S_.styleDefaults,t);if(!Fr.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new me(n),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new wr(()=>{this.dirty=!0},this,0,0),this._roundPixels=L.ROUND_PIXELS,this.dirty=!0,this._resolution=L.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var q;const e=Fr.available[this._fontName],t=this.fontSize,i=t/e.size,n=new ae,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=T_(l),h=this._maxWidth*e.size/t,c=e.distanceFieldType==="none"?ug:hg;let d=null,f=0,p=0,y=0,_=-1,g=0,v=0,m=0,x=0;for(let F=0;F<u.length;F++){const A=u[F],k=Da(A);if(/(?:\s)/.test(A)&&(_=F,g=f,x++),A==="\r"||A===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++y,++v,n.x=0,n.y+=e.lineHeight,d=null,x=0;continue}const G=e.chars[k];if(!G)continue;d&&G.kerning[d]&&(n.x+=G.kerning[d]);const Z=cg.pop()||{texture:j.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ae};Z.texture=G.texture,Z.line=y,Z.charCode=k,Z.position.x=Math.round(n.x+G.xOffset+this._letterSpacing/2),Z.position.y=Math.round(n.y+G.yOffset),Z.prevSpaces=x,s.push(Z),f=Z.position.x+Math.max(G.xAdvance-G.xOffset,G.texture.orig.width),n.x+=G.xAdvance+this._letterSpacing,m=Math.max(m,G.yOffset+G.texture.height),d=k,_!==-1&&h>0&&n.x>h&&(++v,Rn(s,1+_-v,1+F-_),F=_,_=-1,o.push(g),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,g),y++,n.x=0,n.y+=e.lineHeight,d=null,x=0)}const w=u[u.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(f=g),o.push(f),p=Math.max(p,f),a.push(-1));const S=[];for(let F=0;F<=y;F++){let A=0;this._align==="right"?A=p-o[F]:this._align==="center"?A=(p-o[F])/2:this._align==="justify"&&(A=a[F]<0?0:(p-o[F])/a[F]),S.push(A)}const T=s.length,E={},I=[],R=this._activePagesMeshData;c.push(...R);for(let F=0;F<T;F++){const A=s[F].texture,k=A.baseTexture.uid;if(!E[k]){let G=c.pop();if(!G){const $=new II;let b,U;e.distanceFieldType==="none"?(b=new sg(j.EMPTY),U=Q.NORMAL):(b=new sg(j.EMPTY,{program:Er.from(iP,rP),uniforms:{uFWidth:0}}),U=Q.NORMAL_NPM);const C=new ng($,b);C.blendMode=U,G={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:C,vertices:null,uvs:null,indices:null}}G.index=0,G.indexCount=0,G.vertexCount=0,G.uvsCount=0,G.total=0;const{_textureCache:Z}=this;Z[k]=Z[k]||new j(A.baseTexture),G.mesh.texture=Z[k],G.mesh.tint=this._tintColor.value,I.push(G),E[k]=G}E[k].total++}for(let F=0;F<R.length;F++)I.includes(R[F])||this.removeChild(R[F].mesh);for(let F=0;F<I.length;F++)I[F].mesh.parent!==this&&this.addChild(I[F].mesh);this._activePagesMeshData=I;for(const F in E){const A=E[F],k=A.total;if(!(((q=A.indices)==null?void 0:q.length)>6*k)||A.vertices.length<ng.BATCHABLE_SIZE*2)A.vertices=new Float32Array(4*2*k),A.uvs=new Float32Array(4*2*k),A.indices=new Uint16Array(6*k);else{const G=A.total,Z=A.vertices;for(let $=G*4*2;$<Z.length;$++)Z[$]=0}A.mesh.size=6*k}for(let F=0;F<T;F++){const A=s[F];let k=A.position.x+S[A.line]*(this._align==="justify"?A.prevSpaces:1);this._roundPixels&&(k=Math.round(k));const G=k*i,Z=A.position.y*i,$=A.texture,b=E[$.baseTexture.uid],U=$.frame,C=$._uvs,P=b.index++;b.indices[P*6+0]=0+P*4,b.indices[P*6+1]=1+P*4,b.indices[P*6+2]=2+P*4,b.indices[P*6+3]=0+P*4,b.indices[P*6+4]=2+P*4,b.indices[P*6+5]=3+P*4,b.vertices[P*8+0]=G,b.vertices[P*8+1]=Z,b.vertices[P*8+2]=G+U.width*i,b.vertices[P*8+3]=Z,b.vertices[P*8+4]=G+U.width*i,b.vertices[P*8+5]=Z+U.height*i,b.vertices[P*8+6]=G,b.vertices[P*8+7]=Z+U.height*i,b.uvs[P*8+0]=C.x0,b.uvs[P*8+1]=C.y0,b.uvs[P*8+2]=C.x1,b.uvs[P*8+3]=C.y1,b.uvs[P*8+4]=C.x2,b.uvs[P*8+5]=C.y2,b.uvs[P*8+6]=C.x3,b.uvs[P*8+7]=C.y3}this._textWidth=p*i,this._textHeight=(n.y+e.lineHeight)*i;for(const F in E){const A=E[F];if(this.anchor.x!==0||this.anchor.y!==0){let $=0;const b=this._textWidth*this.anchor.x,U=this._textHeight*this.anchor.y;for(let C=0;C<A.total;C++)A.vertices[$++]-=b,A.vertices[$++]-=U,A.vertices[$++]-=b,A.vertices[$++]-=U,A.vertices[$++]-=b,A.vertices[$++]-=U,A.vertices[$++]-=b,A.vertices[$++]-=U}this._maxLineHeight=m*i;const k=A.mesh.geometry.getBuffer("aVertexPosition"),G=A.mesh.geometry.getBuffer("aTextureCoord"),Z=A.mesh.geometry.getIndex();k.data=A.vertices,G.data=A.uvs,Z.data=A.indices,k.update(),G.update(),Z.update()}for(let F=0;F<s.length;F++)cg.push(s[F]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:n}=Fr.available[this._fontName];if(i!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),c=(Math.abs(u)+Math.abs(h))/2,d=this.fontSize/n,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=c*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Fr.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Fr.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Fr.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,i=Fr.available[this._fontName].distanceFieldType==="none"?ug:hg;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=j.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};nP.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const sP=[".xml",".fnt"],oP={extension:{type:B.LoadParser,priority:jt.Normal},name:"loadBitmapFont",test(r){return sP.includes($e.extname(r).toLowerCase())},async testParse(r){return ka.test(r)||nd.test(r)},async parse(r,e,t){const i=ka.test(r)?ka.parse(r):nd.parse(r),{src:n}=e,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=$e.join($e.dirname(n),h);c=Zc(c,n),o.push(c)}const a=await t.load(o),l=o.map(u=>a[u]);return Fr.install(i,l,!0)},async load(r,e){return(await L.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};V.add(oP);const sd=class nn extends si{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new nn(Object.keys(nn.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete nn.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=nn;if(i[e]){const n=i[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return L.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((s,o)=>{const a=URL.createObjectURL(n),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(n)})).then(async([n,s])=>{const o=Object.assign({family:$e.basename(e,$e.extname(e)),weight:"normal",style:"normal",display:"auto",src:n,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);i[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=KS(e)),typeof e=="number"?YS(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${i}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,nn.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=L.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};sd.availableFonts={},sd.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let yh=sd;const ua=class sn extends Kn{constructor(e="",t={}){super(j.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,n=j.from(i,{scaleMode:L.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new ee,n.trim=new ee,this.texture=n;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=sn.defaultMaxWidth,this.maxHeight=sn.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=sn.defaultAutoResolution,this._resolution=sn.defaultResolution??L.RESOLUTION,this.text=e,this.style=t}measureText(e){var h,c;const{text:t,style:i,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(n)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(n)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();i.width=n.width=Math.ceil(Math.max(1,s)),i.height=n.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{n.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),i.src=n.src,n.onload=null,n.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:n}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=i.width/n,t.trim.height=t._frame.height=i.height/n,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,n,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},sn.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(n=this._svgRoot)==null||n.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Vr(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Vr(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof yh?(this.ownsStyle=!1,this._style=e):e instanceof si?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=yh.from(e)):(this.ownsStyle=!0,this._style=new yh(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ua.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ua.defaultMaxWidth=2024,ua.defaultMaxHeight=2024,ua.defaultAutoResolution=!0;function aP(r,e,t,i){const s=r*Math.PI/180,o=t*Math.PI/180,a=(t-r)*Math.PI/180,l=(i-e)*Math.PI/180,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(s)*Math.cos(o)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function xn(r,e,t,i,n,s=20){const o=i-2*s,a=n-2*s,l=s+(e-t.minLon)/(t.maxLon-t.minLon)*o,u=s+(t.maxLat-r)/(t.maxLat-t.minLat)*a;return{x:l,y:u}}function cs(r,e){return`${r.toFixed(5)},${e.toFixed(5)}`}function lP(r){const e=new Map,t=[],i=new Map,n=new Map;for(const s of r.ways){for(const o of s.geometry){const a=cs(o.lat,o.lon);n.set(a,(n.get(a)||0)+1)}if(s.geometry.length>0){const o=s.geometry[0],a=s.geometry[s.geometry.length-1];n.set(cs(o.lat,o.lon),2),n.set(cs(a.lat,a.lon),2)}}for(const s of r.ways){const o=s.geometry;if(o.length<2)continue;let a=0;for(let l=0;l<o.length;l++){const u=o[l],h=cs(u.lat,u.lon),c=(n.get(h)||0)>1,d=l===0||l===o.length-1;if(c||d){if(e.has(h)||e.set(h,{id:h,lat:u.lat,lon:u.lon}),l>a){const f=o[a],p=cs(f.lat,f.lon);let y=0;for(let v=a;v<l;v++)y+=aP(o[v].lat,o[v].lon,o[v+1].lat,o[v+1].lon);const _={from:p,to:h,weight:y,wayId:s.id},g={from:h,to:p,weight:y,wayId:s.id};t.push(_,g),i.has(p)||i.set(p,[]),i.has(h)||i.set(h,[]),i.get(p).push(_),i.get(h).push(g)}a=l}}}return{nodes:e,edges:t,adjacency:i}}function uP(r,e,t,i){const n=[];for(const s of r.ways){const o=s.geometry.map(a=>xn(a.lat,a.lon,e,t,i));n.push({points:o,wayId:s.id,highway:s.tags.highway||"unknown"})}return n}function hP(r,e,t,i,n,s,o=30){let a=null,l=1/0;for(const u of r.nodes.values()){const h=xn(u.lat,u.lon,i,n,s),c=e-h.x,d=t-h.y,f=Math.sqrt(c*c+d*d);f<l&&f<o&&(l=f,a=u)}return a}function ao(r,e){const i=Math.PI/180,n=(r.lat+e.lat)/2*i,s=Math.cos(n),o=(e.lon-r.lon)*i*s,a=(e.lat-r.lat)*i;return 6371e3*Math.sqrt(o*o+a*a)}const A_={visited:65535,visitedBackward:16711808,path:65535,startMarker:65280,endMarker:16711808},Nt=2e3,dg=.2,fg=5,ha=.25;class cP{constructor(e){fe(this,"mainContainer");fe(this,"roadsContainer");fe(this,"visitedContainer");fe(this,"pathContainer");fe(this,"markersContainer");fe(this,"roadGraphics");fe(this,"visitedGraphics");fe(this,"pathGraphics");fe(this,"bounds",null);fe(this,"screenWidth",0);fe(this,"screenHeight",0);fe(this,"startMarker",null);fe(this,"endMarker",null);fe(this,"theme",{...A_});fe(this,"animationFrameId",null);fe(this,"_zoom",1);fe(this,"_panX",0);fe(this,"_panY",0);fe(this,"isDragging",!1);fe(this,"dragStartX",0);fe(this,"dragStartY",0);fe(this,"panStartX",0);fe(this,"panStartY",0);this.screenWidth=e.screen.width,this.screenHeight=e.screen.height,this.mainContainer=new Qe,this.roadsContainer=new Qe,this.visitedContainer=new Qe,this.pathContainer=new Qe,this.markersContainer=new Qe,this.roadGraphics=new Ti,this.visitedGraphics=new Ti,this.pathGraphics=new Ti,this.roadsContainer.addChild(this.roadGraphics),this.visitedContainer.addChild(this.visitedGraphics),this.pathContainer.addChild(this.pathGraphics),this.mainContainer.addChild(this.roadsContainer),this.mainContainer.addChild(this.visitedContainer),this.mainContainer.addChild(this.pathContainer),this.mainContainer.addChild(this.markersContainer),e.stage.addChild(this.mainContainer),this.setupInteraction(e),this.centerView()}setupInteraction(e){const t=e.view;t.addEventListener("wheel",i=>{i.preventDefault();const n=i.deltaY>0?-ha:ha,s=t.getBoundingClientRect(),o=i.clientX-s.left,a=i.clientY-s.top;this.zoomAt(o,a,n)},{passive:!1}),t.addEventListener("mousedown",i=>{(i.button===1||i.button===0&&i.shiftKey)&&(i.preventDefault(),this.isDragging=!0,this.dragStartX=i.clientX,this.dragStartY=i.clientY,this.panStartX=this._panX,this.panStartY=this._panY,t.style.cursor="grabbing")}),t.addEventListener("mousemove",i=>{if(this.isDragging){const n=i.clientX-this.dragStartX,s=i.clientY-this.dragStartY;this._panX=this.panStartX+n,this._panY=this.panStartY+s,this.updateTransform()}}),t.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,t.style.cursor="default")}),t.addEventListener("mouseleave",()=>{this.isDragging&&(this.isDragging=!1,t.style.cursor="default")}),t.addEventListener("contextmenu",i=>i.preventDefault())}updateTransform(){this.mainContainer.scale.set(this._zoom),this.mainContainer.position.set(this._panX,this._panY)}centerView(){this._panX=(this.screenWidth-Nt*this._zoom)/2,this._panY=(this.screenHeight-Nt*this._zoom)/2,this.updateTransform()}setBounds(e){this.bounds=e}resize(e,t){this.screenWidth=e,this.screenHeight=t}get zoom(){return this._zoom}zoomIn(){this.setZoom(this._zoom+ha)}zoomOut(){this.setZoom(this._zoom-ha)}setZoom(e){const t=this._zoom;this._zoom=Math.max(dg,Math.min(fg,e));const i=this.screenWidth/2,n=this.screenHeight/2,s=this._zoom/t;this._panX=i-(i-this._panX)*s,this._panY=n-(n-this._panY)*s,this.updateTransform()}zoomAt(e,t,i){const n=this._zoom;this._zoom=Math.max(dg,Math.min(fg,this._zoom+i));const s=this._zoom/n;this._panX=e-(e-this._panX)*s,this._panY=t-(t-this._panY)*s,this.updateTransform()}resetView(){this._zoom=1,this.centerView()}screenToMap(e,t){const i=(e-this._panX)/this._zoom,n=(t-this._panY)/this._zoom;return{x:i,y:n}}get panX(){return this._panX}get panY(){return this._panY}get dragging(){return this.isDragging}drawRoads(e){if(this.roadGraphics.clear(),e.length!==0){for(const t of e){if(t.points.length<2)continue;const i=this.getRoadWidth(t.highway);this.roadGraphics.lineStyle(i,16777215,.6),this.roadGraphics.moveTo(t.points[0].x,t.points[0].y);for(let n=1;n<t.points.length;n++)this.roadGraphics.lineTo(t.points[n].x,t.points[n].y)}this.centerView()}}getRoadWidth(e){switch(e){case"motorway":case"motorway_link":return 2.5;case"trunk":case"trunk_link":return 2;case"primary":case"primary_link":return 1.8;case"secondary":case"secondary_link":return 1.5;case"tertiary":case"tertiary_link":return 1.2;case"residential":case"living_street":return .8;default:return .6}}drawVisitedNode(e,t){if(!this.bounds)return;const i=xn(e.lat,e.lon,this.bounds,Nt,Nt),n=t==="backward"?this.theme.visitedBackward:this.theme.visited;this.visitedGraphics.beginFill(n,.4),this.visitedGraphics.drawCircle(i.x,i.y,3),this.visitedGraphics.endFill()}setTheme(e){this.theme={...this.theme,...e}}getTheme(){return{...this.theme}}drawPath(e){if(!this.bounds||e.length<2)return;this.pathGraphics.clear();const t=e.map(n=>xn(n.lat,n.lon,this.bounds,Nt,Nt)),i=this.theme.path;this.pathGraphics.lineStyle(12,i,.2),this.pathGraphics.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)this.pathGraphics.lineTo(t[n].x,t[n].y);this.pathGraphics.lineStyle(6,i,.4),this.pathGraphics.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)this.pathGraphics.lineTo(t[n].x,t[n].y);this.pathGraphics.lineStyle(3,i,.7),this.pathGraphics.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)this.pathGraphics.lineTo(t[n].x,t[n].y);this.pathGraphics.lineStyle(1.5,16777215,1),this.pathGraphics.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)this.pathGraphics.lineTo(t[n].x,t[n].y)}animatePathFound(e=500){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId);const t=performance.now(),i=this.roadsContainer.alpha,n=this.visitedContainer.alpha,s=.2,o=.15,a=l=>{const u=l-t,h=Math.min(u/e,1),c=1-Math.pow(1-h,3);this.roadsContainer.alpha=i+(s-i)*c,this.visitedContainer.alpha=n+(o-n)*c,h<1?this.animationFrameId=requestAnimationFrame(a):this.animationFrameId=null};this.animationFrameId=requestAnimationFrame(a)}resetAlpha(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.roadsContainer.alpha=1,this.visitedContainer.alpha=1}setStartMarker(e){if(this.startMarker&&(this.markersContainer.removeChild(this.startMarker),this.startMarker.destroy(),this.startMarker=null),e&&this.bounds){const t=xn(e.lat,e.lon,this.bounds,Nt,Nt),i=this.theme.startMarker;this.startMarker=new Ti,this.startMarker.beginFill(i,.2),this.startMarker.drawCircle(t.x,t.y,16),this.startMarker.endFill(),this.startMarker.beginFill(i,.4),this.startMarker.drawCircle(t.x,t.y,10),this.startMarker.endFill(),this.startMarker.beginFill(i,.8),this.startMarker.drawCircle(t.x,t.y,6),this.startMarker.endFill(),this.startMarker.beginFill(16777215,1),this.startMarker.drawCircle(t.x,t.y,3),this.startMarker.endFill(),this.markersContainer.addChild(this.startMarker)}}setEndMarker(e){if(this.endMarker&&(this.markersContainer.removeChild(this.endMarker),this.endMarker.destroy(),this.endMarker=null),e&&this.bounds){const t=xn(e.lat,e.lon,this.bounds,Nt,Nt),i=this.theme.endMarker;this.endMarker=new Ti,this.endMarker.beginFill(i,.2),this.endMarker.drawCircle(t.x,t.y,16),this.endMarker.endFill(),this.endMarker.beginFill(i,.4),this.endMarker.drawCircle(t.x,t.y,10),this.endMarker.endFill(),this.endMarker.beginFill(i,.8),this.endMarker.drawCircle(t.x,t.y,6),this.endMarker.endFill(),this.endMarker.beginFill(16777215,1),this.endMarker.drawCircle(t.x,t.y,3),this.endMarker.endFill(),this.markersContainer.addChild(this.endMarker)}}clearVisited(){this.visitedGraphics.clear()}clearPath(){this.pathGraphics.clear()}clearAll(){this.clearVisited(),this.clearPath(),this.setStartMarker(null),this.setEndMarker(null),this.resetAlpha(),this.resetView()}destroy(){this.roadGraphics.destroy(),this.visitedGraphics.destroy(),this.pathGraphics.destroy(),this.startMarker&&this.startMarker.destroy(),this.endMarker&&this.endMarker.destroy(),this.roadsContainer.destroy(),this.visitedContainer.destroy(),this.pathContainer.destroy(),this.markersContainer.destroy(),this.mainContainer.destroy()}}const Tl=Nt,dP="https://overpass-api.de/api/interpreter";function fP(r){const[e,t,i,n]=r.boundingBox;return`
    [out:json][timeout:120];
    (
      way["highway"~"^(motorway|motorway_link|trunk|trunk_link|primary|primary_link|secondary|secondary_link|tertiary|tertiary_link|residential|unclassified|living_street)$"]
        (${e},${i},${t},${n});
    );
    out body geom;
  `.trim()}async function pP(r){const e=fP(r),t=await fetch(dP,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`data=${encodeURIComponent(e)}`});if(!t.ok)throw new Error(`Overpass API error: ${t.status}`);const i=await t.json();return mP(i,r.boundingBox)}function mP(r,e){const t=new Map,i=[],[n,s,o,a]=e.map(parseFloat),l={minLat:n,maxLat:s,minLon:o,maxLon:a};for(const u of r.elements)if(u.type==="way"&&u.geometry){const h=u.geometry,c=[];h.forEach((d,f)=>{const p=u.id*1e3+f;t.set(p,{id:p,lat:d.lat,lon:d.lon}),c.push(p)}),i.push({id:u.id,nodes:c,geometry:h.map(d=>({lat:d.lat,lon:d.lon})),tags:u.tags||{}})}return{nodes:t,ways:i,bounds:l}}function gP(){const[r,e]=H.useState(null),[t,i]=H.useState(null),[n,s]=H.useState([]),[o,a]=H.useState(null),[l,u]=H.useState(!1),[h,c]=H.useState(null),d=H.useCallback(async p=>{u(!0),c(null);try{const y=await pP(p);e(y),a(y.bounds);const _=lP(y);i(_);const g=uP(y,y.bounds,Tl,Tl);s(g)}catch(y){const _=y instanceof Error?y.message:"Failed to load city data";c(_),console.error("Failed to load city:",y)}finally{u(!1)}},[]),f=H.useCallback(()=>{e(null),i(null),s([]),a(null),c(null)},[]);return{osmData:r,graph:t,roadSegments:n,bounds:o,isLoading:l,error:h,loadCity:d,clear:f}}class lo{constructor(){fe(this,"heap",[])}push(e,t){this.heap.push({priority:t,value:e}),this.bubbleUp(this.heap.length-1)}pop(){if(this.heap.length===0)return;const e=this.heap[0].value,t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,this.bubbleDown(0)),e}isEmpty(){return this.heap.length===0}size(){return this.heap.length}bubbleUp(e){for(;e>0;){const t=Math.floor((e-1)/2);if(this.heap[t].priority<=this.heap[e].priority)break;[this.heap[t],this.heap[e]]=[this.heap[e],this.heap[t]],e=t}}bubbleDown(e){const t=this.heap.length;for(;;){const i=2*e+1,n=2*e+2;let s=e;if(i<t&&this.heap[i].priority<this.heap[s].priority&&(s=i),n<t&&this.heap[n].priority<this.heap[s].priority&&(s=n),s===e)break;[this.heap[e],this.heap[s]]=[this.heap[s],this.heap[e]],e=s}}}function wo(r,e,t){const i=[];let n=e;for(;r.has(n);)i.unshift(t.nodes.get(n)),n=r.get(n);return i.unshift(t.nodes.get(n)),i}function*pg(r){const{graph:e,start:t,end:i}=r;yield{type:"start",nodeId:t.id,node:t};const n=new lo,s=new Map,o=new Map,a=new Set,l=new Map,u=c=>{let d=l.get(c);if(d===void 0){const f=e.nodes.get(c);d=ao(f,i),l.set(c,d)}return d};o.set(t.id,0),n.push(t.id,u(t.id));let h=0;for(;!n.isEmpty();){const c=n.pop();if(a.has(c))continue;a.add(c);const d=e.nodes.get(c);if(h++,yield{type:"visit",nodeId:c,node:d,visitedCount:h},c===i.id){yield{type:"complete",path:wo(s,c,e),visitedCount:h};return}const f=e.adjacency.get(c)||[],p=o.get(c);for(const y of f){if(a.has(y.to))continue;const _=p+y.weight,g=o.get(y.to)??1/0;if(_<g){s.set(y.to,c),o.set(y.to,_);const v=_+u(y.to);n.push(y.to,v)}}}yield{type:"complete",path:[],visitedCount:h}}function*yP(r){const{graph:e,start:t,end:i}=r;yield{type:"start",nodeId:t.id,node:t};const n=new lo,s=new Map,o=new Map,a=new Set;o.set(t.id,0),n.push(t.id,0);let l=0;for(;!n.isEmpty();){const u=n.pop();if(a.has(u))continue;a.add(u);const h=e.nodes.get(u);if(l++,yield{type:"visit",nodeId:u,node:h,visitedCount:l},u===i.id){yield{type:"complete",path:wo(s,u,e),visitedCount:l};return}const c=e.adjacency.get(u)||[];for(const d of c){if(a.has(d.to))continue;const f=(o.get(u)??1/0)+d.weight,p=o.get(d.to)??1/0;f<p&&(s.set(d.to,u),o.set(d.to,f),n.push(d.to,f))}}yield{type:"complete",path:[],visitedCount:l}}function*vP(r){const{graph:e,start:t,end:i}=r;yield{type:"start",nodeId:t.id,node:t};const n=[t.id];let s=0;const o=new Set([t.id]),a=new Map;let l=0;for(;s<n.length;){const u=n[s++],h=e.nodes.get(u);if(l++,yield{type:"visit",nodeId:u,node:h,visitedCount:l},u===i.id){yield{type:"complete",path:wo(a,u,e),visitedCount:l};return}const c=e.adjacency.get(u)||[];for(const d of c)o.has(d.to)||(o.add(d.to),a.set(d.to,u),n.push(d.to))}yield{type:"complete",path:[],visitedCount:l}}function*_P(r){const{graph:e,start:t,end:i}=r;yield{type:"start",nodeId:t.id,node:t};const n=[t.id],s=new Set,o=new Map;let a=0;for(;n.length>0;){const l=n.pop();if(s.has(l))continue;s.add(l);const u=e.nodes.get(l);if(a++,yield{type:"visit",nodeId:l,node:u,visitedCount:a},l===i.id){yield{type:"complete",path:wo(o,l,e),visitedCount:a};return}const h=e.adjacency.get(l)||[];for(let c=h.length-1;c>=0;c--){const d=h[c];s.has(d.to)||(o.set(d.to,l),n.push(d.to))}}yield{type:"complete",path:[],visitedCount:a}}function*xP(r){const{graph:e,start:t,end:i}=r;yield{type:"start",nodeId:t.id,node:t};const n=new lo,s=new Set,o=new Map;n.push(t.id,ao(t,i));let a=0;for(;!n.isEmpty();){const l=n.pop();if(s.has(l))continue;s.add(l);const u=e.nodes.get(l);if(a++,yield{type:"visit",nodeId:l,node:u,visitedCount:a},l===i.id){yield{type:"complete",path:wo(o,l,e),visitedCount:a};return}const h=e.adjacency.get(l)||[];for(const c of h)if(!s.has(c.to)){const d=e.nodes.get(c.to);o.set(c.to,l),n.push(c.to,ao(d,i))}}yield{type:"complete",path:[],visitedCount:a}}function*wP(r){const{graph:e,start:t,end:i}=r;yield{type:"start",nodeId:t.id,node:t};const n=new Map,s=new Map,o=x=>{let w=n.get(x);return w===void 0&&(w=ao(e.nodes.get(x),i),n.set(x,w)),w},a=x=>{let w=s.get(x);return w===void 0&&(w=ao(e.nodes.get(x),t),s.set(x,w)),w},l=new lo,u=new Map,h=new Map,c=new Set,d=new lo,f=new Map,p=new Map,y=new Set;h.set(t.id,0),l.push(t.id,o(t.id)),p.set(i.id,0),d.push(i.id,a(i.id));let _=0,g=null,v=1/0,m=null;for(;!l.isEmpty()||!d.isEmpty();){if(!l.isEmpty()){const x=l.pop();if(!c.has(x)){c.add(x);const w=e.nodes.get(x);if(_++,yield{type:"visit",nodeId:x,node:w,visitedCount:_,fromDirection:"forward"},y.has(x)){const E=(h.get(x)||0)+(p.get(x)||0);E<v&&(v=E,m=x)}const S=e.adjacency.get(x)||[],T=h.get(x);for(const E of S){const I=T+E.weight;I<(h.get(E.to)??1/0)&&(u.set(E.to,x),h.set(E.to,I),l.push(E.to,I+o(E.to)))}}}if(!d.isEmpty()){const x=d.pop();if(!y.has(x)){y.add(x);const w=e.nodes.get(x);if(_++,yield{type:"visit",nodeId:x,node:w,visitedCount:_,fromDirection:"backward"},c.has(x)){const E=(h.get(x)||0)+(p.get(x)||0);E<v&&(v=E,m=x)}const S=e.adjacency.get(x)||[],T=p.get(x);for(const E of S){const I=T+E.weight;I<(p.get(E.to)??1/0)&&(f.set(E.to,x),p.set(E.to,I),d.push(E.to,I+a(E.to)))}}}if(m!==null){const x=[];let w=m;for(;u.has(w);)x.push(e.nodes.get(w)),w=u.get(w);x.push(e.nodes.get(w)),x.reverse();const S=[];for(w=m;f.has(w);)w=f.get(w),S.push(e.nodes.get(w));g=[...x,...S];break}}g?yield{type:"complete",path:g,visitedCount:_}:yield{type:"complete",path:[],visitedCount:_}}function EP(r,e,t,i){const n={graph:e,start:t,end:i};switch(r){case"astar":return pg(n);case"dijkstra":return yP(n);case"bfs":return vP(n);case"dfs":return _P(n);case"greedy":return xP(n);case"bidirectional":return wP(n);default:return pg(n)}}function TP(){const[r,e]=H.useState(!1),[t,i]=H.useState(new Set),[n,s]=H.useState([]),[o,a]=H.useState(0),[l,u]=H.useState(50),h=H.useRef(null),c=H.useRef(null),d=H.useRef(null),f=H.useRef(1);H.useEffect(()=>{f.current=Math.max(1,Math.floor(l/2))},[l]);const p=H.useCallback(()=>{if(h.current)try{const m=f.current;for(let x=0;x<m;x++){const w=h.current.next();if(w.done){e(!1);return}const S=w.value;if(S.type==="visit"&&S.nodeId?(i(T=>new Set(T).add(S.nodeId)),a(S.visitedCount||0)):S.type==="complete"&&S.path&&(s(S.path),a(S.visitedCount||0)),d.current&&d.current(S),S.type==="complete"){e(!1);return}}c.current=requestAnimationFrame(p)}catch(m){console.error("Pathfinding error:",m),e(!1)}},[]),y=H.useCallback((m,x,w,S)=>{i(new Set),s([]),a(0),h.current=EP(S,m,x,w),e(!0),c.current=requestAnimationFrame(p)},[p]),_=H.useCallback(()=>{c.current&&(cancelAnimationFrame(c.current),c.current=null),e(!1)},[]),g=H.useCallback(()=>{_(),i(new Set),s([]),a(0),h.current=null},[_]),v=H.useCallback(m=>{d.current=m},[]);return H.useEffect(()=>()=>{c.current&&cancelAnimationFrame(c.current)},[]),{isRunning:r,visitedNodes:t,currentPath:n,visitedCount:o,start:y,stop:_,reset:g,speed:l,setSpeed:u,onStep:v}}function SP(r,e){const[t,i]=H.useState(null),[n,s]=H.useState(null),o=H.useCallback((l,u)=>{if(!r||!e)return;const h=hP(r,l,u,e,Tl,Tl,50);h&&(t?n?(i(h),s(null)):s(h):i(h))},[r,e,t,n]),a=H.useCallback(()=>{i(null),s(null)},[]);return{startNode:t,endNode:n,handleClick:o,reset:a,setStartNode:i,setEndNode:s}}const AP="https://nominatim.openstreetmap.org";async function CP(r){if(!r.trim())return[];const e=new URLSearchParams({q:r,format:"json",addressdetails:"1",limit:"5",featuretype:"city,town,village"}),t=await fetch(`${AP}/search?${e}`,{headers:{"User-Agent":"PathPlanningVisualizer/1.0"}});if(!t.ok)throw new Error("Failed to search for city");return(await t.json()).filter(n=>n.class==="place"||n.class==="boundary").map(n=>({displayName:n.display_name,lat:parseFloat(n.lat),lon:parseFloat(n.lon),boundingBox:n.boundingbox,osmId:n.osm_id,osmType:n.osm_type}))}function bP({onSelect:r,disabled:e}){const[t,i]=H.useState(""),[n,s]=H.useState([]),[o,a]=H.useState(!1),[l,u]=H.useState(!1),h=H.useRef(null),c=H.useRef(null),d=H.useCallback(async _=>{if(!_.trim()){s([]);return}a(!0);try{const g=await CP(_);s(g),u(g.length>0)}catch(g){console.error("Search failed:",g),s([])}finally{a(!1)}},[]),f=H.useCallback(_=>{const g=_.target.value;i(g),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{d(g)},300)},[d]),p=H.useCallback(_=>{i(_.displayName.split(",")[0]),u(!1),s([]),r(_)},[r]),y=H.useCallback(_=>{_.preventDefault(),n.length>0&&p(n[0])},[n,p]);return H.useEffect(()=>{const _=g=>{c.current&&!c.current.contains(g.target)&&u(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),M.jsxs("div",{className:"control-group",ref:c,children:[M.jsx("label",{children:"City"}),M.jsxs("form",{className:"city-search",onSubmit:y,children:[M.jsx("input",{type:"text",value:t,onChange:f,placeholder:"Search for a city...",disabled:e,onFocus:()=>n.length>0&&u(!0)}),M.jsx("button",{type:"submit",className:"btn btn-primary",disabled:e||o||n.length===0,children:o?"...":"Load"})]}),l&&n.length>0&&M.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"rgba(0, 0, 0, 0.95)",border:"1px solid rgba(0, 255, 255, 0.3)",borderRadius:"6px",marginTop:"4px",maxHeight:"200px",overflowY:"auto",zIndex:1e3},children:n.map((_,g)=>M.jsx("div",{onClick:()=>p(_),style:{padding:"10px 14px",cursor:"pointer",borderBottom:g<n.length-1?"1px solid rgba(255,255,255,0.1)":"none",fontSize:"13px",color:"rgba(255,255,255,0.8)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(0, 255, 255, 0.1)"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:_.displayName},`${_.osmId}-${g}`))})]})}const mg=[{id:"astar",name:"A* Search",description:"Optimal pathfinding with heuristic guidance",optimal:!0,usesHeuristic:!0},{id:"dijkstra",name:"Dijkstra's Algorithm",description:"Optimal shortest path, explores uniformly",optimal:!0,usesHeuristic:!1},{id:"bfs",name:"Breadth-First Search",description:"Finds shortest path by hop count",optimal:!0,usesHeuristic:!1},{id:"dfs",name:"Depth-First Search",description:"Explores deeply first, not optimal",optimal:!1,usesHeuristic:!1},{id:"greedy",name:"Greedy Best-First",description:"Fast but not optimal, follows heuristic",optimal:!1,usesHeuristic:!0},{id:"bidirectional",name:"Bidirectional A*",description:"Searches from both ends simultaneously",optimal:!0,usesHeuristic:!0}];function IP({value:r,onChange:e,disabled:t}){var i;return M.jsxs("div",{className:"control-group",children:[M.jsx("label",{children:"Algorithm"}),M.jsx("select",{value:r,onChange:n=>e(n.target.value),disabled:t,children:mg.map(n=>M.jsx("option",{value:n.id,children:n.name},n.id))}),M.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.5)",marginTop:"4px"},children:(i=mg.find(n=>n.id===r))==null?void 0:i.description})]})}function PP({canStart:r,isRunning:e,speed:t,onStart:i,onStop:n,onReset:s,onSpeedChange:o}){return M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"control-group",children:[M.jsx("label",{children:"Speed"}),M.jsxs("div",{className:"speed-control",children:[M.jsx("input",{type:"range",min:"1",max:"100",value:t,onChange:a=>o(parseInt(a.target.value))}),M.jsxs("span",{children:[t,"x"]})]})]}),M.jsxs("div",{className:"button-row",children:[e?M.jsx("button",{className:"btn",onClick:n,children:"Pause"}):M.jsx("button",{className:"btn btn-primary",onClick:i,disabled:!r,children:"Start"}),M.jsx("button",{className:"btn btn-danger",onClick:s,disabled:e,children:"Reset"})]})]})}function RP({visitedCount:r,pathLength:e}){return M.jsxs("div",{className:"legend",children:[M.jsxs("div",{className:"legend-item",children:[M.jsx("div",{className:"legend-color roads"}),M.jsx("span",{children:"Roads"})]}),M.jsxs("div",{className:"legend-item",children:[M.jsx("div",{className:"legend-color start"}),M.jsx("span",{children:"Start Point"})]}),M.jsxs("div",{className:"legend-item",children:[M.jsx("div",{className:"legend-color end"}),M.jsx("span",{children:"End Point"})]}),M.jsxs("div",{className:"legend-item",children:[M.jsx("div",{className:"legend-color visited"}),M.jsxs("span",{children:["Visited (",r,")"]})]}),M.jsxs("div",{className:"legend-item",children:[M.jsx("div",{className:"legend-color path"}),M.jsxs("span",{children:["Path (",e," nodes)"]})]})]})}const gg=[{name:"Cyan",value:65535},{name:"Magenta",value:16711808},{name:"Green",value:65280},{name:"Orange",value:16744448},{name:"Purple",value:8388863},{name:"Yellow",value:16776960},{name:"Red",value:16711680},{name:"Blue",value:33023}],MP=[{name:"Tron (Default)",theme:{visited:65535,visitedBackward:16711808,path:65535,startMarker:65280,endMarker:16711808}},{name:"Sunset",theme:{visited:16744448,visitedBackward:16711808,path:16744448,startMarker:16776960,endMarker:16711680}},{name:"Ocean",theme:{visited:33023,visitedBackward:65535,path:33023,startMarker:65408,endMarker:65535}},{name:"Neon Purple",theme:{visited:8388863,visitedBackward:16711935,path:8388863,startMarker:65280,endMarker:16711935}},{name:"Matrix",theme:{visited:65280,visitedBackward:65408,path:65280,startMarker:65535,endMarker:65408}}];function ds(r){return"#"+r.toString(16).padStart(6,"0")}function yg(r){return parseInt(r.replace("#",""),16)}function kP({theme:r,onChange:e,disabled:t}){const[i,n]=H.useState(!1);return M.jsxs("div",{className:"color-picker",children:[M.jsxs("button",{className:"color-picker-toggle",onClick:()=>n(!i),disabled:t,children:["Colors ",i?"":""]}),i&&M.jsxs("div",{className:"color-picker-panel",children:[M.jsxs("div",{className:"color-presets",children:[M.jsx("label",{children:"Theme Presets"}),M.jsx("div",{className:"preset-buttons",children:MP.map(s=>M.jsxs("button",{className:"preset-button",onClick:()=>e(s.theme),disabled:t,title:s.name,children:[M.jsx("span",{className:"preset-swatch",style:{backgroundColor:ds(s.theme.path)}}),s.name]},s.name))})]}),M.jsxs("div",{className:"color-options",children:[M.jsxs("div",{className:"color-option",children:[M.jsx("label",{children:"Path Color"}),M.jsxs("div",{className:"color-swatches",children:[gg.map(s=>M.jsx("button",{className:`color-swatch ${r.path===s.value?"active":""}`,style:{backgroundColor:ds(s.value)},onClick:()=>e({path:s.value,visited:s.value}),disabled:t,title:s.name},s.value)),M.jsx("input",{type:"color",value:ds(r.path),onChange:s=>{const o=yg(s.target.value);e({path:o,visited:o})},disabled:t,className:"color-input",title:"Custom color"})]})]}),M.jsxs("div",{className:"color-option",children:[M.jsx("label",{children:"Visited Nodes"}),M.jsxs("div",{className:"color-swatches",children:[gg.map(s=>M.jsx("button",{className:`color-swatch ${r.visited===s.value?"active":""}`,style:{backgroundColor:ds(s.value)},onClick:()=>e({visited:s.value}),disabled:t,title:s.name},s.value)),M.jsx("input",{type:"color",value:ds(r.visited),onChange:s=>e({visited:yg(s.target.value)}),disabled:t,className:"color-input",title:"Custom color"})]})]})]})]})]})}function DP(){const r=H.useRef(null),e=H.useRef(null),t=H.useRef(null),[i,n]=H.useState({width:800,height:600}),[s,o]=H.useState(null),[a,l]=H.useState("astar"),[u,h]=H.useState(!1),[c,d]=H.useState({...A_}),{graph:f,roadSegments:p,bounds:y,isLoading:_,error:g,loadCity:v}=gP(),{isRunning:m,currentPath:x,visitedCount:w,start:S,stop:T,reset:E,speed:I,setSpeed:R,onStep:q}=TP(),{startNode:F,endNode:A,handleClick:k,reset:G}=SP(f,y);H.useEffect(()=>{if(!r.current||e.current)return;const W=r.current;let se=W.clientWidth,te=W.clientHeight;(se<100||te<100)&&(se=window.innerWidth,te=window.innerHeight-100);const ue=new t_({width:se,height:te,backgroundColor:0,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0});W.appendChild(ue.view),e.current=ue;const _e=new cP(ue);t.current=_e,n({width:se,height:te}),h(!0)},[]),H.useEffect(()=>{const W=()=>{if(!r.current||!e.current)return;const se=r.current.clientWidth,te=r.current.clientHeight;n({width:se,height:te}),e.current.renderer.resize(se,te),t.current&&t.current.resize(se,te)};return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),H.useEffect(()=>{if(!e.current||!t.current)return;const W=e.current.view,se=t.current,te=ue=>{if(_||m||se.dragging)return;const _e=W.getBoundingClientRect(),et=i.width/_e.width,Ne=i.height/_e.height,ce=(ue.clientX-_e.left)*et,Ce=(ue.clientY-_e.top)*Ne,be=se.screenToMap(ce,Ce);k(be.x,be.y)};return W.addEventListener("click",te),()=>W.removeEventListener("click",te)},[k,i,_,m]),H.useEffect(()=>{q(W=>{!t.current||!y||W.type==="visit"&&W.node&&t.current.drawVisitedNode(W.node,W.fromDirection)})},[q,y]),H.useEffect(()=>{if(!t.current||p.length===0||!u)return;const W=setTimeout(()=>{t.current&&t.current.drawRoads(p)},100);return()=>clearTimeout(W)},[p,u]),H.useEffect(()=>{!t.current||!y||!u||t.current.setBounds(y)},[y,u]),H.useEffect(()=>{!t.current||!u||t.current.setStartMarker(F)},[F,u]),H.useEffect(()=>{!t.current||!u||t.current.setEndMarker(A)},[A,u]),H.useEffect(()=>{!t.current||!u||x.length>0&&(t.current.drawPath(x),t.current.animatePathFound(600))},[x,u]);const Z=H.useCallback(W=>{d(se=>({...se,...W})),t.current&&t.current.setTheme(W)},[]),$=H.useCallback(async W=>{o(W),E(),G(),t.current&&t.current.clearAll(),await v(W)},[v,E,G]),b=H.useCallback(()=>{!f||!F||!A||(t.current&&(t.current.resetAlpha(),t.current.clearVisited(),t.current.clearPath()),S(f,F,A,a))},[f,F,A,a,S]),U=H.useCallback(()=>{E(),G(),t.current&&(t.current.resetAlpha(),t.current.clearVisited(),t.current.clearPath())},[E,G]),C=H.useCallback(()=>{t.current&&t.current.zoomIn()},[]),P=H.useCallback(()=>{t.current&&t.current.zoomOut()},[]),K=H.useCallback(()=>{t.current&&t.current.resetView()},[]),oe=!!f&&!!F&&!!A&&!m;return M.jsxs("div",{className:"app",children:[M.jsxs("div",{className:"control-panel",children:[M.jsx("h1",{children:"Path Planning Visualizer"}),M.jsx(bP,{onSelect:$,disabled:_}),g&&M.jsx("div",{className:"error-message",children:g}),M.jsx(IP,{value:a,onChange:l,disabled:m}),M.jsx(PP,{canStart:oe,isRunning:m,speed:I,onStart:b,onStop:T,onReset:U,onSpeedChange:R}),M.jsx(kP,{theme:c,onChange:Z,disabled:m}),M.jsxs("div",{className:"status",children:[!s&&M.jsx("span",{children:"Search for a city to begin"}),s&&!f&&!_&&M.jsx("span",{children:"Loading city data..."}),f&&!F&&M.jsxs("span",{children:["Click on the map to set ",M.jsx("span",{className:"highlight",children:"start point"})]}),f&&F&&!A&&M.jsxs("span",{children:["Click on the map to set ",M.jsx("span",{className:"highlight",children:"end point"})]}),f&&F&&A&&!m&&x.length===0&&M.jsxs("span",{children:["Click ",M.jsx("span",{className:"highlight",children:"Start"})," to begin pathfinding"]}),m&&M.jsxs("span",{children:["Searching... ",M.jsx("span",{className:"highlight",children:w})," nodes visited"]}),!m&&x.length>0&&M.jsxs("span",{children:["Path found! ",M.jsx("span",{className:"highlight",children:x.length})," nodes, ",M.jsx("span",{className:"highlight",children:w})," visited"]})]})]}),f&&M.jsx(RP,{visitedCount:w,pathLength:x.length}),M.jsx("div",{ref:r,className:"canvas-container",style:{flex:1}}),f&&M.jsxs("div",{className:"zoom-controls",children:[M.jsx("button",{onClick:C,title:"Zoom In",children:"+"}),M.jsx("button",{onClick:P,title:"Zoom Out",children:""}),M.jsx("button",{onClick:K,title:"Reset View",children:""})]}),_&&M.jsx("div",{className:"loading-overlay",children:M.jsxs("div",{className:"loading-spinner",children:[M.jsx("div",{className:"spinner"}),M.jsx("span",{className:"loading-text",children:"Loading road data..."})]})}),!f&&!_&&M.jsxs("div",{className:"instructions",children:[M.jsx("p",{children:"Search for a city to visualize path planning algorithms"}),M.jsx("p",{style:{color:"rgba(0, 255, 255, 0.6)"},children:"on real street networks"})]})]})}vh.createRoot(document.getElementById("root")).render(M.jsx(V_.StrictMode,{children:M.jsx(DP,{})}));
