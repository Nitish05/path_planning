(function(){"use strict";let r;function L(t){const e=r.__externref_table_alloc();return r.__wbindgen_externrefs.set(e,t),e}function d(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function F(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const s=t.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=t.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(t)){const s=t.length;let c="[";s>0&&(c+=F(t[0]));for(let _=1;_<s;_++)c+=", "+F(t[_]);return c+="]",c}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(n&&n.length>1)o=n[1];else return toString.call(t);if(o=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:o}function G(t,e){return t=t>>>0,y().subarray(t/1,t/1+e)}let w=null;function l(){return(w===null||w.buffer.detached===!0||w.buffer.detached===void 0&&w.buffer!==r.memory.buffer)&&(w=new DataView(r.memory.buffer)),w}function m(t,e){return t=t>>>0,V(t,e)}let p=null;function y(){return(p===null||p.byteLength===0)&&(p=new Uint8Array(r.memory.buffer)),p}function A(t,e){try{return t.apply(this,e)}catch(n){const o=L(n);r.__wbindgen_exn_store(o)}}function S(t){return t==null}function f(t,e,n){if(n===void 0){const a=h.encode(t),i=e(a.length,1)>>>0;return y().subarray(i,i+a.length).set(a),b=a.length,i}let o=t.length,s=e(o,1)>>>0;const c=y();let _=0;for(;_<o;_++){const a=t.charCodeAt(_);if(a>127)break;c[s+_]=a}if(_!==o){_!==0&&(t=t.slice(_)),s=n(s,o,o=_+t.length*3,1)>>>0;const a=y().subarray(s+_,s+o),i=h.encodeInto(t,a);_+=i.written,s=n(s,o,_,1)>>>0}return b=_,s}function u(t){const e=r.__wbindgen_externrefs.get(t);return r.__externref_table_dealloc(t),e}let v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();const P=2146435072;let T=0;function V(t,e){return T+=e,T>=P&&(v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),v.decode(),T=e),v.decode(y().subarray(t,t+e))}const h=new TextEncoder;"encodeInto"in h||(h.encodeInto=function(t,e){const n=h.encode(t);return e.set(n),{read:t.length,written:n.length}});let b=0;const k=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_astarsolver_free(t>>>0,1)),O=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_bfssolver_free(t>>>0,1)),W=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_bidirectionalsolver_free(t>>>0,1)),M=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_dfssolver_free(t>>>0,1)),U=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_dijkstrasolver_free(t>>>0,1)),B=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_greedysolver_free(t>>>0,1)),I=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_wasmgraphhandle_free(t>>>0,1));class x{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,k.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_astarsolver_free(e,0)}runToCompletion(){return r.astarsolver_runToCompletion(this.__wbg_ptr)}constructor(e,n,o){d(e,g);const s=f(n,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b,_=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,i=r.astarsolver_new(e.__wbg_ptr,s,c,_,a);if(i[2])throw u(i[1]);return this.__wbg_ptr=i[0]>>>0,k.register(this,this.__wbg_ptr,this),this}isDone(){return r.astarsolver_isDone(this.__wbg_ptr)!==0}nextStep(){return r.astarsolver_nextStep(this.__wbg_ptr)}}Symbol.dispose&&(x.prototype[Symbol.dispose]=x.prototype.free);class R{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,O.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_bfssolver_free(e,0)}runToCompletion(){return r.bfssolver_runToCompletion(this.__wbg_ptr)}constructor(e,n,o){d(e,g);const s=f(n,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b,_=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,i=r.bfssolver_new(e.__wbg_ptr,s,c,_,a);if(i[2])throw u(i[1]);return this.__wbg_ptr=i[0]>>>0,O.register(this,this.__wbg_ptr,this),this}isDone(){return r.bfssolver_isDone(this.__wbg_ptr)!==0}nextStep(){return r.bfssolver_nextStep(this.__wbg_ptr)}}Symbol.dispose&&(R.prototype[Symbol.dispose]=R.prototype.free);class D{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,W.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_bidirectionalsolver_free(e,0)}runToCompletion(){return r.bidirectionalsolver_runToCompletion(this.__wbg_ptr)}constructor(e,n,o){d(e,g);const s=f(n,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b,_=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,i=r.bidirectionalsolver_new(e.__wbg_ptr,s,c,_,a);if(i[2])throw u(i[1]);return this.__wbg_ptr=i[0]>>>0,W.register(this,this.__wbg_ptr,this),this}isDone(){return r.bidirectionalsolver_isDone(this.__wbg_ptr)!==0}nextStep(){return r.bidirectionalsolver_nextStep(this.__wbg_ptr)}}Symbol.dispose&&(D.prototype[Symbol.dispose]=D.prototype.free);class z{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,M.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_dfssolver_free(e,0)}runToCompletion(){return r.dfssolver_runToCompletion(this.__wbg_ptr)}constructor(e,n,o){d(e,g);const s=f(n,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b,_=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,i=r.dfssolver_new(e.__wbg_ptr,s,c,_,a);if(i[2])throw u(i[1]);return this.__wbg_ptr=i[0]>>>0,M.register(this,this.__wbg_ptr,this),this}isDone(){return r.dfssolver_isDone(this.__wbg_ptr)!==0}nextStep(){return r.dfssolver_nextStep(this.__wbg_ptr)}}Symbol.dispose&&(z.prototype[Symbol.dispose]=z.prototype.free);class E{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,U.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_dijkstrasolver_free(e,0)}runToCompletion(){return r.dijkstrasolver_runToCompletion(this.__wbg_ptr)}constructor(e,n,o){d(e,g);const s=f(n,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b,_=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,i=r.dijkstrasolver_new(e.__wbg_ptr,s,c,_,a);if(i[2])throw u(i[1]);return this.__wbg_ptr=i[0]>>>0,U.register(this,this.__wbg_ptr,this),this}isDone(){return r.dijkstrasolver_isDone(this.__wbg_ptr)!==0}nextStep(){return r.dijkstrasolver_nextStep(this.__wbg_ptr)}}Symbol.dispose&&(E.prototype[Symbol.dispose]=E.prototype.free);class C{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,B.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_greedysolver_free(e,0)}runToCompletion(){return r.greedysolver_runToCompletion(this.__wbg_ptr)}constructor(e,n,o){d(e,g);const s=f(n,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b,_=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b,i=r.greedysolver_new(e.__wbg_ptr,s,c,_,a);if(i[2])throw u(i[1]);return this.__wbg_ptr=i[0]>>>0,B.register(this,this.__wbg_ptr,this),this}isDone(){return r.greedysolver_isDone(this.__wbg_ptr)!==0}nextStep(){return r.greedysolver_nextStep(this.__wbg_ptr)}}Symbol.dispose&&(C.prototype[Symbol.dispose]=C.prototype.free);class g{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,I.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_wasmgraphhandle_free(e,0)}nodeCount(){return r.wasmgraphhandle_nodeCount(this.__wbg_ptr)>>>0}constructor(e){const n=r.wasmgraphhandle_new(e);if(n[2])throw u(n[1]);return this.__wbg_ptr=n[0]>>>0,I.register(this,this.__wbg_ptr,this),this}}Symbol.dispose&&(g.prototype[Symbol.dispose]=g.prototype.free);const q=new Set(["basic","cors","default"]);async function X(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(o){if(t.ok&&q.has(t.type)&&t.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Y(){const t={};return t.wbg={},t.wbg.__wbg_Error_52673b7de5a0ca89=function(e,n){return Error(m(e,n))},t.wbg.__wbg_String_8f0eb39a4a4c2f66=function(e,n){const o=String(n),s=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b;l().setInt32(e+4*1,c,!0),l().setInt32(e+4*0,s,!0)},t.wbg.__wbg___wbindgen_boolean_get_dea25b33882b895b=function(e){const n=e,o=typeof n=="boolean"?n:void 0;return S(o)?16777215:o?1:0},t.wbg.__wbg___wbindgen_debug_string_adfb662ae34724b6=function(e,n){const o=F(n),s=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b;l().setInt32(e+4*1,c,!0),l().setInt32(e+4*0,s,!0)},t.wbg.__wbg___wbindgen_in_0d3e1e8f0c669317=function(e,n){return e in n},t.wbg.__wbg___wbindgen_is_function_8d400b8b1af978cd=function(e){return typeof e=="function"},t.wbg.__wbg___wbindgen_is_object_ce774f3490692386=function(e){const n=e;return typeof n=="object"&&n!==null},t.wbg.__wbg___wbindgen_is_undefined_f6b95eab589e0269=function(e){return e===void 0},t.wbg.__wbg___wbindgen_jsval_loose_eq_766057600fdd1b0d=function(e,n){return e==n},t.wbg.__wbg___wbindgen_number_get_9619185a74197f95=function(e,n){const o=n,s=typeof o=="number"?o:void 0;l().setFloat64(e+8*1,S(s)?0:s,!0),l().setInt32(e+4*0,!S(s),!0)},t.wbg.__wbg___wbindgen_string_get_a2a31e16edf96e42=function(e,n){const o=n,s=typeof o=="string"?o:void 0;var c=S(s)?0:f(s,r.__wbindgen_malloc,r.__wbindgen_realloc),_=b;l().setInt32(e+4*1,_,!0),l().setInt32(e+4*0,c,!0)},t.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(e,n){throw new Error(m(e,n))},t.wbg.__wbg_call_abb4ff46ce38be40=function(){return A(function(e,n){return e.call(n)},arguments)},t.wbg.__wbg_done_62ea16af4ce34b24=function(e){return e.done},t.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,n){let o,s;try{o=e,s=n,console.error(m(e,n))}finally{r.__wbindgen_free(o,s,1)}},t.wbg.__wbg_get_6b7bd52aca3f9671=function(e,n){return e[n>>>0]},t.wbg.__wbg_get_af9dab7e9603ea93=function(){return A(function(e,n){return Reflect.get(e,n)},arguments)},t.wbg.__wbg_get_with_ref_key_1dc361bd10053bfe=function(e,n){return e[n]},t.wbg.__wbg_instanceof_ArrayBuffer_f3320d2419cd0355=function(e){let n;try{n=e instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbg_instanceof_Uint8Array_da54ccc9d3e09434=function(e){let n;try{n=e instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbg_isArray_51fd9e6422c0a395=function(e){return Array.isArray(e)},t.wbg.__wbg_iterator_27b7c8b35ab3e86b=function(){return Symbol.iterator},t.wbg.__wbg_length_22ac23eaec9d8053=function(e){return e.length},t.wbg.__wbg_length_d45040a40c570362=function(e){return e.length},t.wbg.__wbg_new_1ba21ce319a06297=function(){return new Object},t.wbg.__wbg_new_25f239778d6112b9=function(){return new Array},t.wbg.__wbg_new_6421f6084cc5bc5a=function(e){return new Uint8Array(e)},t.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},t.wbg.__wbg_next_138a17bbf04e926c=function(e){return e.next},t.wbg.__wbg_next_3cfe5c0fe2a4cc53=function(){return A(function(e){return e.next()},arguments)},t.wbg.__wbg_prototypesetcall_dfe9b766cdc1f1fd=function(e,n,o){Uint8Array.prototype.set.call(G(e,n),o)},t.wbg.__wbg_set_3f1d0b984ed272ed=function(e,n,o){e[n]=o},t.wbg.__wbg_set_7df433eea03a5c14=function(e,n,o){e[n>>>0]=o},t.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,n){const o=n.stack,s=f(o,r.__wbindgen_malloc,r.__wbindgen_realloc),c=b;l().setInt32(e+4*1,c,!0),l().setInt32(e+4*0,s,!0)},t.wbg.__wbg_value_57b7b035e117f7ee=function(e){return e.value},t.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,n){return m(e,n)},t.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},t.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_externrefs,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t}function J(t,e){return r=t.exports,$.__wbindgen_wasm_module=e,w=null,p=null,r.__wbindgen_start(),r}async function $(t){if(r!==void 0)return r;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/path_planning/assets/pathfinding_wasm_bg-XgvOlAn1.wasm",self.location.href));const e=Y();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:o}=await X(await t,e);return J(n,o)}let N=!1;async function K(){N||(await $(),N=!0)}function Q(t,e,n,o){switch(t){case"astar":return new x(e,n,o);case"dijkstra":return new E(e,n,o);case"bfs":return new R(e,n,o);case"dfs":return new z(e,n,o);case"greedy":return new C(e,n,o);case"bidirectional":return new D(e,n,o);default:return new x(e,n,o)}}self.onmessage=async t=>{const{type:e,graph:n,startId:o,endId:s,algorithm:c}=t.data;if(e==="run")try{await K();const _=performance.now(),a=new g(n),i=Q(c,a,o,s),j=i.runToCompletion(),Z=performance.now();i.free(),a.free();const H={type:"result",path:j.path||[],visitedNodes:j.visitedNodes||[],visitedCount:j.visitedCount||0,timeMs:Z-_};self.postMessage(H)}catch(_){const a={type:"error",message:_ instanceof Error?_.message:"Unknown error"};self.postMessage(a)}}})();
